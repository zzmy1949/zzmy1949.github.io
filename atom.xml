<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>å‰ç«¯å£¹èœé¸Ÿ</title>
  
  <subtitle>å…³æ³¨å‰ç«¯çŸ¥è¯†ï¼Œæ”¶é›†ç²¾å½©åšæ–‡ï¼ŒåšæŠ€æœ¯çš„æ¬è¿å·¥</subtitle>
  <link href="https://xuehuayu.cn/atom.xml" rel="self"/>
  
  <link href="https://xuehuayu.cn/"/>
  <updated>2025-12-13T16:23:58.692Z</updated>
  <id>https://xuehuayu.cn/</id>
  
  <author>
    <name>æ¬ç –å¤§è€</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>åˆ©ç”¨cloudflareå…¨çƒcdnåŠ é€Ÿm3u8è§†é¢‘</title>
    <link href="https://xuehuayu.cn/article/8dc0076c.html"/>
    <id>https://xuehuayu.cn/article/8dc0076c.html</id>
    <published>2025-12-11T18:29:20.000Z</published>
    <updated>2025-12-13T16:23:58.692Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ Cloudflare Workers ä»£ç æ•´ä½“ <strong>é€»è¾‘æ¸…æ™°ã€åŠŸèƒ½å®Œæ•´</strong>ï¼Œå®ç°äº†å¯¹ç¬¬ä¸‰æ–¹ M3U8 æµçš„ä»£ç†ã€å¹¿å‘Šè¿‡æ»¤ã€AES-128 å¯†é’¥é‡å†™ã€ç¼“å­˜å’Œ CORS æ”¯æŒï¼Œ<strong>æŠ€æœ¯ä¸Šæ˜¯æœ‰æ•ˆçš„</strong>ã€‚ä½†åœ¨ <strong>Cloudflare çš„å…è´¹&#x2F;ä»˜è´¹ä½¿ç”¨æ”¿ç­–ï¼ˆAcceptable Use Policyï¼‰å’Œè¿è¡Œé™åˆ¶ä¸‹ï¼Œå­˜åœ¨åˆè§„ä¸ç¨³å®šæ€§é£é™©</strong>ã€‚è¯·çœ‹ä¸‹é¢é€é¡¹åˆ†æï¼š</p><span id="more"></span><hr><h2 id="âœ…-ä¸€ã€åŠŸèƒ½æœ‰æ•ˆæ€§ï¼šâœ…-åŸºæœ¬æœ‰æ•ˆ"><a href="#âœ…-ä¸€ã€åŠŸèƒ½æœ‰æ•ˆæ€§ï¼šâœ…-åŸºæœ¬æœ‰æ•ˆ" class="headerlink" title="âœ… ä¸€ã€åŠŸèƒ½æœ‰æ•ˆæ€§ï¼šâœ… åŸºæœ¬æœ‰æ•ˆ"></a>âœ… ä¸€ã€åŠŸèƒ½æœ‰æ•ˆæ€§ï¼šâœ… åŸºæœ¬æœ‰æ•ˆ</h2><table><thead><tr><th>åŠŸèƒ½</th><th>æ˜¯å¦å®ç°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>M3U8 ä»£ç† + <code>.ts</code> é‡å†™</td><td>âœ…</td><td>æ­£ç¡®è§£æç›¸å¯¹è·¯å¾„å¹¶é‡å†™ä¸ºä»£ç†é“¾æ¥</td></tr><tr><td>AES-128 å¯†é’¥ä»£ç†</td><td>âœ…</td><td>å•ç‹¬ <code>/aes128.key</code> è·¯ç”±å¤„ç† key è¯·æ±‚</td></tr><tr><td>å¹¿å‘Šè¡Œè¿‡æ»¤</td><td>âœ…</td><td>ä½¿ç”¨å…³é”®è¯è·³è¿‡å¹¿å‘Šåˆ†ç‰‡</td></tr><tr><td>ç¼“å­˜ï¼ˆCache APIï¼‰</td><td>âœ…</td><td>åˆ©ç”¨ <code>caches.default</code> ç¼“å­˜ m3u8&#x2F;ts&#x2F;key</td></tr><tr><td>CORS æ”¯æŒ</td><td>âœ…</td><td>è®¾ç½®äº† <code>Access-Control-Allow-Origin: *</code></td></tr><tr><td>User-Agent ç™½åå•</td><td>âœ…</td><td>UA ç™½åå•ï¼Œé˜²æ­¢è¢«ç›—ç”¨</td></tr></tbody></table><hr><h2 id="âš ï¸-äºŒã€Cloudflare-Workers-çš„é™åˆ¶ä¸é£é™©"><a href="#âš ï¸-äºŒã€Cloudflare-Workers-çš„é™åˆ¶ä¸é£é™©" class="headerlink" title="âš ï¸ äºŒã€Cloudflare Workers çš„é™åˆ¶ä¸é£é™©"></a>âš ï¸ äºŒã€Cloudflare Workers çš„é™åˆ¶ä¸é£é™©</h2><h3 id="1-è¿å-Acceptable-Use-Policyï¼ˆAUPï¼‰ï¼Ÿ"><a href="#1-è¿å-Acceptable-Use-Policyï¼ˆAUPï¼‰ï¼Ÿ" class="headerlink" title="1. è¿å Acceptable Use Policyï¼ˆAUPï¼‰ï¼Ÿ"></a>1. <strong>è¿å Acceptable Use Policyï¼ˆAUPï¼‰ï¼Ÿ</strong></h3><p>Cloudflare æ˜ç¡®ç¦æ­¢å°† Workers ç”¨ä½œï¼š</p><blockquote><p>â€œ<strong>é€šç”¨åå‘ä»£ç†ã€è§†é¢‘&#x2F;éŸ³é¢‘ä¸­ç»§ã€æˆ–ç»•è¿‡å†…å®¹è®¿é—®æ§åˆ¶</strong>â€<br>â€”â€” <a href="https://www.cloudflare.com/website-terms/#acceptable-use-policy">Cloudflare AUP</a></p></blockquote><p>ä½ çš„æœåŠ¡æœ¬è´¨æ˜¯ <strong>â€œç¬¬ä¸‰æ–¹è§†é¢‘æµä»£ç†â€</strong>ï¼Œå±äºé«˜é£é™©åœºæ™¯ï¼š</p><ul><li>å¦‚æœç”¨äº <strong>ç›—æ’­ã€ç»•è¿‡ DRMã€å¤§è§„æ¨¡åˆ†å‘ä»–äººå†…å®¹</strong> â†’ å¯èƒ½è¢«å°ç¦ï¼›</li><li>å¦‚æœç”¨äº <strong>ä¸ªäººå­¦ä¹ ã€åˆæ³•æˆæƒå†…å®¹ã€å°æµé‡æµ‹è¯•</strong> â†’ é€šå¸¸ä¸ä¼šè¢«ä¸»åŠ¨å¹²é¢„ã€‚</li></ul><p>âœ… <strong>é™ä½é£é™©å»ºè®®</strong>ï¼š</p><ul><li>ä¸è¦å…¬å¼€åˆ†äº«ä»£ç†é“¾æ¥ï¼›</li><li>ä»…ç”¨äºä½ æœ‰ç‰ˆæƒæˆ–æˆæƒçš„å†…å®¹ï¼›</li><li>é¿å…é«˜é¢‘ã€å¤§æµé‡è¯·æ±‚ï¼ˆå¦‚ç›´æ’­è½¬æ’­ï¼‰ã€‚</li></ul><hr><h3 id="2-è¿è¡Œæ—¶èµ„æºé™åˆ¶ï¼ˆå…³é”®ï¼ï¼‰"><a href="#2-è¿è¡Œæ—¶èµ„æºé™åˆ¶ï¼ˆå…³é”®ï¼ï¼‰" class="headerlink" title="2. è¿è¡Œæ—¶èµ„æºé™åˆ¶ï¼ˆå…³é”®ï¼ï¼‰"></a>2. <strong>è¿è¡Œæ—¶èµ„æºé™åˆ¶ï¼ˆå…³é”®ï¼ï¼‰</strong></h3><table><thead><tr><th>é™åˆ¶é¡¹</th><th>å…è´¹è®¡åˆ’</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>CPU æ—¶é—´</strong></td><td>â‰¤ 10msï¼ˆæ¯è¯·æ±‚ï¼‰</td><td>å¤„ç†å¤§ M3U8 æˆ–å¤æ‚æ­£åˆ™å¯èƒ½è¶…é™</td></tr><tr><td><strong>å†…å­˜</strong></td><td>â‰¤ 128MB</td><td>ä¸€èˆ¬å¤Ÿç”¨</td></tr><tr><td><strong>å“åº”ä½“å¤§å°</strong></td><td>â‰¤ 100MBï¼ˆå†™å…¥ç¼“å­˜ï¼‰</td><td><code>.ts</code> æ–‡ä»¶è‹¥ &gt;100MB æ— æ³•ç¼“å­˜</td></tr><tr><td><strong>æ¯æ—¥è¯·æ±‚æ¬¡æ•°</strong></td><td>10 ä¸‡æ¬¡ï¼ˆå…è´¹ï¼‰</td><td>å¯¹è§†é¢‘æµæ¥è¯´å¾ˆå®¹æ˜“è€—å°½ï¼ˆä¸€ä¸ªç”¨æˆ·çœ‹ 10 åˆ†é’Ÿ â‰ˆ 150 ä¸ª <code>.ts</code> è¯·æ±‚ï¼‰</td></tr><tr><td><strong>å¸¦å®½å‡ºå£</strong></td><td>å…è´¹ä½†è®¡å…¥ç”¨é‡</td><td>è¶…å‡ºé…é¢ä¼šé™é€Ÿæˆ–æ”¶è´¹ï¼ˆPro èµ·æ­¥ $5&#x2F;10M è¯·æ±‚ï¼‰</td></tr></tbody></table><blockquote><p>ğŸ“Œ <strong>ç‰¹åˆ«æ³¨æ„</strong>ï¼š<br>æ¯ä¸ª <code>.ts</code> ç‰‡æ®µéƒ½ä¼šè§¦å‘ä¸€æ¬¡ Worker æ‰§è¡Œ + ä¸€æ¬¡ç¼“å­˜å†™å…¥ã€‚<br>ä¸€ä¸ª 10 åˆ†é’Ÿè§†é¢‘ï¼ˆ4ç§’&#x2F;ç‰‡ï¼‰â‰ˆ <strong>150 æ¬¡è¯·æ±‚</strong> â†’ 1000 ä¸ªç”¨æˆ·è§‚çœ‹ &#x3D; <strong>15 ä¸‡æ¬¡è¯·æ±‚</strong> â†’ <strong>è¶…å‡ºå…è´¹é¢åº¦</strong>ã€‚</p></blockquote><hr><h3 id="3-ç¼“å­˜è¡Œä¸ºé—®é¢˜"><a href="#3-ç¼“å­˜è¡Œä¸ºé—®é¢˜" class="headerlink" title="3. ç¼“å­˜è¡Œä¸ºé—®é¢˜"></a>3. <strong>ç¼“å­˜è¡Œä¸ºé—®é¢˜</strong></h3><ul><li><code>caches.default</code> æ˜¯ <strong>åˆ†å¸ƒå¼ç¼“å­˜</strong>ï¼Œä½† <strong>ä¸ä¿è¯æŒä¹…æ€§</strong>ï¼ˆå¯èƒ½éšæ—¶å¤±æ•ˆï¼‰ï¼›</li><li>ä½ è®¾ç½® <code>CACHE_TTL = 7å¤©</code>ï¼Œä½† Cloudflare å®é™…ç¼“å­˜æ—¶é—´å¯èƒ½æ›´çŸ­ï¼ˆå°¤å…¶ä½é¢‘è®¿é—®å†…å®¹ï¼‰ï¼›</li><li><strong>é¦–æ¬¡æ’­æ”¾ä»éœ€å›æº</strong>ï¼Œç”¨æˆ·ä½“éªŒå–å†³äºæºç«™é€Ÿåº¦ã€‚</li></ul><hr><h3 id="4-å®‰å…¨ä¸æ»¥ç”¨é£é™©"><a href="#4-å®‰å…¨ä¸æ»¥ç”¨é£é™©" class="headerlink" title="4. å®‰å…¨ä¸æ»¥ç”¨é£é™©"></a>4. <strong>å®‰å…¨ä¸æ»¥ç”¨é£é™©</strong></h3><p>âœ… <strong>å¼ºçƒˆå»ºè®®</strong>ï¼š</p><ul><li>å¯ç”¨ UA æˆ– Token éªŒè¯ï¼›</li><li>æˆ–é™åˆ¶ Refererï¼ˆå¦‚åªå…è®¸ä½ çš„åŸŸåï¼‰ï¼›</li><li>æˆ–æ·»åŠ  IP é™æµï¼ˆéœ€ç”¨ Durable Objects æˆ–å¤–éƒ¨æœåŠ¡ï¼‰ã€‚</li></ul><hr><h2 id="âœ…-ä¸‰ã€ç»“è®º"><a href="#âœ…-ä¸‰ã€ç»“è®º" class="headerlink" title="âœ… ä¸‰ã€ç»“è®º"></a>âœ… ä¸‰ã€ç»“è®º</h2><table><thead><tr><th>é¡¹ç›®</th><th>è¯„ä¼°</th></tr></thead><tbody><tr><td><strong>èƒ½å¦åœ¨ Cloudflare å…è´¹è¿è¡Œï¼Ÿ</strong></td><td>âš ï¸ çŸ­æœŸ&#x2F;å°æµé‡å¯ä»¥ï¼Œé•¿æœŸ&#x2F;é«˜å¹¶å‘ä¸è¡Œ</td></tr><tr><td><strong>æ˜¯å¦è¿å Cloudflare è§„åˆ™ï¼Ÿ</strong></td><td>âš ï¸ <strong>æœ‰é£é™©</strong>ï¼Œå–å†³äºç”¨é€”ï¼ˆä¸ªäºº vs å…¬å¼€ç›—æ’­ï¼‰</td></tr><tr><td><strong>æ¨èç”¨äºç”Ÿäº§å—ï¼Ÿ</strong></td><td>âŒ ä¸æ¨èç”¨äºå…¬å¼€è§†é¢‘å¹³å°ï¼›âœ… å¯ç”¨äºå†…éƒ¨å·¥å…·æˆ–æˆæƒå†…å®¹</td></tr></tbody></table><hr><h2 id="ğŸ”’-æœ€ç»ˆå»ºè®®"><a href="#ğŸ”’-æœ€ç»ˆå»ºè®®" class="headerlink" title="ğŸ”’ æœ€ç»ˆå»ºè®®"></a>ğŸ”’ æœ€ç»ˆå»ºè®®</h2><blockquote><p><strong>å¦‚æœä½ æ‹¥æœ‰è§†é¢‘å†…å®¹çš„åˆæ³•æƒåˆ©</strong>ï¼ˆå¦‚è‡ªå·±ç”Ÿæˆçš„ HLS æµï¼‰ï¼Œå»ºè®®ï¼š</p><ol><li><strong>ä¸è¦ä»£ç†ç¬¬ä¸‰æ–¹ M3U8</strong>ï¼›</li><li><strong>ç›´æ¥å°† <code>.m3u8</code> + <code>.ts</code> ä¸Šä¼ åˆ° Cloudflare Pages æˆ– R2</strong>ï¼›</li><li><strong>äº«å—åŸç”Ÿ CDN åŠ é€Ÿ + æ— åˆè§„é£é™©</strong>ã€‚</li></ol></blockquote><blockquote><p>å¦‚æœå¿…é¡»ä»£ç†ï¼ˆå¦‚è°ƒè¯•ç¬¬ä¸‰æ–¹æµï¼‰ï¼Œè¯·ï¼š</p><ul><li>é™åˆ¶ UA &#x2F; Tokenï¼›</li><li>ä¸å…¬å¼€ URLï¼›</li><li>ç›‘æ§ç”¨é‡ï¼Œé¿å…è¶…é¢ã€‚</li></ul></blockquote><h2 id="âœ…-å®Œæ•´ä»£ç "><a href="#âœ…-å®Œæ•´ä»£ç " class="headerlink" title="âœ… å®Œæ•´ä»£ç "></a>âœ… å®Œæ•´ä»£ç </h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ===== é…ç½®åŒº =====</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">CACHE_TTL_M3U8</span> = <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span> * <span class="number">7</span>; <span class="comment">// 7å¤©</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">CACHE_TTL_TS</span> = <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span> * <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// User-Agent ç™½åå•ï¼ˆæ”¯æŒé€šé…ç¬¦ *ï¼‰</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">ALLOWED_USER_AGENTS</span> = [</span><br><span class="line">  <span class="string">&#x27;*ä½ çš„UA*&#x27;</span>,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// é¢„ç¼–è¯‘æ­£åˆ™ï¼Œé¿å…æ¯æ¬¡è¯·æ±‚é‡å¤ç”Ÿæˆ</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">UA_RULES</span> = <span class="variable constant_">ALLOWED_USER_AGENTS</span>.<span class="title function_">map</span>(<span class="function"><span class="params">rule</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> rule === <span class="string">&#x27;string&#x27;</span> &amp;&amp; rule.<span class="title function_">includes</span>(<span class="string">&#x27;*&#x27;</span>)) &#123;</span><br><span class="line">    <span class="keyword">const</span> pattern = <span class="string">&#x27;^&#x27;</span> + rule.<span class="title function_">replace</span>(<span class="regexp">/\*/g</span>, <span class="string">&#x27;.*?&#x27;</span>) + <span class="string">&#x27;$&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RegExp</span>(pattern);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> rule; <span class="comment">// å­—é¢é‡å­—ç¬¦ä¸²</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isValidUserAgent</span>(<span class="params">ua</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!ua || !<span class="variable constant_">ALLOWED_USER_AGENTS</span>.<span class="property">length</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> rule <span class="keyword">of</span> <span class="variable constant_">UA_RULES</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (rule <span class="keyword">instanceof</span> <span class="title class_">RegExp</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (rule.<span class="title function_">test</span>(ua)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ua.<span class="title function_">includes</span>(rule)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¹¿å‘Šå…³é”®è¯é›†åˆï¼ˆSet æŸ¥æ‰¾ O(1)ï¼‰</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">AD_KEYWORDS</span> = <span class="keyword">new</span> <span class="title class_">Set</span>([</span><br><span class="line">  <span class="string">&#x27;å¹¿å‘Š&#x27;</span>, <span class="string">&#x27;%E5%B9%BF%E5%91%8A&#x27;</span>, <span class="string">&#x27;/advertisement&#x27;</span>, <span class="string">&#x27;/ad-creative&#x27;</span>, <span class="string">&#x27;/adjump/&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;/ad/&#x27;</span>, <span class="string">&#x27;/ad-end&#x27;</span>, <span class="string">&#x27;ad_break_end&#x27;</span>, <span class="string">&#x27;/advert/&#x27;</span>, <span class="string">&#x27;/adserver/&#x27;</span>, <span class="string">&#x27;ad-break&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;/commercial/&#x27;</span>, <span class="string">&#x27;/adsegment/&#x27;</span>, <span class="string">&#x27;/ad_&#x27;</span>, <span class="string">&#x27;/ad-&#x27;</span>, <span class="string">&#x27;creative&#x27;</span>, <span class="string">&#x27;preroll&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;midroll&#x27;</span>, <span class="string">&#x27;postroll&#x27;</span></span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isAdLine</span>(<span class="params">line</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!line) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> kw <span class="keyword">of</span> <span class="variable constant_">AD_KEYWORDS</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (line.<span class="title function_">includes</span>(kw)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="regexp">/ad[-_]\d+\.ts/i</span>.<span class="title function_">test</span>(line);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  - é‡å†™ M3U8 å†…å®¹ï¼ˆå•æ¬¡éå† + å‡å°‘å­—ç¬¦ä¸²æ‹¼æ¥ï¼‰</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">rewriteM3U8</span>(<span class="params">content, baseOrigin, proxyOrigin</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> lines = content.<span class="title function_">split</span>(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">  <span class="keyword">let</span> encryptionInfo = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">let</span> hasKeyLine = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç¬¬ä¸€éï¼šæå– #EXT-X-KEYï¼ˆä»…ç¬¬ä¸€ä¸ªï¼‰</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; lines.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> line = lines[i].<span class="title function_">trim</span>();</span><br><span class="line">    <span class="keyword">if</span> (line.<span class="title function_">startsWith</span>(<span class="string">&#x27;#EXT-X-KEY:&#x27;</span>)) &#123;</span><br><span class="line">      <span class="keyword">const</span> attrs = &#123;&#125;;</span><br><span class="line">      <span class="keyword">const</span> parts = line.<span class="title function_">substring</span>(<span class="number">11</span>).<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">const</span> part <span class="keyword">of</span> parts) &#123;</span><br><span class="line">        <span class="keyword">const</span> [key, value] = part.<span class="title function_">split</span>(<span class="string">&#x27;=&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (key &amp;&amp; value !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">          attrs[key.<span class="title function_">trim</span>()] = value.<span class="title function_">trim</span>().<span class="title function_">replace</span>(<span class="regexp">/^[&quot;&#x27;]|[&quot;&#x27;]$/g</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (attrs.<span class="property">METHOD</span> === <span class="string">&#x27;AES-128&#x27;</span> &amp;&amp; attrs.<span class="property">URI</span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> absoluteKeyUri = <span class="keyword">new</span> <span class="title function_">URL</span>(attrs.<span class="property">URI</span>, baseOrigin).<span class="property">href</span>;</span><br><span class="line">          encryptionInfo = &#123;</span><br><span class="line">            <span class="attr">method</span>: attrs.<span class="property">METHOD</span>,</span><br><span class="line">            <span class="attr">uri</span>: absoluteKeyUri,</span><br><span class="line">            <span class="attr">iv</span>: attrs.<span class="property">IV</span> || <span class="literal">null</span></span><br><span class="line">          &#125;;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;Failed to resolve key URI:&#x27;</span>, attrs.<span class="property">URI</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      hasKeyLine = <span class="literal">true</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ„å»ºæ–° KEY è¡Œï¼ˆå¦‚æœéœ€è¦ï¼‰</span></span><br><span class="line">  <span class="keyword">let</span> newKeyLine = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="keyword">if</span> (encryptionInfo) &#123;</span><br><span class="line">    <span class="keyword">let</span> uriParam = <span class="string">`<span class="subst">$&#123;proxyOrigin&#125;</span>/aes128.key?url=<span class="subst">$&#123;<span class="built_in">encodeURIComponent</span>(encryptionInfo.uri)&#125;</span>`</span>;</span><br><span class="line">    newKeyLine = <span class="string">`#EXT-X-KEY:METHOD=<span class="subst">$&#123;encryptionInfo.method&#125;</span>,URI=&quot;<span class="subst">$&#123;uriParam&#125;</span>&quot;`</span>;</span><br><span class="line">    <span class="keyword">if</span> (encryptionInfo.<span class="property">iv</span>) &#123;</span><br><span class="line">      newKeyLine += <span class="string">`,IV=<span class="subst">$&#123;encryptionInfo.iv&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç¬¬äºŒéï¼šæ„å»ºè¾“å‡ºï¼ˆè·³è¿‡å¹¿å‘Šè¡Œï¼Œé‡å†™åª’ä½“è¡Œï¼‰</span></span><br><span class="line">  <span class="keyword">const</span> output = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; lines.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> originalLine = lines[i];</span><br><span class="line">    <span class="keyword">const</span> trimmed = originalLine.<span class="title function_">trim</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·³è¿‡ç©ºè¡Œ</span></span><br><span class="line">    <span class="keyword">if</span> (trimmed === <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">      output.<span class="title function_">push</span>(originalLine);</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·³è¿‡å¹¿å‘Šç›¸å…³è¡Œ</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">isAdLine</span>(trimmed)) &#123;</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ›¿æ¢ KEY è¡Œ</span></span><br><span class="line">    <span class="keyword">if</span> (hasKeyLine &amp;&amp; trimmed.<span class="title function_">startsWith</span>(<span class="string">&#x27;#EXT-X-KEY:&#x27;</span>)) &#123;</span><br><span class="line">      output.<span class="title function_">push</span>(newKeyLine);</span><br><span class="line">      hasKeyLine = <span class="literal">false</span>; <span class="comment">// åªæ›¿æ¢ä¸€æ¬¡</span></span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡å†™ .ts / .m3u8 åª’ä½“è¡Œï¼ˆéæ³¨é‡Šè¡Œä¸”ä»¥è¿™äº›ç»“å°¾ï¼‰</span></span><br><span class="line">    <span class="keyword">if</span> (!trimmed.<span class="title function_">startsWith</span>(<span class="string">&#x27;#&#x27;</span>) &amp;&amp; <span class="regexp">/\.(ts|m3u8)$/i</span>.<span class="title function_">test</span>(trimmed)) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> absoluteUrl = trimmed.<span class="title function_">startsWith</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line">          ? trimmed</span><br><span class="line">          : <span class="keyword">new</span> <span class="title function_">URL</span>(trimmed, baseOrigin).<span class="property">href</span>;</span><br><span class="line">        <span class="keyword">const</span> proxied = <span class="string">`<span class="subst">$&#123;proxyOrigin&#125;</span>/?url=<span class="subst">$&#123;<span class="built_in">encodeURIComponent</span>(absoluteUrl)&#125;</span>`</span>;</span><br><span class="line">        output.<span class="title function_">push</span>(proxied);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;URL resolve error:&#x27;</span>, trimmed, e);</span><br><span class="line">        output.<span class="title function_">push</span>(originalLine); <span class="comment">// fallback</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      output.<span class="title function_">push</span>(originalLine);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> output.<span class="title function_">join</span>(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  - å¤„ç† /aes128.key è¯·æ±‚</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">handleAES128Key</span>(<span class="params">request, ctx</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> url = <span class="keyword">new</span> <span class="title function_">URL</span>(request.<span class="property">url</span>);</span><br><span class="line">  <span class="keyword">const</span> keyUriParam = url.<span class="property">searchParams</span>.<span class="title function_">get</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line">  <span class="keyword">if</span> (!keyUriParam) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&#x27;Missing key URI parameter&#x27;</span>, &#123; <span class="attr">status</span>: <span class="number">400</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> decodedKeyUri;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    decodedKeyUri = <span class="built_in">decodeURIComponent</span>(keyUriParam);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&#x27;Invalid key URI encoding&#x27;</span>, &#123; <span class="attr">status</span>: <span class="number">400</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> cache = caches.<span class="property">default</span>;</span><br><span class="line">  <span class="keyword">let</span> response = <span class="keyword">await</span> cache.<span class="title function_">match</span>(decodedKeyUri);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!response) &#123;</span><br><span class="line">    <span class="keyword">const</span> target = <span class="keyword">new</span> <span class="title function_">URL</span>(decodedKeyUri);</span><br><span class="line">    response = <span class="keyword">await</span> <span class="title function_">fetch</span>(decodedKeyUri, &#123;</span><br><span class="line">      <span class="attr">headers</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (compatible; M3U8-Proxy/1.0)&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Referer&#x27;</span>: target.<span class="property">origin</span> + <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (response.<span class="property">ok</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> cloned = response.<span class="title function_">clone</span>();</span><br><span class="line">      ctx.<span class="title function_">waitUntil</span>(cache.<span class="title function_">put</span>(decodedKeyUri, cloned));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> newHeaders = <span class="keyword">new</span> <span class="title class_">Headers</span>(response.<span class="property">headers</span>);</span><br><span class="line">  newHeaders.<span class="title function_">set</span>(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;application/octet-stream&#x27;</span>);</span><br><span class="line">  newHeaders.<span class="title function_">set</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>);</span><br><span class="line">  newHeaders.<span class="title function_">set</span>(<span class="string">&#x27;Cache-Control&#x27;</span>, <span class="string">&#x27;public, max-age=86400&#x27;</span>); <span class="comment">// 1å¤©</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(response.<span class="property">body</span>, &#123;</span><br><span class="line">    <span class="attr">status</span>: response.<span class="property">status</span>,</span><br><span class="line">    <span class="attr">headers</span>: newHeaders,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  - ä¸»è¯·æ±‚å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">handleRequest</span>(<span class="params">request, ctx</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> userAgent = request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;User-Agent&#x27;</span>) || <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="title function_">isValidUserAgent</span>(userAgent)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&#x27;Forbidden&#x27;</span>, &#123; <span class="attr">status</span>: <span class="number">403</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> corsHeaders = &#123;</span><br><span class="line">    <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>: <span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span>: <span class="string">&#x27;GET, POST, PUT, DELETE, OPTIONS&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span>: <span class="string">&#x27;Content-Type, Authorization, User-Agent&#x27;</span>,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> url = <span class="keyword">new</span> <span class="title function_">URL</span>(request.<span class="property">url</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¤„ç†å¯†é’¥è¯·æ±‚</span></span><br><span class="line">  <span class="keyword">if</span> (url.<span class="property">pathname</span> === <span class="string">&#x27;/aes128.key&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">handleAES128Key</span>(request, ctx);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> paramURL = url.<span class="property">searchParams</span>.<span class="title function_">get</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line">  <span class="keyword">if</span> (!paramURL) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">error</span>: <span class="string">&quot;Missing &#x27;url&#x27; query&quot;</span> &#125;), &#123;</span><br><span class="line">      <span class="attr">status</span>: <span class="number">400</span>,</span><br><span class="line">      <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> targetUrl;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    targetUrl = <span class="built_in">decodeURIComponent</span>(paramURL);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;Invalid URL encoding&#x27;</span> &#125;), &#123;</span><br><span class="line">      <span class="attr">status</span>: <span class="number">400</span>,</span><br><span class="line">      <span class="attr">headers</span>: &#123; ...corsHeaders, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!targetUrl.<span class="title function_">startsWith</span>(<span class="string">&#x27;http://&#x27;</span>) &amp;&amp; !targetUrl.<span class="title function_">startsWith</span>(<span class="string">&#x27;https://&#x27;</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&#x27;URL must start with http:// or https://&#x27;</span>, &#123; <span class="attr">status</span>: <span class="number">400</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> target = <span class="keyword">new</span> <span class="title function_">URL</span>(targetUrl);</span><br><span class="line">  <span class="keyword">const</span> cacheKey = targetUrl; <span class="comment">// ä½¿ç”¨åŸå§‹ URL ä½œä¸ºç¼“å­˜é”®ï¼ˆç®€å•é«˜æ•ˆï¼‰</span></span><br><span class="line">  <span class="keyword">const</span> cache = caches.<span class="property">default</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> response = <span class="keyword">await</span> cache.<span class="title function_">match</span>(cacheKey);</span><br><span class="line">  <span class="keyword">if</span> (response) &#123;</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å‘èµ·æºç«™è¯·æ±‚</span></span><br><span class="line">  <span class="keyword">const</span> originResponse = <span class="keyword">await</span> <span class="title function_">fetch</span>(targetUrl, &#123;</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (compatible; M3U8-Proxy/1.0)&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Referer&#x27;</span>: target.<span class="property">origin</span> + <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!originResponse.<span class="property">ok</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> originResponse;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> contentType = (originResponse.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;content-type&#x27;</span>) || <span class="string">&#x27;&#x27;</span>).<span class="title function_">toLowerCase</span>();</span><br><span class="line">  <span class="keyword">const</span> isM3U8 =</span><br><span class="line">    contentType.<span class="title function_">includes</span>(<span class="string">&#x27;apple.mpegurl&#x27;</span>) ||</span><br><span class="line">    contentType.<span class="title function_">includes</span>(<span class="string">&#x27;x-mpegurl&#x27;</span>) ||</span><br><span class="line">    target.<span class="property">pathname</span>.<span class="title function_">toLowerCase</span>().<span class="title function_">endsWith</span>(<span class="string">&#x27;.m3u8&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> isTS = target.<span class="property">pathname</span>.<span class="title function_">toLowerCase</span>().<span class="title function_">endsWith</span>(<span class="string">&#x27;.ts&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> responseBody;</span><br><span class="line">  <span class="keyword">let</span> finalContentType = contentType;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (isM3U8) &#123;</span><br><span class="line">    <span class="keyword">const</span> bodyText = <span class="keyword">await</span> originResponse.<span class="title function_">text</span>();</span><br><span class="line">    responseBody = <span class="title function_">rewriteM3U8</span>(bodyText, target.<span class="property">origin</span>, url.<span class="property">origin</span>);</span><br><span class="line">    finalContentType = <span class="string">&#x27;application/vnd.apple.mpegurl&#x27;</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    responseBody = originResponse.<span class="property">body</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> newResponse = <span class="keyword">new</span> <span class="title class_">Response</span>(responseBody, &#123;</span><br><span class="line">    <span class="attr">status</span>: originResponse.<span class="property">status</span>,</span><br><span class="line">    <span class="attr">headers</span>: <span class="keyword">new</span> <span class="title class_">Headers</span>(originResponse.<span class="property">headers</span>),</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¼ºåˆ¶è®¾ç½®å…³é”®å¤´</span></span><br><span class="line">  newResponse.<span class="property">headers</span>.<span class="title function_">set</span>(<span class="string">&#x27;Content-Type&#x27;</span>, finalContentType);</span><br><span class="line">  newResponse.<span class="property">headers</span>.<span class="title function_">set</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¾ç½®ç¼“å­˜ç­–ç•¥</span></span><br><span class="line">  <span class="keyword">if</span> (isM3U8) &#123;</span><br><span class="line">    newResponse.<span class="property">headers</span>.<span class="title function_">set</span>(<span class="string">&#x27;Cache-Control&#x27;</span>, <span class="string">`public, max-age=<span class="subst">$&#123;CACHE_TTL_M3U8&#125;</span>`</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isTS || contentType.<span class="title function_">includes</span>(<span class="string">&#x27;video/mp2t&#x27;</span>)) &#123;</span><br><span class="line">    newResponse.<span class="property">headers</span>.<span class="title function_">set</span>(<span class="string">&#x27;Cache-Control&#x27;</span>, <span class="string">`public, max-age=<span class="subst">$&#123;CACHE_TTL_TS&#125;</span>`</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    newResponse.<span class="property">headers</span>.<span class="title function_">set</span>(<span class="string">&#x27;Cache-Control&#x27;</span>, <span class="string">&#x27;public, max-age=3600&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ctx.<span class="title function_">waitUntil</span>(cache.<span class="title function_">put</span>(cacheKey, newResponse.<span class="title function_">clone</span>()));</span><br><span class="line">  <span class="keyword">return</span> newResponse;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¥å£</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">fetch</span>(<span class="params">request, env, ctx</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (request.<span class="property">method</span> === <span class="string">&#x27;OPTIONS&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="literal">null</span>, &#123;</span><br><span class="line">        <span class="attr">headers</span>: &#123;</span><br><span class="line">          <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>: <span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span>: <span class="string">&#x27;GET, POST, OPTIONS&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span>: <span class="string">&#x27;Content-Type, User-Agent&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">handleRequest</span>(request, ctx);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ¬æ–‡ Cloudflare Workers ä»£ç æ•´ä½“ &lt;strong&gt;é€»è¾‘æ¸…æ™°ã€åŠŸèƒ½å®Œæ•´&lt;/strong&gt;ï¼Œå®ç°äº†å¯¹ç¬¬ä¸‰æ–¹ M3U8 æµçš„ä»£ç†ã€å¹¿å‘Šè¿‡æ»¤ã€AES-128 å¯†é’¥é‡å†™ã€ç¼“å­˜å’Œ CORS æ”¯æŒï¼Œ&lt;strong&gt;æŠ€æœ¯ä¸Šæ˜¯æœ‰æ•ˆçš„&lt;/strong&gt;ã€‚ä½†åœ¨ &lt;strong&gt;Cloudflare çš„å…è´¹&amp;#x2F;ä»˜è´¹ä½¿ç”¨æ”¿ç­–ï¼ˆAcceptable Use Policyï¼‰å’Œè¿è¡Œé™åˆ¶ä¸‹ï¼Œå­˜åœ¨åˆè§„ä¸ç¨³å®šæ€§é£é™©&lt;/strong&gt;ã€‚è¯·çœ‹ä¸‹é¢é€é¡¹åˆ†æï¼š&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="FrontEnd" scheme="https://xuehuayu.cn/categories/FrontEnd/"/>
    
    <category term="Cloudflare" scheme="https://xuehuayu.cn/categories/Cloudflare/"/>
    
    <category term="Workers" scheme="https://xuehuayu.cn/categories/Workers/"/>
    
    
    <category term="Cloudflare" scheme="https://xuehuayu.cn/tags/Cloudflare/"/>
    
    <category term="M3U8" scheme="https://xuehuayu.cn/tags/M3U8/"/>
    
    <category term="Cache" scheme="https://xuehuayu.cn/tags/Cache/"/>
    
    <category term="Workers" scheme="https://xuehuayu.cn/tags/Workers/"/>
    
  </entry>
  
  <entry>
    <title>çŸ­ç½‘å€ï¼ˆç½‘å€è½¬æ¢çŸ­é“¾è·³è½¬ï¼‰å®Œæ•´ä»£ç </title>
    <link href="https://xuehuayu.cn/article/288dd7bc.html"/>
    <id>https://xuehuayu.cn/article/288dd7bc.html</id>
    <published>2025-12-08T16:36:33.000Z</published>
    <updated>2025-12-13T16:23:58.690Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡å°†æŒ‡å¯¼ä½ ä½¿ç”¨ <strong>Cloudflare Workers</strong> ä¸ <strong>Workers KV</strong> æ„å»ºä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„çŸ­é“¾æ¥è·³è½¬æœåŠ¡ï¼Œå…·å¤‡ä»¥ä¸‹ç‰¹æ€§ï¼š</p><ul><li>âœ… æ”¯æŒåˆ›å»ºçŸ­é“¾æ¥ï¼ˆå¦‚ <code>/abc123</code> è·³è½¬åˆ°ç›®æ ‡ URLï¼‰</li><li>âœ… è‡ªåŠ¨æ£€æµ‹å¾®ä¿¡æµè§ˆå™¨å¹¶æ‹¦æˆªè®¿é—®</li><li>âœ… åœ¨å¾®ä¿¡ä¸­æ‰“å¼€æ—¶æ˜¾ç¤ºå‹å¥½æç¤ºï¼šâ€œè¯·å¤åˆ¶åˆ°æµè§ˆå™¨æ‰“å¼€â€</li><li>âœ… ä½¿ç”¨ Cloudflare KV å­˜å‚¨æ˜ å°„å…³ç³»ï¼ˆå…è´¹é¢åº¦è¶³å¤Ÿä¸ªäººä½¿ç”¨ï¼‰</li><li>âœ… æä¾› Web ç•Œé¢ç”¨äºç”ŸæˆçŸ­é“¾</li><li>âœ… é˜²æ­¢é‡å¤æäº¤ç›¸åŒé•¿é“¾æ¥ï¼ˆåŸºäº SHA-1 å“ˆå¸Œå»é‡ï¼‰</li><li>âœ… é˜»æ­¢ç”¨æˆ·è¾“å…¥è‡ªèº«çŸ­é“¾æ¥ï¼ˆé¿å…å¾ªç¯ï¼‰</li><li>âœ… å‹å¥½çš„ 404 é¡µé¢ä¸é”™è¯¯æç¤º</li></ul><hr><h2 id="âœ…-ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡å·¥ä½œ"><a href="#âœ…-ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡å·¥ä½œ" class="headerlink" title="âœ… ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡å·¥ä½œ"></a>âœ… ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡å·¥ä½œ</h2><ol><li><strong>æ³¨å†Œ <a href="https://dash.cloudflare.com/">Cloudflare è´¦å·</a></strong></li><li>è¿›å…¥ <strong>Workers &amp; Pages</strong> â†’ åˆ›å»ºä¸€ä¸ªæ–° Workerï¼ˆä¾‹å¦‚å‘½åä¸º <code>url-shortener</code>ï¼‰</li><li>åœ¨è¯¥ Worker çš„ <strong>Settings â†’ Variables â†’ KV Namespace Bindings</strong> ä¸­ï¼š<ul><li>ç‚¹å‡» <strong>Create a namespace</strong></li><li>å‘½åç©ºé—´åç§°å»ºè®®ä¸ºï¼š<code>URL_MAPPINGS</code></li></ul></li><li>å°†å‘½åç©ºé—´ç»‘å®šåˆ° Workerï¼š<ul><li><strong>Variable name</strong>: <code>LINKS</code></li><li><strong>KV namespace</strong>: é€‰æ‹©åˆšåˆ›å»ºçš„ <code>URL_MAPPINGS</code></li></ul></li></ol><blockquote><p>âš ï¸ æ³¨æ„ï¼šä»£ç ä¸­ä½¿ç”¨çš„æ˜¯ <code>LINKS</code> ä½œä¸º KV ç»‘å®šå˜é‡åï¼Œè¯·ç¡®ä¿ä¸€è‡´ã€‚</p></blockquote><hr><h2 id="âœ…-ç¬¬äºŒæ­¥ï¼šéƒ¨ç½²-Worker-ä»£ç "><a href="#âœ…-ç¬¬äºŒæ­¥ï¼šéƒ¨ç½²-Worker-ä»£ç " class="headerlink" title="âœ… ç¬¬äºŒæ­¥ï¼šéƒ¨ç½² Worker ä»£ç "></a>âœ… ç¬¬äºŒæ­¥ï¼šéƒ¨ç½² Worker ä»£ç </h2><p>å°†ä»¥ä¸‹å®Œæ•´ JavaScript ä»£ç ç²˜è´´åˆ°ä½ çš„ Worker ç¼–è¾‘å™¨ä¸­ï¼Œå¹¶ä¿å­˜éƒ¨ç½²ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// === é…ç½®åŒº ===</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">SHORT_CODE_LENGTH</span> = <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// === æ–°å¢ï¼š404å‹å¥½æç¤ºé¡µé¢ ===</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">NOT_FOUND_PAGE</span> = <span class="string">`</span></span><br><span class="line"><span class="string">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">&lt;html lang=&quot;zh-CN&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;head&gt;</span></span><br><span class="line"><span class="string">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span><br><span class="line"><span class="string">  &lt;title&gt;çŸ­é“¾æ¥ä¸å­˜åœ¨&lt;/title&gt;</span></span><br><span class="line"><span class="string">  &lt;style&gt;</span></span><br><span class="line"><span class="string">    body &#123;</span></span><br><span class="line"><span class="string">      background: #121212;</span></span><br><span class="line"><span class="string">      color: #f0f0f0;</span></span><br><span class="line"><span class="string">      font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;</span></span><br><span class="line"><span class="string">      display: flex;</span></span><br><span class="line"><span class="string">      justify-content: center;</span></span><br><span class="line"><span class="string">      align-items: center;</span></span><br><span class="line"><span class="string">      height: 100vh;</span></span><br><span class="line"><span class="string">      margin: 0;</span></span><br><span class="line"><span class="string">      padding: 20px;</span></span><br><span class="line"><span class="string">      overflow: hidden;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    .container &#123;</span></span><br><span class="line"><span class="string">      background: #252526;</span></span><br><span class="line"><span class="string">      border-radius: 12px;</span></span><br><span class="line"><span class="string">      padding: 30px;</span></span><br><span class="line"><span class="string">      max-width: 500px;</span></span><br><span class="line"><span class="string">      width: 100%;</span></span><br><span class="line"><span class="string">      box-shadow: 0 4px 20px rgba(0,0,0,0.5);</span></span><br><span class="line"><span class="string">      text-align: center;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    .error-icon &#123;</span></span><br><span class="line"><span class="string">      font-size: 48px;</span></span><br><span class="line"><span class="string">      margin-bottom: 15px;</span></span><br><span class="line"><span class="string">      color: #f44336;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    h1 &#123;</span></span><br><span class="line"><span class="string">      color: #fff;</span></span><br><span class="line"><span class="string">      margin-bottom: 20px;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    p &#123;</span></span><br><span class="line"><span class="string">      margin-bottom: 25px;</span></span><br><span class="line"><span class="string">      color: #e0e0e0;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    .btn &#123;</span></span><br><span class="line"><span class="string">      background: #0078d4;</span></span><br><span class="line"><span class="string">      color: white;</span></span><br><span class="line"><span class="string">      border: none;</span></span><br><span class="line"><span class="string">      border-radius: 8px;</span></span><br><span class="line"><span class="string">      padding: 12px 24px;</span></span><br><span class="line"><span class="string">      font-size: 16px;</span></span><br><span class="line"><span class="string">      cursor: pointer;</span></span><br><span class="line"><span class="string">      transition: background 0.2s;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    .btn:hover &#123;</span></span><br><span class="line"><span class="string">      background: #0066b3;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &lt;/style&gt;</span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">  &lt;div class=&quot;container&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;div class=&quot;error-icon&quot;&gt;âŒ&lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;h1&gt;çŸ­é“¾æ¥ä¸å­˜åœ¨&lt;/h1&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;æ‚¨è®¿é—®çš„çŸ­é“¾æ¥å·²å¤±æ•ˆæˆ–ä¸å­˜åœ¨&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;button class=&quot;btn&quot; onclick=&quot;window.location.href=&#x27;/&#x27;&quot;&gt;è¿”å›ä¸»é¡µ&lt;/button&gt;</span></span><br><span class="line"><span class="string">  &lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">WECHAT_BLOCK_PAGE</span> = <span class="string">`</span></span><br><span class="line"><span class="string">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">&lt;html lang=&quot;zh-CN&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;head&gt;</span></span><br><span class="line"><span class="string">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span><br><span class="line"><span class="string">  &lt;title&gt;æç¤º&lt;/title&gt;</span></span><br><span class="line"><span class="string">  &lt;style&gt;</span></span><br><span class="line"><span class="string">    body &#123;</span></span><br><span class="line"><span class="string">      background: #121212;</span></span><br><span class="line"><span class="string">      color: #f0f0f0;</span></span><br><span class="line"><span class="string">      font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;</span></span><br><span class="line"><span class="string">      margin: 0;</span></span><br><span class="line"><span class="string">      padding: 0;</span></span><br><span class="line"><span class="string">      display: flex;</span></span><br><span class="line"><span class="string">      justify-content: center;</span></span><br><span class="line"><span class="string">      align-items: center;</span></span><br><span class="line"><span class="string">      min-height: 100vh;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    .card &#123;</span></span><br><span class="line"><span class="string">      background: #252526;</span></span><br><span class="line"><span class="string">      border-radius: 12px;</span></span><br><span class="line"><span class="string">      padding: 30px;</span></span><br><span class="line"><span class="string">      width: 90%;</span></span><br><span class="line"><span class="string">      max-width: 400px;</span></span><br><span class="line"><span class="string">      text-align: center;</span></span><br><span class="line"><span class="string">      box-shadow: 0 4px 20px rgba(0,0,0,0.5);</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    h2 &#123;</span></span><br><span class="line"><span class="string">      margin: 0 0 20px;</span></span><br><span class="line"><span class="string">      font-size: 20px;</span></span><br><span class="line"><span class="string">      color: #ff6b6b;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    p &#123;</span></span><br><span class="line"><span class="string">      margin: 8px 0;</span></span><br><span class="line"><span class="string">      line-height: 1.6;</span></span><br><span class="line"><span class="string">      font-size: 16px;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    .highlight &#123;</span></span><br><span class="line"><span class="string">      color: #4da6ff;</span></span><br><span class="line"><span class="string">      font-weight: bold;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &lt;/style&gt;</span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">  &lt;div class=&quot;card&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;h2&gt;âš ï¸æ— æ³•åœ¨å½“å‰åº”ç”¨ä¸­æ‰“å¼€&lt;/h2&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;ç‚¹å‡»å³ä¸Šè§’èœå•&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;é€‰æ‹© &lt;span class=&quot;highlight&quot;&gt;â€œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€â€&lt;/span&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">  &lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// === å·¥å…·å‡½æ•° ===</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isBannedUA</span>(<span class="params">ua</span>) &#123;</span><br><span class="line">  ua = ua.<span class="title function_">toLowerCase</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="regexp">/micromessenger/i</span>.<span class="title function_">test</span>(ua) || <span class="regexp">/weibo/</span>.<span class="title function_">test</span>(ua) || <span class="regexp">/qq\//</span>.<span class="title function_">test</span>(ua);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">sha1</span>(<span class="params">str</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> encoder = <span class="keyword">new</span> <span class="title class_">TextEncoder</span>();</span><br><span class="line">  <span class="keyword">const</span> data = encoder.<span class="title function_">encode</span>(str);</span><br><span class="line">  <span class="keyword">const</span> hashBuffer = <span class="keyword">await</span> crypto.<span class="property">subtle</span>.<span class="title function_">digest</span>(<span class="string">&#x27;SHA-1&#x27;</span>, data);</span><br><span class="line">  <span class="keyword">const</span> hashArray = <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="keyword">new</span> <span class="title class_">Uint8Array</span>(hashBuffer));</span><br><span class="line">  <span class="keyword">return</span> hashArray.<span class="title function_">map</span>(<span class="function"><span class="params">b</span> =&gt;</span> b.<span class="title function_">toString</span>(<span class="number">16</span>).<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)).<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">generateShortCode</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> chars = <span class="string">&#x27;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&#x27;</span>;</span><br><span class="line">  <span class="keyword">let</span> result = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="variable constant_">SHORT_CODE_LENGTH</span>; i++) &#123;</span><br><span class="line">    result += chars.<span class="title function_">charAt</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * chars.<span class="property">length</span>));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// === ä¸»é¡µ HTMLï¼ˆå«è¡¨å•ï¼‰===</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">homePage</span> = (<span class="params"></span>) =&gt; <span class="string">`</span></span><br><span class="line"><span class="string">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">&lt;html lang=&quot;zh-CN&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;head&gt;</span></span><br><span class="line"><span class="string">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class="line"><span class="string">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span><br><span class="line"><span class="string">  &lt;title&gt;çŸ­é“¾æ¥ç”Ÿæˆå™¨&lt;/title&gt;</span></span><br><span class="line"><span class="string">  &lt;style&gt;</span></span><br><span class="line"><span class="string">    - &#123; scrollbar-width: thin; scrollbar-color: #bdc3c7 #ecf0f1; &#125;</span></span><br><span class="line"><span class="string">    body &#123;</span></span><br><span class="line"><span class="string">      background: #121212;</span></span><br><span class="line"><span class="string">      color: #f0f0f0;</span></span><br><span class="line"><span class="string">      font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;</span></span><br><span class="line"><span class="string">      margin: 0; padding: 150px 0 0 0;</span></span><br><span class="line"><span class="string">      display: flex; flex-direction: column; align-items: center;</span></span><br><span class="line"><span class="string">      min-height: 100vh; position: relative; overflow: hidden;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    body::before &#123;</span></span><br><span class="line"><span class="string">      content: &quot;&quot;; position: fixed; left: 0; top: 0; z-index: 0;</span></span><br><span class="line"><span class="string">      width: 100%; height: 100%;</span></span><br><span class="line"><span class="string">      background: url(https://www.loliapi.com/acg/pe/) #fff;</span></span><br><span class="line"><span class="string">      background-position: right center;</span></span><br><span class="line"><span class="string">      background-size: auto 100%;</span></span><br><span class="line"><span class="string">      background-attachment: fixed;</span></span><br><span class="line"><span class="string">      opacity: 0.5;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    .container &#123;</span></span><br><span class="line"><span class="string">      display: flex; flex-direction: column; justify-content: center; align-items: center;</span></span><br><span class="line"><span class="string">      position: relative; z-index: 1; width: 100%;</span></span><br><span class="line"><span class="string">      padding-right: 15px; padding-left: 15px; margin-right: auto; margin-left: auto;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    h1 &#123; font-size: 24px; margin-bottom: 30px; color: #ffffff; &#125;</span></span><br><span class="line"><span class="string">    .card &#123;</span></span><br><span class="line"><span class="string">      background: #252526; border-radius: 12px; padding: 24px;</span></span><br><span class="line"><span class="string">      width: 90%; max-width: 1000px; box-shadow: 0 4px 20px rgba(0,0,0,0.5);</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    input[type=&quot;url&quot;] &#123;</span></span><br><span class="line"><span class="string">      width: 100%; padding: 12px 16px; background: #1e1e1e;</span></span><br><span class="line"><span class="string">      border: 1px solid #333; border-radius: 8px; color: #fff;</span></span><br><span class="line"><span class="string">      font-size: 16px; box-sizing: border-box; outline: none;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    input[type=&quot;url&quot;]:focus &#123; border-color: #4da6ff; &#125;</span></span><br><span class="line"><span class="string">    button &#123;</span></span><br><span class="line"><span class="string">      width: 100%; padding: 12px; background: #0078d4; color: white;</span></span><br><span class="line"><span class="string">      border: none; border-radius: 8px; font-size: 16px; margin-top: 16px;</span></span><br><span class="line"><span class="string">      cursor: pointer; transition: background 0.2s;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    button:hover &#123; background: #0066b3; &#125;</span></span><br><span class="line"><span class="string">    .result &#123;</span></span><br><span class="line"><span class="string">      margin-top: 20px; padding: 14px; background: #1e1e1e;</span></span><br><span class="line"><span class="string">      border-radius: 8px; word-break: break-all; font-size: 15px;</span></span><br><span class="line"><span class="string">      display: flex; flex-direction: column; gap: 10px;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    .result.success &#123; color: #4caf50; &#125;</span></span><br><span class="line"><span class="string">    .result.error &#123; color: #f44336; &#125;</span></span><br><span class="line"><span class="string">    a &#123; color: #4da6ff; text-decoration: none; &#125;</span></span><br><span class="line"><span class="string">    a:hover &#123; text-decoration: underline; &#125;</span></span><br><span class="line"><span class="string">    .copy-btn &#123;</span></span><br><span class="line"><span class="string">      align-self: flex-start; background: #4da6ff; color: #000;</span></span><br><span class="line"><span class="string">      border: none; border-radius: 6px; padding: 6px 12px;</span></span><br><span class="line"><span class="string">      font-size: 14px; cursor: pointer; transition: opacity 0.2s;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    .copy-btn:hover &#123; opacity: 0.9; &#125;</span></span><br><span class="line"><span class="string">    .copy-feedback &#123;</span></span><br><span class="line"><span class="string">      font-size: 14px; color: #4caf50; height: 18px; margin-top: 4px;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    .links &#123;</span></span><br><span class="line"><span class="string">      position: fixed; bottom: 0; z-index: 99999; width: 100%;</span></span><br><span class="line"><span class="string">      margin-bottom: 0; padding: 5px 10px; text-align: center;</span></span><br><span class="line"><span class="string">      background-color: #00000088; color: #fff;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    .links a &#123; color: #eee; text-decoration: none; &#125;</span></span><br><span class="line"><span class="string">    .links a:hover &#123; color: #fff; text-decoration: underline; &#125;</span></span><br><span class="line"><span class="string">  &lt;/style&gt;</span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">  &lt;div class=&quot;container&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;h1&gt;ğŸ”— çŸ­é“¾æ¥ç”Ÿæˆå™¨&lt;/h1&gt;</span></span><br><span class="line"><span class="string">    &lt;div class=&quot;card&quot;&gt;</span></span><br><span class="line"><span class="string">      &lt;form id=&quot;shorten-form&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;input type=&quot;url&quot; id=&quot;url-input&quot; placeholder=&quot;è¯·è¾“å…¥å®Œæ•´ç½‘å€ï¼ˆå¦‚ https://example.comï¼‰&quot; required /&gt;</span></span><br><span class="line"><span class="string">        &lt;button type=&quot;submit&quot;&gt;ç”ŸæˆçŸ­é“¾æ¥&lt;/button&gt;</span></span><br><span class="line"><span class="string">      &lt;/form&gt;</span></span><br><span class="line"><span class="string">      &lt;div class=&quot;result&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;p class=&quot;links&quot;&gt;å‹é“¾ï¼š</span></span><br><span class="line"><span class="string">      &lt;a href=&quot;https://m3u8.xuehuayu.cn&quot; target=&quot;_blank&quot;&gt;M3U8å»å¹¿å‘Šæ’­æ”¾å™¨&lt;/a&gt; |</span></span><br><span class="line"><span class="string">      &lt;a href=&quot;https://chrome.xuehuayu.cn&quot; target=&quot;_blank&quot;&gt;Chromeå‘½ä»¤è¡Œå‚æ•°ç”Ÿæˆå™¨&lt;/a&gt; |</span></span><br><span class="line"><span class="string">      &lt;a href=&quot;https://laonongmin.online&quot; target=&quot;_blank&quot;&gt;å…è´¹å½±è§†APP&lt;/a&gt; |</span></span><br><span class="line"><span class="string">      &lt;a href=&quot;https://chromewebstore.google.com/search/KK%20Player&quot; target=&quot;_blank&quot;&gt;å…è´¹å½±è§†æ‰©å±•&lt;/a&gt; |</span></span><br><span class="line"><span class="string">      &lt;a href=&quot;https://jc.zzmy.dpdns.org/&quot; target=&quot;_blank&quot;&gt;ä¾¿å®œæœºåœº&lt;/a&gt;</span></span><br><span class="line"><span class="string">    &lt;/p&gt;</span></span><br><span class="line"><span class="string">  &lt;/div&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &lt;script&gt;</span></span><br><span class="line"><span class="string">    document.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; &#123;</span></span><br><span class="line"><span class="string">      const form = document.getElementById(&#x27;shorten-form&#x27;);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      // äº‹ä»¶å§”æ‰˜å¤„ç†å¤åˆ¶æŒ‰é’®</span></span><br><span class="line"><span class="string">      document.addEventListener(&#x27;click&#x27;, (e) =&gt; &#123;</span></span><br><span class="line"><span class="string">        if (e.target.classList.contains(&#x27;copy-btn&#x27;)) &#123;</span></span><br><span class="line"><span class="string">          const shortUrl = e.target.closest(&#x27;.result&#x27;).querySelector(&#x27;a&#x27;).href;</span></span><br><span class="line"><span class="string">          copyLink(shortUrl);</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      form.addEventListener(&#x27;submit&#x27;, async (e) =&gt; &#123;</span></span><br><span class="line"><span class="string">        e.preventDefault();</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        // å®¢æˆ·ç«¯å¾®ä¿¡æ£€æµ‹ï¼ˆåŒé‡ä¿é™©ï¼‰</span></span><br><span class="line"><span class="string">        if (/MicroMessenger/i.test(navigator.userAgent)) &#123;</span></span><br><span class="line"><span class="string">          alert(&#x27;è¯·åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œä¸è¦åœ¨å¾®ä¿¡ä¸­ä½¿ç”¨&#x27;);</span></span><br><span class="line"><span class="string">          return;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        const urlInput = document.getElementById(&#x27;url-input&#x27;);</span></span><br><span class="line"><span class="string">        const url = urlInput.value.trim();</span></span><br><span class="line"><span class="string">        if (!url) return alert(&#x27;è¯·è¾“å…¥ç½‘å€&#x27;);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        const button = form.querySelector(&#x27;button&#x27;);</span></span><br><span class="line"><span class="string">        const originalText = button.textContent;</span></span><br><span class="line"><span class="string">        button.textContent = &#x27;ç”Ÿæˆä¸­...&#x27;;</span></span><br><span class="line"><span class="string">        button.disabled = true;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        try &#123;</span></span><br><span class="line"><span class="string">          const response = await fetch(&#x27;/&#x27;, &#123;</span></span><br><span class="line"><span class="string">            method: &#x27;POST&#x27;,</span></span><br><span class="line"><span class="string">            headers: &#123; &#x27;Content-Type&#x27;: &#x27;application/x-www-form-urlencoded&#x27; &#125;,</span></span><br><span class="line"><span class="string">            body: new URLSearchParams(&#123; url &#125;)</span></span><br><span class="line"><span class="string">          &#125;);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">          const result = await response.text();</span></span><br><span class="line"><span class="string">          const resultDiv = document.querySelector(&#x27;.result&#x27;);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">          if (result.startsWith(&#x27;http&#x27;)) &#123;</span></span><br><span class="line"><span class="string">            resultDiv.innerHTML = \`</span></span><br><span class="line"><span class="string">              &lt;div class=&quot;result success&quot;&gt;</span></span><br><span class="line"><span class="string">                âœ… ç”ŸæˆæˆåŠŸï¼&lt;br&gt;</span></span><br><span class="line"><span class="string">                &lt;a href=&quot;\$&#123;result&#125;&quot; target=&quot;_blank&quot;&gt;\$&#123;result&#125;&lt;/a&gt;</span></span><br><span class="line"><span class="string">                &lt;button class=&quot;copy-btn&quot;&gt;ğŸ“‹ å¤åˆ¶é“¾æ¥&lt;/button&gt;</span></span><br><span class="line"><span class="string">                &lt;div class=&quot;copy-feedback&quot; id=&quot;copy-feedback&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">              &lt;/div&gt;</span></span><br><span class="line"><span class="string">            \`;</span></span><br><span class="line"><span class="string">          &#125; else &#123;</span></span><br><span class="line"><span class="string">            resultDiv.innerHTML = \`&lt;div class=&quot;result error&quot;&gt;\$&#123;result&#125;&lt;/div&gt;\`;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">          urlInput.value = &#x27;&#x27;;</span></span><br><span class="line"><span class="string">        &#125; catch (err) &#123;</span></span><br><span class="line"><span class="string">          alert(&#x27;ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•&#x27;);</span></span><br><span class="line"><span class="string">        &#125; finally &#123;</span></span><br><span class="line"><span class="string">          button.textContent = originalText;</span></span><br><span class="line"><span class="string">          button.disabled = false;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      async function copyLink(text) &#123;</span></span><br><span class="line"><span class="string">        try &#123;</span></span><br><span class="line"><span class="string">          await navigator.clipboard.writeText(text);</span></span><br><span class="line"><span class="string">          document.getElementById(&#x27;copy-feedback&#x27;).innerText = &#x27;âœ… å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼&#x27;;</span></span><br><span class="line"><span class="string">        &#125; catch (err) &#123;</span></span><br><span class="line"><span class="string">          const tempInput = document.createElement(&#x27;input&#x27;);</span></span><br><span class="line"><span class="string">          tempInput.value = text;</span></span><br><span class="line"><span class="string">          document.body.appendChild(tempInput);</span></span><br><span class="line"><span class="string">          tempInput.select();</span></span><br><span class="line"><span class="string">          document.execCommand(&#x27;copy&#x27;);</span></span><br><span class="line"><span class="string">          document.body.removeChild(tempInput);</span></span><br><span class="line"><span class="string">          document.getElementById(&#x27;copy-feedback&#x27;).innerText = &#x27;âœ… å·²å¤åˆ¶ï¼ˆè¯·æ‰‹åŠ¨ç²˜è´´ï¼‰&#x27;;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        setTimeout(() =&gt; &#123;</span></span><br><span class="line"><span class="string">          document.getElementById(&#x27;copy-feedback&#x27;).innerText = &#x27;&#x27;;</span></span><br><span class="line"><span class="string">        &#125;, 2000);</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">  &lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// === è¯·æ±‚å¤„ç†å™¨ ===</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">handleRequest</span>(<span class="params">request</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> url = <span class="keyword">new</span> <span class="title function_">URL</span>(request.<span class="property">url</span>);</span><br><span class="line">  <span class="keyword">const</span> path = url.<span class="property">pathname</span>;</span><br><span class="line">  <span class="keyword">const</span> userAgent = request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;User-Agent&#x27;</span>) || <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="keyword">const</span> inWechat = <span class="title function_">isBannedUA</span>(userAgent);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1. å¾®ä¿¡ç¯å¢ƒæ‹¦æˆªï¼ˆæ‰€æœ‰è·¯å¾„ï¼‰</span></span><br><span class="line">  <span class="keyword">if</span> (inWechat) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="variable constant_">WECHAT_BLOCK_PAGE</span>, &#123;</span><br><span class="line">      <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html; charset=utf-8&#x27;</span> &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. å¤„ç†çŸ­é“¾æ¥è·³è½¬ï¼ˆæ ¼å¼ï¼š/xxxxxxï¼‰</span></span><br><span class="line">  <span class="keyword">const</span> shortCodeMatch = path.<span class="title function_">match</span>(<span class="regexp">/^\/([a-zA-Z0-9]&#123;6&#125;)$/</span>);</span><br><span class="line">  <span class="keyword">if</span> (shortCodeMatch) &#123;</span><br><span class="line">    <span class="keyword">const</span> shortCode = shortCodeMatch[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">const</span> targetUrl = <span class="keyword">await</span> <span class="variable constant_">LINKS</span>.<span class="title function_">get</span>(shortCode);</span><br><span class="line">    <span class="keyword">if</span> (targetUrl) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Response</span>.<span class="title function_">redirect</span>(targetUrl, <span class="number">302</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="variable constant_">NOT_FOUND_PAGE</span>, &#123;</span><br><span class="line">        <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html; charset=utf-8&#x27;</span> &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3. GET / â†’ è¿”å›ä¸»é¡µ</span></span><br><span class="line">  <span class="keyword">if</span> (request.<span class="property">method</span> === <span class="string">&#x27;GET&#x27;</span> &amp;&amp; path === <span class="string">&#x27;/&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title function_">homePage</span>(), &#123;</span><br><span class="line">      <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html; charset=utf-8&#x27;</span> &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 4. POST / â†’ ç”ŸæˆçŸ­é“¾</span></span><br><span class="line">  <span class="keyword">if</span> (request.<span class="property">method</span> === <span class="string">&#x27;POST&#x27;</span> &amp;&amp; path === <span class="string">&#x27;/&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> formData = <span class="keyword">await</span> request.<span class="title function_">formData</span>();</span><br><span class="line">      <span class="keyword">let</span> targetUrl = formData.<span class="title function_">get</span>(<span class="string">&#x27;url&#x27;</span>)?.<span class="title function_">trim</span>();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!targetUrl) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;è¯·è¾“å…¥ç½‘å€&#x27;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è¡¥å…¨åè®®</span></span><br><span class="line">      <span class="keyword">if</span> (!<span class="regexp">/^https?:\/\//i</span>.<span class="title function_">test</span>(targetUrl)) &#123;</span><br><span class="line">        targetUrl = <span class="string">&#x27;https://&#x27;</span> + targetUrl;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// è§„èŒƒåŒ–ï¼šç§»é™¤æœ«å°¾æ–œæ </span></span><br><span class="line">      <span class="keyword">const</span> normalizedUrl = targetUrl.<span class="title function_">replace</span>(<span class="regexp">/\/$/</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// é˜²æ­¢è¾“å…¥è‡ªèº«çŸ­é“¾æ¥</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> inputUrl = <span class="keyword">new</span> <span class="title function_">URL</span>(normalizedUrl);</span><br><span class="line">        <span class="keyword">const</span> currentDomain = <span class="keyword">new</span> <span class="title function_">URL</span>(url.<span class="property">origin</span>);</span><br><span class="line">        <span class="keyword">if</span> (</span><br><span class="line">          inputUrl.<span class="property">hostname</span> === currentDomain.<span class="property">hostname</span> &amp;&amp;</span><br><span class="line">          inputUrl.<span class="property">pathname</span>.<span class="property">length</span> === <span class="number">7</span> &amp;&amp;</span><br><span class="line">          <span class="regexp">/^[a-zA-Z0-9]&#123;6&#125;$/</span>.<span class="title function_">test</span>(inputUrl.<span class="property">pathname</span>.<span class="title function_">substring</span>(<span class="number">1</span>))</span><br><span class="line">        ) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&#x27;è¾“å…¥çš„URLæ˜¯çŸ­é“¾æ¥ï¼Œè¯·è¾“å…¥é•¿é“¾æ¥&#x27;</span>, &#123;</span><br><span class="line">            <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain; charset=utf-8&#x27;</span> &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;ç½‘å€æ ¼å¼æ— æ•ˆ&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å“ˆå¸Œå»é‡</span></span><br><span class="line">      <span class="keyword">const</span> urlHash = (<span class="keyword">await</span> <span class="title function_">sha1</span>(normalizedUrl)).<span class="title function_">substring</span>(<span class="number">0</span>, <span class="number">12</span>);</span><br><span class="line">      <span class="keyword">const</span> hashKey = <span class="string">`hash:<span class="subst">$&#123;urlHash&#125;</span>`</span>;</span><br><span class="line">      <span class="keyword">const</span> existingCode = <span class="keyword">await</span> <span class="variable constant_">LINKS</span>.<span class="title function_">get</span>(hashKey);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (existingCode) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">`<span class="subst">$&#123;url.origin&#125;</span>/<span class="subst">$&#123;existingCode&#125;</span>`</span>, &#123;</span><br><span class="line">          <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain; charset=utf-8&#x27;</span> &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// ç”Ÿæˆæ–°çŸ­ç </span></span><br><span class="line">      <span class="keyword">const</span> shortCode = <span class="title function_">generateShortCode</span>();</span><br><span class="line">      <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>([</span><br><span class="line">        <span class="variable constant_">LINKS</span>.<span class="title function_">put</span>(shortCode, normalizedUrl),</span><br><span class="line">        <span class="variable constant_">LINKS</span>.<span class="title function_">put</span>(hashKey, shortCode)</span><br><span class="line">      ]);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">`<span class="subst">$&#123;url.origin&#125;</span>/<span class="subst">$&#123;shortCode&#125;</span>`</span>, &#123;</span><br><span class="line">        <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain; charset=utf-8&#x27;</span> &#125;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;çŸ­é“¾ç”Ÿæˆå¤±è´¥:&#x27;</span>, e.<span class="property">message</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">`âŒ <span class="subst">$&#123;e.message&#125;</span>`</span>, &#123;</span><br><span class="line">        <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain; charset=utf-8&#x27;</span> &#125;,</span><br><span class="line">        <span class="attr">status</span>: <span class="number">400</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 5. å…¶ä»–è·¯å¾„ â†’ 404</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="variable constant_">NOT_FOUND_PAGE</span>, &#123;</span><br><span class="line">    <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html; charset=utf-8&#x27;</span> &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// === Cloudflare Workers å…¥å£ ===</span></span><br><span class="line"><span class="title function_">addEventListener</span>(<span class="string">&#x27;fetch&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">  event.<span class="title function_">respondWith</span>(<span class="title function_">handleRequest</span>(event.<span class="property">request</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="âœ…-åŠŸèƒ½è¯´æ˜"><a href="#âœ…-åŠŸèƒ½è¯´æ˜" class="headerlink" title="âœ… åŠŸèƒ½è¯´æ˜"></a>âœ… åŠŸèƒ½è¯´æ˜</h2><table><thead><tr><th>åŠŸèƒ½</th><th>å®ç°æ–¹å¼</th></tr></thead><tbody><tr><td><strong>çŸ­é“¾ç”Ÿæˆ</strong></td><td>POST <code>/</code> æäº¤ <code>url</code> å‚æ•°ï¼Œè¿”å› <code>https://your-worker.example/abc123</code></td></tr><tr><td><strong>è·³è½¬</strong></td><td>è®¿é—® <code>/abc123</code> â†’ 302 é‡å®šå‘åˆ°åŸå§‹ URL</td></tr><tr><td><strong>å¾®ä¿¡æ‹¦æˆª</strong></td><td>æ£€æµ‹ UA ä¸­åŒ…å« <code>MicroMessenger</code>ã€<code>weibo</code>ã€<code>QQ/</code>ï¼Œè¿”å›æç¤ºé¡µ</td></tr><tr><td><strong>é˜²é‡å¤</strong></td><td>å¯¹è§„èŒƒåŒ– URL è®¡ç®— SHA-1 å“ˆå¸Œå‰ 12 ä½ï¼Œå­˜ä¸º <code>hash:xxx</code>ï¼Œä¸‹æ¬¡ç›´æ¥è¿”å›å·²æœ‰çŸ­ç </td></tr><tr><td><strong>é˜²è‡ªç¯</strong></td><td>ç¦æ­¢ç”¨æˆ·æäº¤å½¢å¦‚ <code>https://your-worker.example/xxxxxx</code> çš„çŸ­é“¾æ¥</td></tr><tr><td><strong>404 é¡µé¢</strong></td><td>æ‰€æœ‰æ— æ•ˆè·¯å¾„å‡è¿”å›å‹å¥½æç¤º</td></tr></tbody></table><hr><h2 id="ğŸ›¡ï¸-å®‰å…¨ä¸éšç§è¯´æ˜"><a href="#ğŸ›¡ï¸-å®‰å…¨ä¸éšç§è¯´æ˜" class="headerlink" title="ğŸ›¡ï¸ å®‰å…¨ä¸éšç§è¯´æ˜"></a>ğŸ›¡ï¸ å®‰å…¨ä¸éšç§è¯´æ˜</h2><ul><li>æœ¬æœåŠ¡ <strong>ä¸æ”¶é›†ä»»ä½•ç”¨æˆ·æ•°æ®</strong></li><li>ä¸ä½¿ç”¨ Cookieã€LocalStorageï¼ˆé™¤ä¸´æ—¶å¤åˆ¶å¤–ï¼‰</li><li>æ‰€æœ‰é€»è¾‘è¿è¡Œåœ¨ Cloudflare è¾¹ç¼˜èŠ‚ç‚¹</li><li>KV å­˜å‚¨ä»…åŒ…å«ï¼š<code>çŸ­ç  â†’ é•¿é“¾æ¥</code> å’Œ <code>å“ˆå¸Œ â†’ çŸ­ç </code> æ˜ å°„</li></ul><hr><h2 id="ğŸ”§-åç»­å¯æ‰©å±•æ–¹å‘"><a href="#ğŸ”§-åç»­å¯æ‰©å±•æ–¹å‘" class="headerlink" title="ğŸ”§ åç»­å¯æ‰©å±•æ–¹å‘"></a>ğŸ”§ åç»­å¯æ‰©å±•æ–¹å‘</h2><ul><li>æ·»åŠ  API Key éªŒè¯ï¼ˆé˜²æ­¢æ»¥ç”¨ï¼‰</li><li>æ”¯æŒè‡ªå®šä¹‰çŸ­ç ï¼ˆå¦‚ <code>/github</code>ï¼‰</li><li>æ·»åŠ ç‚¹å‡»ç»Ÿè®¡ï¼ˆéœ€é¢å¤– KV æˆ– D1ï¼‰</li><li>é›†æˆå¯†ç ä¿æŠ¤çŸ­é“¾</li><li>æ”¯æŒæ‰¹é‡ç”Ÿæˆ</li></ul><hr><blockquote><p>ğŸ’¡ <strong>æç¤º</strong>ï¼šæ­¤æ–¹æ¡ˆå®Œå…¨å…è´¹ï¼ˆCloudflare Workers å…è´¹è®¡åˆ’æ”¯æŒæ¯æ—¥ 10 ä¸‡æ¬¡è¯·æ±‚ + 1GB KV å­˜å‚¨ï¼‰ï¼Œé€‚åˆä¸ªäººæˆ–å°å›¢é˜Ÿä½¿ç”¨ã€‚</p></blockquote><hr><p>âœ… ç°åœ¨ï¼Œè®¿é—®ä½ çš„ Worker URLï¼ˆå¦‚ <code>https://url-shortener.yourname.workers.dev</code>ï¼‰ï¼Œå³å¯å¼€å§‹ä½¿ç”¨ï¼</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æœ¬æ–‡å°†æŒ‡å¯¼ä½ ä½¿ç”¨ &lt;strong&gt;Cloudflare Workers&lt;/strong&gt; ä¸ &lt;strong&gt;Workers KV&lt;/strong&gt; æ„å»ºä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„çŸ­é“¾æ¥è·³è½¬æœåŠ¡ï¼Œå…·å¤‡ä»¥ä¸‹ç‰¹æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;âœ… æ”¯æŒåˆ›å»ºçŸ­é“¾æ¥ï¼ˆå¦‚ &lt;code&gt;/abc12</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="FrontEnd" scheme="https://xuehuayu.cn/categories/FrontEnd/"/>
    
    <category term="çŸ­ç½‘å€" scheme="https://xuehuayu.cn/categories/%E7%9F%AD%E7%BD%91%E5%9D%80/"/>
    
    
    <category term="Cloudflare" scheme="https://xuehuayu.cn/tags/Cloudflare/"/>
    
    <category term="çŸ­é“¾æ¥" scheme="https://xuehuayu.cn/tags/%E7%9F%AD%E9%93%BE%E6%8E%A5/"/>
    
  </entry>
  
  <entry>
    <title>åŸºäºcloudflare workerså’ŒWorkers KVæ­å»ºä¸€ä¸ªçŸ­ç½‘å€ï¼ˆç½‘å€è½¬æ¢çŸ­é“¾è·³è½¬ï¼‰æœåŠ¡</title>
    <link href="https://xuehuayu.cn/article/c4cb889.html"/>
    <id>https://xuehuayu.cn/article/c4cb889.html</id>
    <published>2025-12-08T16:36:33.000Z</published>
    <updated>2025-12-13T16:23:58.689Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ•™ç¨‹å°†æŒ‡å¯¼æ‚¨ä½¿ç”¨Cloudflare Workerså’ŒWorkers KVæ­å»ºä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„çŸ­ç½‘å€æœåŠ¡ã€‚è¯¥æœåŠ¡æ”¯æŒåˆ›å»ºçŸ­é“¾æ¥ã€è‡ªåŠ¨æ£€æµ‹å¾®ä¿¡æµè§ˆå™¨å¹¶æ˜¾ç¤ºæç¤ºï¼Œä½¿ç”¨KVå­˜å‚¨çŸ­é“¾æ˜ å°„ï¼Œå…è´¹é¢åº¦è¶³å¤Ÿä¸ªäººä½¿ç”¨ã€‚</p><span id="more"></span><h2 id="åŠŸèƒ½ç‰¹ç‚¹"><a href="#åŠŸèƒ½ç‰¹ç‚¹" class="headerlink" title="åŠŸèƒ½ç‰¹ç‚¹"></a>åŠŸèƒ½ç‰¹ç‚¹</h2><ul><li>âœ… æ”¯æŒåˆ›å»ºçŸ­é“¾æ¥ï¼ˆå¦‚ <code>/abc123</code> è·³è½¬åˆ°ç›®æ ‡URLï¼‰</li><li>âœ… è‡ªåŠ¨æ£€æµ‹æ˜¯å¦åœ¨å¾®ä¿¡æµè§ˆå™¨ä¸­æ‰“å¼€</li><li>âœ… å¦‚æœåœ¨å¾®ä¿¡ä¸­æ‰“å¼€ï¼Œåˆ™æ˜¾ç¤ºæç¤ºï¼šâ€è¯·å¤åˆ¶åˆ°æµè§ˆå™¨æ‰“å¼€â€</li><li>âœ… ä½¿ç”¨ Cloudflare KV å­˜å‚¨æ˜ å°„å…³ç³»ï¼ˆå…è´¹é¢åº¦è¶³å¤Ÿä¸ªäººä½¿ç”¨ï¼‰</li><li>âœ… æä¾› Web ç•Œé¢ç”¨äºç”ŸæˆçŸ­é“¾</li><li>âœ… é˜²æ­¢é‡å¤æäº¤ç›¸åŒé•¿é“¾æ¥ï¼ˆåŸºäº SHA-1 å“ˆå¸Œå»é‡ï¼‰</li><li>âœ… é˜»æ­¢ç”¨æˆ·è¾“å…¥è‡ªèº«çŸ­é“¾æ¥ï¼ˆé¿å…å¾ªç¯ï¼‰</li><li>âœ… é˜²æ­¢çŸ­é“¾é‡å¤ç”Ÿæˆï¼ˆç›¸åŒURLç”Ÿæˆç›¸åŒçŸ­ç ï¼‰</li><li>âœ… å‹å¥½çš„404é”™è¯¯é¡µé¢</li><li>âœ… ç§»åŠ¨ç«¯å‹å¥½çš„å“åº”å¼è®¾è®¡</li></ul><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><h3 id="ç¬¬ä¸€æ­¥ï¼šæ³¨å†ŒCloudflareè´¦å·"><a href="#ç¬¬ä¸€æ­¥ï¼šæ³¨å†ŒCloudflareè´¦å·" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šæ³¨å†ŒCloudflareè´¦å·"></a>ç¬¬ä¸€æ­¥ï¼šæ³¨å†ŒCloudflareè´¦å·</h3><p>è®¿é—® <a href="https://cloudflare.com/">Cloudflareå®˜ç½‘</a> æ³¨å†Œè´¦å·ã€‚</p><h3 id="ç¬¬äºŒæ­¥ï¼šåˆ›å»ºWorker"><a href="#ç¬¬äºŒæ­¥ï¼šåˆ›å»ºWorker" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šåˆ›å»ºWorker"></a>ç¬¬äºŒæ­¥ï¼šåˆ›å»ºWorker</h3><ol><li>ç™»å½•Cloudflareæ§åˆ¶å°</li><li>è¿›å…¥Workers &amp; Pages</li><li>ç‚¹å‡»â€åˆ›å»ºåº”ç”¨ç¨‹åºâ€</li><li>é€‰æ‹©â€åˆ›å»ºWorkerâ€</li><li>å‘½åWorkerï¼ˆä¾‹å¦‚ï¼š<code>url-shortener</code>ï¼‰</li><li>ç‚¹å‡»â€éƒ¨ç½²â€</li></ol><h3 id="ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºKVå‘½åç©ºé—´"><a href="#ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºKVå‘½åç©ºé—´" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºKVå‘½åç©ºé—´"></a>ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºKVå‘½åç©ºé—´</h3><ol><li>åœ¨Workerè¯¦æƒ…é¡µé¢ï¼Œé€‰æ‹©â€è®¾ç½®â€æ ‡ç­¾</li><li>ç‚¹å‡»â€å˜é‡â€ â†’ â€œKVå‘½åç©ºé—´ç»‘å®šâ€</li><li>ç‚¹å‡»â€æ·»åŠ ç»‘å®šâ€</li><li>å˜é‡åç§°è¾“å…¥ï¼š<code>URL_MAPPINGS</code></li><li>ç‚¹å‡»â€åˆ›å»ºæ–°çš„KVå‘½åç©ºé—´â€</li><li>å‘½åç©ºé—´åç§°è¾“å…¥ï¼š<code>URL_MAPPINGS</code></li><li>ç‚¹å‡»â€ä¿å­˜â€</li></ol><h3 id="ç¬¬å››æ­¥ï¼šå°†KVç»‘å®šåˆ°Worker"><a href="#ç¬¬å››æ­¥ï¼šå°†KVç»‘å®šåˆ°Worker" class="headerlink" title="ç¬¬å››æ­¥ï¼šå°†KVç»‘å®šåˆ°Worker"></a>ç¬¬å››æ­¥ï¼šå°†KVç»‘å®šåˆ°Worker</h3><ol><li>åœ¨å˜é‡ç»‘å®šéƒ¨åˆ†ï¼Œé€‰æ‹©åˆšæ‰åˆ›å»ºçš„<code>URL_MAPPINGS</code>å‘½åç©ºé—´</li><li>ç‚¹å‡»â€ä¿å­˜å¹¶éƒ¨ç½²â€</li></ol><h2 id="æ ¸å¿ƒä»£ç å®ç°"><a href="#æ ¸å¿ƒä»£ç å®ç°" class="headerlink" title="æ ¸å¿ƒä»£ç å®ç°"></a>æ ¸å¿ƒä»£ç å®ç°</h2><h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">SHORT_CODE_LENGTH</span> = <span class="number">6</span>; <span class="comment">// çŸ­ç é•¿åº¦</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å·¥å…·å‡½æ•°"><a href="#å·¥å…·å‡½æ•°" class="headerlink" title="å·¥å…·å‡½æ•°"></a>å·¥å…·å‡½æ•°</h3><h4 id="æ£€æµ‹è¢«ç¦ç”¨çš„UA"><a href="#æ£€æµ‹è¢«ç¦ç”¨çš„UA" class="headerlink" title="æ£€æµ‹è¢«ç¦ç”¨çš„UA"></a>æ£€æµ‹è¢«ç¦ç”¨çš„UA</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">isBannedUA</span>(<span class="params">ua</span>) &#123;</span><br><span class="line">  ua = ua.<span class="title function_">toLowerCase</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="regexp">/micromessenger/i</span>.<span class="title function_">test</span>(ua) || <span class="regexp">/weibo/</span>.<span class="title function_">test</span>(ua) || <span class="regexp">/qq\//</span>.<span class="title function_">test</span>(ua);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="SHA-1å“ˆå¸Œç”Ÿæˆ"><a href="#SHA-1å“ˆå¸Œç”Ÿæˆ" class="headerlink" title="SHA-1å“ˆå¸Œç”Ÿæˆ"></a>SHA-1å“ˆå¸Œç”Ÿæˆ</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">sha1</span>(<span class="params">str</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> encoder = <span class="keyword">new</span> <span class="title class_">TextEncoder</span>();</span><br><span class="line">  <span class="keyword">const</span> data = encoder.<span class="title function_">encode</span>(str);</span><br><span class="line">  <span class="keyword">const</span> hashBuffer = <span class="keyword">await</span> crypto.<span class="property">subtle</span>.<span class="title function_">digest</span>(<span class="string">&#x27;SHA-1&#x27;</span>, data);</span><br><span class="line">  <span class="keyword">const</span> hashArray = <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="keyword">new</span> <span class="title class_">Uint8Array</span>(hashBuffer));</span><br><span class="line">  <span class="keyword">return</span> hashArray.<span class="title function_">map</span>(<span class="function"><span class="params">b</span> =&gt;</span> b.<span class="title function_">toString</span>(<span class="number">16</span>).<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)).<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ç”ŸæˆçŸ­ç "><a href="#ç”ŸæˆçŸ­ç " class="headerlink" title="ç”ŸæˆçŸ­ç "></a>ç”ŸæˆçŸ­ç </h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">generateShortCode</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> chars = <span class="string">&#x27;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&#x27;</span>;</span><br><span class="line">  <span class="keyword">let</span> result = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="variable constant_">SHORT_CODE_LENGTH</span>; i++) &#123;</span><br><span class="line">    result += chars.<span class="title function_">charAt</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * chars.<span class="property">length</span>));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="é¡µé¢æ¨¡æ¿"><a href="#é¡µé¢æ¨¡æ¿" class="headerlink" title="é¡µé¢æ¨¡æ¿"></a>é¡µé¢æ¨¡æ¿</h3><h4 id="404é”™è¯¯é¡µé¢"><a href="#404é”™è¯¯é¡µé¢" class="headerlink" title="404é”™è¯¯é¡µé¢"></a>404é”™è¯¯é¡µé¢</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>çŸ­é“¾æ¥ä¸å­˜åœ¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- æ ·å¼å’Œè„šæœ¬ --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;error-icon&quot;</span>&gt;</span>âŒ<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>çŸ­é“¾æ¥ä¸å­˜åœ¨<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ‚¨è®¿é—®çš„çŸ­é“¾æ¥å·²å¤±æ•ˆæˆ–ä¸å­˜åœ¨<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;window.location.href=&#x27;/&#x27;&quot;</span>&gt;</span>è¿”å›ä¸»é¡µ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å¾®ä¿¡æ‹¦æˆªé¡µé¢"><a href="#å¾®ä¿¡æ‹¦æˆªé¡µé¢" class="headerlink" title="å¾®ä¿¡æ‹¦æˆªé¡µé¢"></a>å¾®ä¿¡æ‹¦æˆªé¡µé¢</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>æç¤º<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- æ ·å¼å’Œè„šæœ¬ --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>âš ï¸æ— æ³•åœ¨å½“å‰åº”ç”¨ä¸­æ‰“å¼€<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç‚¹å‡»å³ä¸Šè§’èœå•<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>é€‰æ‹© <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;highlight&quot;</span>&gt;</span>&quot;åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€&quot;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ä¸»é¡µï¼ˆçŸ­é“¾æ¥ç”Ÿæˆå™¨ï¼‰"><a href="#ä¸»é¡µï¼ˆçŸ­é“¾æ¥ç”Ÿæˆå™¨ï¼‰" class="headerlink" title="ä¸»é¡µï¼ˆçŸ­é“¾æ¥ç”Ÿæˆå™¨ï¼‰"></a>ä¸»é¡µï¼ˆçŸ­é“¾æ¥ç”Ÿæˆå™¨ï¼‰</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>çŸ­é“¾æ¥ç”Ÿæˆå™¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- æ ·å¼å’Œè„šæœ¬ --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ğŸ”— çŸ­é“¾æ¥ç”Ÿæˆå™¨<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;shorten-form&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;url&quot;</span> <span class="attr">id</span>=<span class="string">&quot;url-input&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥å®Œæ•´ç½‘å€ï¼ˆå¦‚ https://example.comï¼‰&quot;</span> <span class="attr">required</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>ç”ŸæˆçŸ­é“¾æ¥<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;result&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å‹é“¾éƒ¨åˆ† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;links&quot;</span>&gt;</span>å‹é“¾ï¼š...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// å®¢æˆ·ç«¯JavaScriptä»£ç </span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> form = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;shorten-form&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// äº‹ä»¶å§”æ‰˜å¤„ç†å¤åˆ¶æŒ‰é’®</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (e.<span class="property">target</span>.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;copy-btn&#x27;</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">const</span> shortUrl = e.<span class="property">target</span>.<span class="title function_">closest</span>(<span class="string">&#x27;.result&#x27;</span>).<span class="title function_">querySelector</span>(<span class="string">&#x27;a&#x27;</span>).<span class="property">href</span>;</span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">copyLink</span>(shortUrl);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// è¡¨å•æäº¤å¤„ç†</span></span></span><br><span class="line"><span class="language-javascript">      form.<span class="title function_">addEventListener</span>(<span class="string">&#x27;submit&#x27;</span>, <span class="keyword">async</span> (e) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">        e.<span class="title function_">preventDefault</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// å®¢æˆ·ç«¯å¾®ä¿¡æ£€æµ‹</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (<span class="regexp">/MicroMessenger/i</span>.<span class="title function_">test</span>(navigator.<span class="property">userAgent</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">alert</span>(<span class="string">&#x27;è¯·åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œä¸è¦åœ¨å¾®ä¿¡ä¸­ä½¿ç”¨&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// è¡¨å•æ•°æ®å¤„ç†</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// ...</span></span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="è¯·æ±‚å¤„ç†å™¨"><a href="#è¯·æ±‚å¤„ç†å™¨" class="headerlink" title="è¯·æ±‚å¤„ç†å™¨"></a>è¯·æ±‚å¤„ç†å™¨</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">handleRequest</span>(<span class="params">request</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> url = <span class="keyword">new</span> <span class="title function_">URL</span>(request.<span class="property">url</span>);</span><br><span class="line">  <span class="keyword">const</span> path = url.<span class="property">pathname</span>;</span><br><span class="line">  <span class="keyword">const</span> userAgent = request.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;User-Agent&#x27;</span>) || <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="keyword">const</span> inWechat = <span class="title function_">isBannedUA</span>(userAgent);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1. å¤„ç†å¾®ä¿¡ç¯å¢ƒ</span></span><br><span class="line">  <span class="keyword">if</span> (inWechat &amp;&amp; (path === <span class="string">&#x27;/&#x27;</span> || path.<span class="title function_">startsWith</span>(<span class="string">&#x27;/&#x27;</span>))) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="variable constant_">WECHAT_BLOCK_PAGE</span>, &#123;</span><br><span class="line">      <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html; charset=utf-8&#x27;</span> &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. å¤„ç†çŸ­é“¾æ¥è·³è½¬</span></span><br><span class="line">  <span class="keyword">const</span> shortCodeMatch = path.<span class="title function_">match</span>(<span class="regexp">/^\/([a-zA-Z0-9]&#123;6&#125;)$/</span>);</span><br><span class="line">  <span class="keyword">if</span> (shortCodeMatch) &#123;</span><br><span class="line">    <span class="keyword">const</span> shortCode = shortCodeMatch[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">const</span> targetUrl = <span class="keyword">await</span> <span class="variable constant_">LINKS</span>.<span class="title function_">get</span>(shortCode);</span><br><span class="line">    <span class="keyword">if</span> (targetUrl) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Response</span>.<span class="title function_">redirect</span>(targetUrl, <span class="number">302</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="variable constant_">NOT_FOUND_PAGE</span>, &#123;</span><br><span class="line">        <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html; charset=utf-8&#x27;</span> &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3. å¤„ç†ä¸»é¡µè¯·æ±‚</span></span><br><span class="line">  <span class="keyword">if</span> (request.<span class="property">method</span> === <span class="string">&#x27;GET&#x27;</span> &amp;&amp; path === <span class="string">&#x27;/&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="title function_">homePage</span>(), &#123;</span><br><span class="line">      <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html; charset=utf-8&#x27;</span> &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 4. å¤„ç†çŸ­é“¾æ¥ç”Ÿæˆè¯·æ±‚</span></span><br><span class="line">  <span class="keyword">if</span> (request.<span class="property">method</span> === <span class="string">&#x27;POST&#x27;</span> &amp;&amp; path === <span class="string">&#x27;/&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// è¡¨å•æ•°æ®å¤„ç†</span></span><br><span class="line">      <span class="keyword">const</span> formData = <span class="keyword">await</span> request.<span class="title function_">formData</span>();</span><br><span class="line">      <span class="keyword">let</span> targetUrl = formData.<span class="title function_">get</span>(<span class="string">&#x27;url&#x27;</span>)?.<span class="title function_">trim</span>();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// URLéªŒè¯å’Œè§„èŒƒåŒ–</span></span><br><span class="line">      <span class="keyword">if</span> (!targetUrl) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;è¯·è¾“å…¥ç½‘å€&#x27;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!<span class="regexp">/^https?:\/\//i</span>.<span class="title function_">test</span>(targetUrl)) &#123;</span><br><span class="line">        targetUrl = <span class="string">&#x27;https://&#x27;</span> + targetUrl;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> normalizedUrl = targetUrl.<span class="title function_">replace</span>(<span class="regexp">/\/$/</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// é˜²æ­¢çŸ­é“¾æ¥å¾ªç¯</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> inputUrl = <span class="keyword">new</span> <span class="title function_">URL</span>(normalizedUrl);</span><br><span class="line">        <span class="keyword">const</span> currentDomain = <span class="keyword">new</span> <span class="title function_">URL</span>(url.<span class="property">origin</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (inputUrl.<span class="property">hostname</span> === currentDomain.<span class="property">hostname</span> &amp;&amp;</span><br><span class="line">            inputUrl.<span class="property">pathname</span>.<span class="property">length</span> === <span class="number">7</span> &amp;&amp;</span><br><span class="line">            inputUrl.<span class="property">pathname</span>[<span class="number">0</span>] === <span class="string">&#x27;/&#x27;</span> &amp;&amp;</span><br><span class="line">            <span class="regexp">/^[a-zA-Z0-9]&#123;6&#125;$/</span>.<span class="title function_">test</span>(inputUrl.<span class="property">pathname</span>.<span class="title function_">substring</span>(<span class="number">1</span>))) &#123;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">&#x27;è¾“å…¥çš„URLæ˜¯çŸ­é“¾æ¥ï¼Œè¯·è¾“å…¥é•¿é“¾æ¥&#x27;</span>, &#123;</span><br><span class="line">            <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain; charset=utf-8&#x27;</span> &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;ç½‘å€æ ¼å¼æ— æ•ˆ&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ£€æŸ¥URLæ˜¯å¦å·²å­˜åœ¨</span></span><br><span class="line">      <span class="keyword">const</span> urlHash = (<span class="keyword">await</span> <span class="title function_">sha1</span>(normalizedUrl)).<span class="title function_">substring</span>(<span class="number">0</span>, <span class="number">12</span>);</span><br><span class="line">      <span class="keyword">const</span> hashKey = <span class="string">`hash:<span class="subst">$&#123;urlHash&#125;</span>`</span>;</span><br><span class="line">      <span class="keyword">const</span> existingCode = <span class="keyword">await</span> <span class="variable constant_">LINKS</span>.<span class="title function_">get</span>(hashKey);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (existingCode) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">`<span class="subst">$&#123;url.origin&#125;</span>/<span class="subst">$&#123;existingCode&#125;</span>`</span>, &#123;</span><br><span class="line">          <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain; charset=utf-8&#x27;</span> &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// ç”Ÿæˆæ–°çŸ­ç </span></span><br><span class="line">      <span class="keyword">const</span> shortCode = <span class="title function_">generateShortCode</span>();</span><br><span class="line">      <span class="keyword">const</span> fullShortUrl = <span class="string">`<span class="subst">$&#123;url.origin&#125;</span>/<span class="subst">$&#123;shortCode&#125;</span>`</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å­˜å‚¨åˆ°KV</span></span><br><span class="line">      <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>([</span><br><span class="line">        <span class="variable constant_">LINKS</span>.<span class="title function_">put</span>(shortCode, normalizedUrl),</span><br><span class="line">        <span class="variable constant_">LINKS</span>.<span class="title function_">put</span>(hashKey, shortCode)</span><br><span class="line">      ]);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(fullShortUrl, &#123;</span><br><span class="line">        <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain; charset=utf-8&#x27;</span> &#125;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;çŸ­é“¾ç”Ÿæˆå¤±è´¥:&#x27;</span>, e.<span class="property">message</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="string">`âŒ <span class="subst">$&#123;e.message&#125;</span>`</span>, &#123;</span><br><span class="line">        <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain; charset=utf-8&#x27;</span> &#125;,</span><br><span class="line">        <span class="attr">status</span>: <span class="number">400</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 5. å¤„ç†404</span></span><br><span class="line">  <span class="keyword">if</span> (path !== <span class="string">&#x27;/&#x27;</span> &amp;&amp; !shortCodeMatch) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="variable constant_">NOT_FOUND_PAGE</span>, &#123;</span><br><span class="line">      <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html; charset=utf-8&#x27;</span> &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Workerå…¥å£ç‚¹"><a href="#Workerå…¥å£ç‚¹" class="headerlink" title="Workerå…¥å£ç‚¹"></a>Workerå…¥å£ç‚¹</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">addEventListener</span>(<span class="string">&#x27;fetch&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">  event.<span class="title function_">respondWith</span>(<span class="title function_">handleRequest</span>(event.<span class="property">request</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="éƒ¨ç½²å’Œä½¿ç”¨"><a href="#éƒ¨ç½²å’Œä½¿ç”¨" class="headerlink" title="éƒ¨ç½²å’Œä½¿ç”¨"></a>éƒ¨ç½²å’Œä½¿ç”¨</h2><h3 id="éƒ¨ç½²æ­¥éª¤"><a href="#éƒ¨ç½²æ­¥éª¤" class="headerlink" title="éƒ¨ç½²æ­¥éª¤"></a>éƒ¨ç½²æ­¥éª¤</h3><ol><li>å°†å®Œæ•´ä»£ç å¤åˆ¶åˆ°Workerç¼–è¾‘å™¨ä¸­</li><li>ç‚¹å‡»â€ä¿å­˜å¹¶éƒ¨ç½²â€</li><li>è®¿é—®æ‚¨çš„WorkeråŸŸåï¼ˆå¦‚ï¼š<code>your-worker.workers.dev</code>ï¼‰</li></ol><h3 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h3><ol><li>è®¿é—®çŸ­ç½‘å€æœåŠ¡ä¸»é¡µ</li><li>åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥è¦ç¼©çŸ­çš„å®Œæ•´URL</li><li>ç‚¹å‡»â€ç”ŸæˆçŸ­é“¾æ¥â€æŒ‰é’®</li><li>å¤åˆ¶ç”Ÿæˆçš„çŸ­é“¾æ¥ï¼ˆæ ¼å¼ï¼š<code>your-domain.com/abc123</code>ï¼‰</li><li>åˆ†äº«çŸ­é“¾æ¥ï¼Œç”¨æˆ·è®¿é—®æ—¶ä¼šè‡ªåŠ¨è·³è½¬åˆ°åŸå§‹URL</li></ol><h2 id="åŠŸèƒ½è¯´æ˜"><a href="#åŠŸèƒ½è¯´æ˜" class="headerlink" title="åŠŸèƒ½è¯´æ˜"></a>åŠŸèƒ½è¯´æ˜</h2><table><thead><tr><th>åŠŸèƒ½</th><th>å®ç°æ–¹å¼</th></tr></thead><tbody><tr><td><strong>çŸ­é“¾ç”Ÿæˆ</strong></td><td>POST <code>/</code> æäº¤ <code>url</code> å‚æ•°ï¼Œè¿”å› <code>https://your-worker.example/abc123</code></td></tr><tr><td><strong>è·³è½¬</strong></td><td>è®¿é—® <code>/abc123</code> â†’ 302 é‡å®šå‘åˆ°åŸå§‹ URL</td></tr><tr><td><strong>å¾®ä¿¡æ‹¦æˆª</strong></td><td>æ£€æµ‹ UA ä¸­åŒ…å« <code>MicroMessenger</code>ã€<code>weibo</code>ã€<code>QQ/</code>ï¼Œè¿”å›æç¤ºé¡µ</td></tr><tr><td><strong>é˜²é‡å¤</strong></td><td>å¯¹è§„èŒƒåŒ– URL è®¡ç®— SHA-1 å“ˆå¸Œå‰ 12 ä½ï¼Œå­˜ä¸º <code>hash:xxx</code>ï¼Œä¸‹æ¬¡ç›´æ¥è¿”å›å·²æœ‰çŸ­ç </td></tr><tr><td><strong>é˜²è‡ªç¯</strong></td><td>ç¦æ­¢ç”¨æˆ·æäº¤å½¢å¦‚ <code>https://your-worker.example/xxxxxx</code> çš„çŸ­é“¾æ¥</td></tr><tr><td><strong>404 é¡µé¢</strong></td><td>æ‰€æœ‰æ— æ•ˆè·¯å¾„å‡è¿”å›å‹å¥½æç¤º</td></tr></tbody></table><h2 id="å®‰å…¨ä¸éšç§è¯´æ˜"><a href="#å®‰å…¨ä¸éšç§è¯´æ˜" class="headerlink" title="å®‰å…¨ä¸éšç§è¯´æ˜"></a>å®‰å…¨ä¸éšç§è¯´æ˜</h2><ul><li>æœ¬æœåŠ¡ <strong>ä¸æ”¶é›†ä»»ä½•ç”¨æˆ·æ•°æ®</strong></li><li>ä¸ä½¿ç”¨ Cookieã€LocalStorageï¼ˆé™¤ä¸´æ—¶å¤åˆ¶å¤–ï¼‰</li><li>æ‰€æœ‰é€»è¾‘è¿è¡Œåœ¨ Cloudflare è¾¹ç¼˜èŠ‚ç‚¹</li><li>KV å­˜å‚¨ä»…åŒ…å«ï¼š<code>çŸ­ç  â†’ é•¿é“¾æ¥</code> å’Œ <code>å“ˆå¸Œ â†’ çŸ­ç </code> æ˜ å°„</li></ul><h2 id="æŠ€æœ¯ç‰¹æ€§"><a href="#æŠ€æœ¯ç‰¹æ€§" class="headerlink" title="æŠ€æœ¯ç‰¹æ€§"></a>æŠ€æœ¯ç‰¹æ€§</h2><h3 id="1-çŸ­ç ç”Ÿæˆç­–ç•¥"><a href="#1-çŸ­ç ç”Ÿæˆç­–ç•¥" class="headerlink" title="1. çŸ­ç ç”Ÿæˆç­–ç•¥"></a>1. çŸ­ç ç”Ÿæˆç­–ç•¥</h3><ul><li>ä½¿ç”¨6ä½å­—ç¬¦ï¼ˆå¤§å°å†™å­—æ¯+æ•°å­—ï¼‰å…±62^6â‰ˆ568äº¿ç§ç»„åˆ</li><li>ç›¸åŒURLå§‹ç»ˆç”Ÿæˆç›¸åŒçŸ­ç ï¼Œé¿å…é‡å¤å­˜å‚¨</li></ul><h3 id="2-æ€§èƒ½ä¼˜åŒ–"><a href="#2-æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="2. æ€§èƒ½ä¼˜åŒ–"></a>2. æ€§èƒ½ä¼˜åŒ–</h3><ul><li>KVå­˜å‚¨è¯»å†™æ“ä½œå¿«é€Ÿå“åº”</li><li>å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åŒé‡å¾®ä¿¡æ£€æµ‹</li><li>å“åº”å¼è®¾è®¡é€‚é…å„ç§è®¾å¤‡</li></ul><h3 id="3-å®‰å…¨æ€§"><a href="#3-å®‰å…¨æ€§" class="headerlink" title="3. å®‰å…¨æ€§"></a>3. å®‰å…¨æ€§</h3><ul><li>è¾“å…¥URLéªŒè¯å’Œè§„èŒƒåŒ–</li><li>é˜²æ­¢çŸ­é“¾æ¥å¾ªç¯å¼•ç”¨</li><li>è‡ªåŠ¨è¡¥å…¨HTTPSåè®®</li></ul><h3 id="4-ç”¨æˆ·ä½“éªŒ"><a href="#4-ç”¨æˆ·ä½“éªŒ" class="headerlink" title="4. ç”¨æˆ·ä½“éªŒ"></a>4. ç”¨æˆ·ä½“éªŒ</h3><ul><li>ç®€æ´ç›´è§‚çš„æ“ä½œç•Œé¢</li><li>ä¸€é”®å¤åˆ¶çŸ­é“¾æ¥åŠŸèƒ½</li><li>å‹å¥½çš„é”™è¯¯æç¤ºé¡µé¢</li><li>å¾®ä¿¡ç¯å¢ƒä¸‹çš„æ˜ç¡®æŒ‡å¼•</li></ul><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><ol><li><p><strong>å…è´¹é¢åº¦é™åˆ¶</strong>ï¼šCloudflare Workerså…è´¹å¥—é¤åŒ…æ‹¬ï¼š</p><ul><li>æ¯å¤©10ä¸‡æ¬¡è¯·æ±‚</li><li>KVå­˜å‚¨ï¼š100,000æ¬¡è¯»å–&#x2F;å¤©ï¼Œ1,000æ¬¡å†™å…¥&#x2F;å¤©</li><li>å­˜å‚¨ç©ºé—´ï¼š1GB</li></ul></li><li><p><strong>åŸŸåç»‘å®š</strong>ï¼šå¯ä»¥å°†è‡ªå®šä¹‰åŸŸåç»‘å®šåˆ°Workerï¼Œé€šè¿‡â€è§¦å‘å™¨â€ â†’ â€œè‡ªå®šä¹‰åŸŸâ€è®¾ç½®</p></li><li><p><strong>ç›‘æ§å’Œç»Ÿè®¡</strong>ï¼šå¯ä»¥åœ¨Cloudflareæ§åˆ¶å°æŸ¥çœ‹Workerçš„è¯·æ±‚ç»Ÿè®¡å’Œé”™è¯¯æ—¥å¿—</p></li><li><p><strong>å¤‡ä»½å»ºè®®</strong>ï¼šå®šæœŸå¯¼å‡ºKVä¸­çš„æ•°æ®ä½œä¸ºå¤‡ä»½</p></li></ol><h2 id="æ•…éšœæ’é™¤"><a href="#æ•…éšœæ’é™¤" class="headerlink" title="æ•…éšœæ’é™¤"></a>æ•…éšœæ’é™¤</h2><h3 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h3><ol><li><strong>Workeræ— æ³•è®¿é—®</strong>ï¼šæ£€æŸ¥Workeræ˜¯å¦å·²éƒ¨ç½²ï¼Œç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸</li><li><strong>çŸ­é“¾æ¥ä¸è·³è½¬</strong>ï¼šæ£€æŸ¥KVç»‘å®šæ˜¯å¦æ­£ç¡®ï¼ŒçŸ­ç æ˜¯å¦å·²å­˜å‚¨</li><li><strong>å¾®ä¿¡æ£€æµ‹å¤±æ•ˆ</strong>ï¼šæ£€æŸ¥User-Agentæ£€æµ‹é€»è¾‘æ˜¯å¦è¢«å¾®ä¿¡æ›´æ–°å½±å“</li><li><strong>ç”Ÿæˆå¤±è´¥</strong>ï¼šæ£€æŸ¥è¾“å…¥URLæ ¼å¼ï¼Œç¡®ä¿ä¸æ˜¯çŸ­é“¾æ¥æœ¬èº«</li></ol><h3 id="è°ƒè¯•æ–¹æ³•"><a href="#è°ƒè¯•æ–¹æ³•" class="headerlink" title="è°ƒè¯•æ–¹æ³•"></a>è°ƒè¯•æ–¹æ³•</h3><ol><li>ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹ç½‘ç»œè¯·æ±‚</li><li>æŸ¥çœ‹Workeræ§åˆ¶å°çš„é”™è¯¯æ—¥å¿—</li><li>æµ‹è¯•ä¸åŒçš„User-Agentæ¨¡æ‹Ÿä¸åŒç¯å¢ƒ</li><li>æ£€æŸ¥KVå‘½åç©ºé—´ä¸­çš„æ•°æ®çŠ¶æ€</li></ol><h2 id="æ‰©å±•å»ºè®®"><a href="#æ‰©å±•å»ºè®®" class="headerlink" title="æ‰©å±•å»ºè®®"></a>æ‰©å±•å»ºè®®</h2><ol><li><strong>æ·»åŠ ç»Ÿè®¡åŠŸèƒ½</strong>ï¼šè®°å½•æ¯ä¸ªçŸ­é“¾æ¥çš„è®¿é—®æ¬¡æ•°</li><li><strong>è®¾ç½®è¿‡æœŸæ—¶é—´</strong>ï¼šä¸ºçŸ­é“¾æ¥æ·»åŠ æœ‰æ•ˆæœŸ</li><li><strong>å¯†ç ä¿æŠ¤</strong>ï¼šä¸ºæ•æ„Ÿé“¾æ¥æ·»åŠ è®¿é—®å¯†ç </li><li><strong>æ‰¹é‡ç”Ÿæˆ</strong>ï¼šæ”¯æŒä¸€æ¬¡ç”Ÿæˆå¤šä¸ªçŸ­é“¾æ¥</li><li><strong>APIæ¥å£</strong>ï¼šæä¾›RESTful APIä¾›ç¬¬ä¸‰æ–¹è°ƒç”¨</li></ol><h2 id="åç»­å¯æ‰©å±•æ–¹å‘"><a href="#åç»­å¯æ‰©å±•æ–¹å‘" class="headerlink" title="åç»­å¯æ‰©å±•æ–¹å‘"></a>åç»­å¯æ‰©å±•æ–¹å‘</h2><ul><li>æ·»åŠ  API Key éªŒè¯ï¼ˆé˜²æ­¢æ»¥ç”¨ï¼‰</li><li>æ”¯æŒè‡ªå®šä¹‰çŸ­ç ï¼ˆå¦‚ <code>/github</code>ï¼‰</li><li>æ·»åŠ ç‚¹å‡»ç»Ÿè®¡ï¼ˆéœ€é¢å¤– KV æˆ– D1ï¼‰</li><li>é›†æˆå¯†ç ä¿æŠ¤çŸ­é“¾</li><li>æ”¯æŒæ‰¹é‡ç”Ÿæˆ</li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬æ•™ç¨‹è¯¦ç»†ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨Cloudflare Workerså’ŒWorkers KVæ­å»ºä¸€ä¸ªå®Œæ•´çš„çŸ­ç½‘å€æœåŠ¡ã€‚è¯¥æ–¹æ¡ˆå…·æœ‰éƒ¨ç½²ç®€å•ã€æˆæœ¬ä½å»‰ã€æ€§èƒ½ä¼˜è¶Šçš„ç‰¹ç‚¹ï¼Œé€‚åˆä¸ªäººå’Œå°å‹é¡¹ç›®ä½¿ç”¨ã€‚é€šè¿‡å¾®ä¿¡æ£€æµ‹ã€é‡å¤URLæ£€æµ‹ã€å‹å¥½çš„ç”¨æˆ·ç•Œé¢ç­‰åŠŸèƒ½ï¼Œæä¾›äº†è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒã€‚</p><p>è¿™ä¸ªçŸ­ç½‘å€æœåŠ¡å¯ä»¥æ»¡è¶³æ—¥å¸¸çš„é“¾æ¥ç¼©çŸ­éœ€æ±‚ï¼ŒåŒæ—¶å…·å¤‡è‰¯å¥½çš„æ‰©å±•æ€§ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è¿›è¡ŒåŠŸèƒ½å¢å¼ºå’Œå®šåˆ¶å¼€å‘ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ¬æ•™ç¨‹å°†æŒ‡å¯¼æ‚¨ä½¿ç”¨Cloudflare Workerså’ŒWorkers KVæ­å»ºä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„çŸ­ç½‘å€æœåŠ¡ã€‚è¯¥æœåŠ¡æ”¯æŒåˆ›å»ºçŸ­é“¾æ¥ã€è‡ªåŠ¨æ£€æµ‹å¾®ä¿¡æµè§ˆå™¨å¹¶æ˜¾ç¤ºæç¤ºï¼Œä½¿ç”¨KVå­˜å‚¨çŸ­é“¾æ˜ å°„ï¼Œå…è´¹é¢åº¦è¶³å¤Ÿä¸ªäººä½¿ç”¨ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="FrontEnd" scheme="https://xuehuayu.cn/categories/FrontEnd/"/>
    
    <category term="çŸ­ç½‘å€" scheme="https://xuehuayu.cn/categories/%E7%9F%AD%E7%BD%91%E5%9D%80/"/>
    
    
    <category term="Cloudflare" scheme="https://xuehuayu.cn/tags/Cloudflare/"/>
    
    <category term="çŸ­é“¾æ¥" scheme="https://xuehuayu.cn/tags/%E7%9F%AD%E9%93%BE%E6%8E%A5/"/>
    
  </entry>
  
  <entry>
    <title>åˆæ‹äº‘æ³¨é”€è´¦å·é€€æ¬¾ç»“æœ</title>
    <link href="https://xuehuayu.cn/article/90947add.html"/>
    <id>https://xuehuayu.cn/article/90947add.html</id>
    <published>2025-12-03T18:05:02.000Z</published>
    <updated>2025-12-13T16:23:58.687Z</updated>
    
    <content type="html"><![CDATA[<p>ç»è¿‡ä¸ªäººçš„æŒç»­è·Ÿè¿›ä»¥åŠç›¸å…³æ–¹é¢çš„åè°ƒï¼Œæœ¬äººå·²äºè¿‘æ—¥æ”¶åˆ°äº†åˆæ‹äº‘çš„è´¦æˆ·ä½™é¢é€€æ¬¾ã€‚æ­¤äº‹è™½å·²äº†ç»“ï¼Œä½†è¿‡ç¨‹ä¸­çš„ç§ç§éšœç¢ï¼Œä»è¶³ä»¥æˆä¸ºä¼ä¸šå®¡è§†è‡ªèº«æœåŠ¡æµç¨‹çš„æ¡ˆä¾‹ã€‚</p><span id="more"></span><p>æ­¤æ¬¡ç»å†è¡¨æ˜ï¼Œç”¨æˆ·ä¸å¹³å°ä¹‹é—´çš„æƒè´£å¯¹ç­‰ä¸ä»…åº”ä½“ç°åœ¨æœåŠ¡æä¾›æ—¶ï¼Œä¹Ÿåº”å»¶ç»­è‡³æœåŠ¡ç»ˆæ­¢çš„ç¯èŠ‚ã€‚åˆç†çš„é€€æ¬¾æœºåˆ¶ï¼Œåº”å½“æ˜¯ä»¥ç”¨æˆ·ä¾¿åˆ©ä¸ºæœ¬ã€ä»¥ä¿¡æ¯å®‰å…¨ä¸ºåŸºï¼Œè€Œéè®¾ç½®å†—ä½™æ­¥éª¤ã€‚å°½ç®¡æœ€ç»ˆçš„ç»“æœç¬¦åˆé¢„æœŸï¼Œä½†æ¶ˆè€—çš„æ—¶é—´ä¸ç²¾åŠ›ï¼Œæœ¬å¯é€šè¿‡æ›´å‹å–„çš„æµç¨‹è®¾è®¡å¾—ä»¥é¿å…ã€‚</p><p>ä½†æ„¿æ­¤æ¬¡äº‹ä»¶èƒ½ä¸ºåˆæ‹äº‘åŠå…¶ä»–å¹³å°å¸¦æ¥åæ€ï¼šçœŸæ­£çš„æœåŠ¡å£ç¢‘ï¼Œä¸ä»…å»ºç«‹äºç”¨æˆ·åˆ°æ¥æ—¶çš„ä¾¿æ·ï¼Œæ›´ä½“ç°äºç”¨æˆ·ç¦»å¼€æ—¶çš„å°Šé‡ä¸é¡ºç•…ã€‚</p><h3 id="äº‹æƒ…ç»è¿‡"><a href="#äº‹æƒ…ç»è¿‡" class="headerlink" title="äº‹æƒ…ç»è¿‡"></a>äº‹æƒ…ç»è¿‡</h3><p><a href="/article/40a96678.html">åˆæ‹äº‘æ³¨é”€è´¦å·é€€æ¬¾ï¼šä¸€åœºæœ¬ä¸è¯¥å¦‚æ­¤â€œæ¶å¿ƒâ€çš„ç”¨æˆ·å‘Šåˆ«</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ç»è¿‡ä¸ªäººçš„æŒç»­è·Ÿè¿›ä»¥åŠç›¸å…³æ–¹é¢çš„åè°ƒï¼Œæœ¬äººå·²äºè¿‘æ—¥æ”¶åˆ°äº†åˆæ‹äº‘çš„è´¦æˆ·ä½™é¢é€€æ¬¾ã€‚æ­¤äº‹è™½å·²äº†ç»“ï¼Œä½†è¿‡ç¨‹ä¸­çš„ç§ç§éšœç¢ï¼Œä»è¶³ä»¥æˆä¸ºä¼ä¸šå®¡è§†è‡ªèº«æœåŠ¡æµç¨‹çš„æ¡ˆä¾‹ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="åˆæ‹äº‘" scheme="https://xuehuayu.cn/categories/%E5%8F%88%E6%8B%8D%E4%BA%91/"/>
    
    
    <category term="åˆæ‹äº‘" scheme="https://xuehuayu.cn/tags/%E5%8F%88%E6%8B%8D%E4%BA%91/"/>
    
    <category term="æ³¨é”€" scheme="https://xuehuayu.cn/tags/%E6%B3%A8%E9%94%80/"/>
    
  </entry>
  
  <entry>
    <title>åˆæ‹äº‘æ³¨é”€è´¦å·é€€æ¬¾ï¼šä¸€åœºæœ¬ä¸è¯¥å¦‚æ­¤â€œæ¶å¿ƒâ€çš„ç”¨æˆ·å‘Šåˆ«</title>
    <link href="https://xuehuayu.cn/article/40a96678.html"/>
    <id>https://xuehuayu.cn/article/40a96678.html</id>
    <published>2025-12-02T14:32:22.000Z</published>
    <updated>2025-12-13T16:23:58.686Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘å†³å®šå°†ä¸ªäººåšå®¢çš„åŠ é€ŸæœåŠ¡ä»åˆæ‹äº‘åˆ‡æ¢åˆ°å…¶ä»–å¹³å°ï¼Œæœ¬ä»¥ä¸ºæ³¨é”€è´¦å·ã€å–å›ä½™é¢æ˜¯ä¸€ä¸ªç®€å•çš„æµç¨‹ï¼Œå´æ²¡æƒ³åˆ°ï¼Œè¿™ç«Ÿæˆäº†ä¸€åœºä»¤äººå€æ„Ÿâ€œæ¶å¿ƒâ€çš„æ‹‰é”¯æˆ˜ã€‚</p><span id="more"></span><h3 id="æ³¨é”€éš¾ï¼Œé€€æ¬¾æ›´éš¾"><a href="#æ³¨é”€éš¾ï¼Œé€€æ¬¾æ›´éš¾" class="headerlink" title="æ³¨é”€éš¾ï¼Œé€€æ¬¾æ›´éš¾"></a><strong>æ³¨é”€éš¾ï¼Œé€€æ¬¾æ›´éš¾</strong></h3><p>åœ¨åˆæ‹äº‘å¹³å°ä¸Šï¼Œæˆ‘æ—¢æ‰¾ä¸åˆ°æ³¨é”€è´¦å·çš„å…¥å£ï¼Œä¹Ÿæ‰¾ä¸åˆ°ä½™é¢é€€æ¬¾çš„é€‰é¡¹ã€‚å‡ ç»å‘¨æŠ˜åè”ç³»å®¢æœï¼Œæ‰è¢«å‘ŠçŸ¥éœ€è¦å¡«å†™å·¥å•ã€æ·»åŠ å¾®ä¿¡ï¼Œå¹¶æäº¤ä¸€ä»½åä¸ºâ€œåˆæ‹äº‘ï¼ˆUPYUN.comï¼‰é€€æ¬¾ç”³è¯·å•â€çš„è¡¨æ ¼ï¼ˆæ–‡ç« æœ«å°¾é™„ä»¶ï¼‰ã€‚è€Œè¿™ä»½è¡¨æ ¼è¦æ±‚çš„ä¿¡æ¯ä¹‹å¤šï¼Œå ªç§°â€œè±ªåå¥—é¤â€ï¼š</p><ul><li>å§“åã€ç”µè¯</li><li>å•ä½ä¿¡æ¯ï¼ˆé‡å¤å¡«å†™ï¼‰</li><li>å……å€¼æ—¶é—´</li><li><strong>èº«ä»½è¯æ­£åé¢</strong></li><li><strong>äº²ç¬”ç­¾å</strong></li></ul><p>è€Œè¿™äº›å†…å®¹ï¼Œæœ€ç»ˆéœ€è¦é€šè¿‡å¾®ä¿¡å‘é€ç»™å®¢æœã€‚éšåï¼Œè¿˜éœ€ç­‰å¾…<strong>5-10ä¸ªå·¥ä½œæ—¥</strong>æ‰èƒ½çŸ¥é“ç»“æœã€‚</p><p>å®¢æœå¯¹æ­¤çš„è§£é‡Šæ˜¯ï¼šâ€œè´¦å·æ˜¯å®ååˆ¶çš„ï¼Œæ‰€ä»¥é€€æ¬¾éœ€è¦è¿™äº›ä¿¡æ¯ã€‚â€ç„¶è€Œï¼Œå½“åˆå……å€¼çš„æ—¶å€™ï¼Œåˆæ‹äº‘å¹¶æœªè¦æ±‚æäº¤å¦‚æ­¤ç¹ççš„ä¸ªäººèµ„æ–™ã€‚å¦‚ä»Šæƒ³è¦æ‹¿å›å±äºè‡ªå·±çš„å‡ å—é’±ä½™é¢ï¼Œå´è¦ç»å†å¦‚æ­¤å¤æ‚çš„æµç¨‹ï¼Œè¿™éš¾é“ä¸æ˜¯äººä¸ºè®¾ç½®çš„é«˜é—¨æ§›ï¼Ÿ</p><h3 id="ä¸ºä»€ä¹ˆè¯´è¿™æ˜¯â€œå¢åŠ é—¨æ§›â€ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¯´è¿™æ˜¯â€œå¢åŠ é—¨æ§›â€ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¯´è¿™æ˜¯â€œå¢åŠ é—¨æ§›â€ï¼Ÿ"></a><strong>ä¸ºä»€ä¹ˆè¯´è¿™æ˜¯â€œå¢åŠ é—¨æ§›â€ï¼Ÿ</strong></h3><p>ä»é€»è¾‘ä¸Šçœ‹ï¼Œé€€æ¬¾æµç¨‹æœ¬å¯ä»¥æ›´ç®€æ´ã€æ›´å®‰å…¨ï¼š</p><ol><li><strong>è´¦å·ç™»å½•éªŒè¯</strong>ï¼šç”¨æˆ·å·²é€šè¿‡è´¦å·å¯†ç ã€æ‰‹æœºéªŒè¯ç ç™»å½•ï¼›</li><li><strong>å·¥å•ç³»ç»Ÿ</strong>ï¼šç”¨æˆ·å·²åœ¨å·¥å•ä¸­æäº¤ç”³è¯·ï¼›</li><li><strong>æ”¯ä»˜å®åä¿¡æ¯</strong>ï¼šæ”¯ä»˜å®æœ¬èº«å°±æ˜¯å®ååˆ¶ï¼Œå¹³å°å®Œå…¨å¯ä»¥é€šè¿‡éªŒè¯ç”¨æˆ·ç»‘å®šçš„æ”¯ä»˜å®è´¦å·è¿›è¡Œé€€æ¬¾ã€‚</li></ol><p>å³ä½¿è€ƒè™‘åˆ°æ”¯ä»˜å®è´¦å·å¯èƒ½å­˜åœ¨é‡åçš„æƒ…å†µï¼Œç»“åˆä»¥ä¸Šå¤šé‡éªŒè¯ï¼Œèº«ä»½æ··æ·†çš„æ¦‚ç‡ä¹Ÿå¾®ä¹å…¶å¾®ã€‚åˆæ‹äº‘å½“å‰çš„åšæ³•ï¼Œæ›´åƒæ˜¯åœ¨åˆ©ç”¨ç¹ççš„æµç¨‹<strong>åŠé€€ç”¨æˆ·</strong>ï¼Œè®©å¤§å¤šæ•°äººå› ä¸ºæ€•éº»çƒ¦è€Œæ”¾å¼ƒé€€æ¬¾ã€‚</p><h3 id="å‡ å—é’±ï¼Œå€¼å¾—å¦‚æ­¤å¤§åŠ¨å¹²æˆˆå—ï¼Ÿ"><a href="#å‡ å—é’±ï¼Œå€¼å¾—å¦‚æ­¤å¤§åŠ¨å¹²æˆˆå—ï¼Ÿ" class="headerlink" title="å‡ å—é’±ï¼Œå€¼å¾—å¦‚æ­¤å¤§åŠ¨å¹²æˆˆå—ï¼Ÿ"></a><strong>å‡ å—é’±ï¼Œå€¼å¾—å¦‚æ­¤å¤§åŠ¨å¹²æˆˆå—ï¼Ÿ</strong></h3><p>æˆ–è®¸æœ‰äººä¼šè¯´ï¼šâ€œç”¨äº†ä¸¤å¹´å…è´¹æœåŠ¡ï¼Œå‡ å—é’±è¿˜è¦é€€ï¼Ÿâ€</p><p>ä½†é—®é¢˜ä¸åœ¨äºé‡‘é¢å¤§å°ï¼Œè€Œåœ¨äº<strong>åŸåˆ™</strong>ã€‚ç”¨æˆ·é€‰æ‹©å…è´¹æœåŠ¡ï¼Œæ˜¯å»ºç«‹åœ¨éµå®ˆå¹³å°è§„åˆ™çš„åŸºç¡€ä¸Šï¼Œè€Œä¸æ˜¯â€œé»˜è®¤æ”¾å¼ƒä½™é¢â€ã€‚æ—¢ç„¶ä½™é¢å±äºç”¨æˆ·ï¼Œå¹³å°å°±æœ‰ä¹‰åŠ¡æä¾›åˆç†çš„é€€æ¬¾æ¸ é“ã€‚ç”¨é«˜é—¨æ§›é˜»æŒ¡ç”¨æˆ·å–å›è‡ªå·±çš„é’±ï¼Œæœ¬è´¨ä¸Šæ˜¯å¯¹ç”¨æˆ·æƒç›Šçš„æ¼ è§†ã€‚</p><h3 id="ç”¨æˆ·ä½“éªŒï¼Œä¸åº”æ­¢äºâ€œæ”¶è´¹å‰â€"><a href="#ç”¨æˆ·ä½“éªŒï¼Œä¸åº”æ­¢äºâ€œæ”¶è´¹å‰â€" class="headerlink" title="ç”¨æˆ·ä½“éªŒï¼Œä¸åº”æ­¢äºâ€œæ”¶è´¹å‰â€"></a><strong>ç”¨æˆ·ä½“éªŒï¼Œä¸åº”æ­¢äºâ€œæ”¶è´¹å‰â€</strong></h3><p>ä¸€å®¶ä¼ä¸šçš„æœåŠ¡å“è´¨ï¼Œä¸ä»…ä½“ç°åœ¨ç”¨æˆ·ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæ›´ä½“ç°åœ¨ç”¨æˆ·ç¦»å¼€æ—¶çš„ä½“éªŒã€‚åˆæ‹äº‘åœ¨æ¨å¹¿æœŸæä¾›ä¾¿åˆ©çš„å……å€¼å…¥å£ï¼Œè€Œåœ¨é€€æ¬¾æ—¶å´è®¾ç½®é‡é‡éšœç¢ï¼Œè¿™ç§â€œå‰åä¸ä¸€â€çš„åšæ³•ï¼Œæ— ç–‘ä¼šæŸè€—ç”¨æˆ·çš„ä¿¡ä»»ã€‚</p><p>æˆ‘ä»¬å¸Œæœ›åˆæ‹äº‘èƒ½å¤Ÿåæ€å½“å‰çš„é€€æ¬¾æµç¨‹ï¼šç®€åŒ–æ­¥éª¤ã€ä¿æŠ¤ç”¨æˆ·éšç§ã€æå‡å¤„ç†æ•ˆç‡ï¼Œè®©ç”¨æˆ·çš„å‘Šåˆ«ä¹Ÿèƒ½ä½“é¢è€Œé¡ºç•…ã€‚</p><hr><p><strong>ç”¨æˆ·çš„é’±ï¼Œæ— è®ºå¤šå°‘ï¼Œéƒ½å€¼å¾—è¢«å°Šé‡ã€‚</strong><br><strong>ä¼ä¸šçš„å£ç¢‘ï¼Œæ°æ°è—åœ¨é‚£äº›å®¹æ˜“è¢«å¿½ç•¥çš„ç»†èŠ‚é‡Œã€‚</strong></p><h3 id="é™„ä»¶"><a href="#é™„ä»¶" class="headerlink" title="é™„ä»¶"></a>é™„ä»¶</h3><p><img src="https://s2.loli.net/2025/12/02/E9KtSgNc4LFq3oM.jpg" alt="_20251202145659_24_3.jpg"></p><h3 id="æœ€ç»ˆç»“æœ"><a href="#æœ€ç»ˆç»“æœ" class="headerlink" title="æœ€ç»ˆç»“æœ"></a>æœ€ç»ˆç»“æœ</h3><p><a href="/article/90947add.html">åˆæ‹äº‘æ³¨é”€è´¦å·é€€æ¬¾ç»“æœ</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ€è¿‘å†³å®šå°†ä¸ªäººåšå®¢çš„åŠ é€ŸæœåŠ¡ä»åˆæ‹äº‘åˆ‡æ¢åˆ°å…¶ä»–å¹³å°ï¼Œæœ¬ä»¥ä¸ºæ³¨é”€è´¦å·ã€å–å›ä½™é¢æ˜¯ä¸€ä¸ªç®€å•çš„æµç¨‹ï¼Œå´æ²¡æƒ³åˆ°ï¼Œè¿™ç«Ÿæˆäº†ä¸€åœºä»¤äººå€æ„Ÿâ€œæ¶å¿ƒâ€çš„æ‹‰é”¯æˆ˜ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="åˆæ‹äº‘" scheme="https://xuehuayu.cn/categories/%E5%8F%88%E6%8B%8D%E4%BA%91/"/>
    
    
    <category term="åˆæ‹äº‘" scheme="https://xuehuayu.cn/tags/%E5%8F%88%E6%8B%8D%E4%BA%91/"/>
    
    <category term="æ³¨é”€" scheme="https://xuehuayu.cn/tags/%E6%B3%A8%E9%94%80/"/>
    
  </entry>
  
  <entry>
    <title>æœ¬ç«™å·²å…¨é¢æ¥å…¥è…¾è®¯edgeone</title>
    <link href="https://xuehuayu.cn/article/87ba5860.html"/>
    <id>https://xuehuayu.cn/article/87ba5860.html</id>
    <published>2025-11-24T14:30:21.000Z</published>
    <updated>2025-12-13T16:23:58.685Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬ç«™å·²å…¨é¢æ¥å…¥è…¾è®¯edgeoneï¼Œå›½å†…å»¶è¿Ÿåœ¨50msä»¥å†…ã€‚</p><span id="more"></span><p>æœ¬ç«™ä»£ç åœ¨githubï¼Œé™æ€æœåŠ¡æ‰˜ç®¡åœ¨ cloudflare å’Œ vercelï¼Œ<br><a href="https://www.xuehuayu.cn/">xuehuayu.cn</a>ç°åœ¨å·²å…¨é¢æ¥å…¥è…¾è®¯edgeoneå›½å†…ç‰ˆï¼Œå›½å†…å»¶è¿Ÿåœ¨50msä»¥å†…ã€‚<br><a href="https://www.cainiaoblog.cn/">cainiaoblog.cn</a>ç°åœ¨å·²å…¨é¢æ¥å…¥è…¾è®¯edgeoneå›½é™…ç‰ˆã€‚</p><p>å¦‚æœä½ åœ¨é…ç½®è¿‡ç¨‹ä¸­æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·åœ¨ä¸‹æ–¹ç•™è¨€ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ¬ç«™å·²å…¨é¢æ¥å…¥è…¾è®¯edgeoneï¼Œå›½å†…å»¶è¿Ÿåœ¨50msä»¥å†…ã€‚&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ Vercel + Upstash Redis æ­å»ºè‡ªå·±çš„åŠ é€Ÿç¼“å­˜æœåŠ¡</title>
    <link href="https://xuehuayu.cn/article/68c9c2c2.html"/>
    <id>https://xuehuayu.cn/article/68c9c2c2.html</id>
    <published>2025-11-21T10:57:00.000Z</published>
    <updated>2025-12-13T16:23:58.684Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ç°ä»£ Web å¼€å‘ä¸­ï¼Œæ€§èƒ½ä¼˜åŒ–è‡³å…³é‡è¦ã€‚ç¼“å­˜æ˜¯æå‡åº”ç”¨å“åº”é€Ÿåº¦ã€é™ä½åç«¯è´Ÿè½½çš„å¸¸ç”¨æ‰‹æ®µã€‚ç„¶è€Œï¼Œä¼ ç»Ÿç¼“å­˜æ–¹æ¡ˆï¼ˆå¦‚è‡ªå»º Redis æœåŠ¡å™¨ï¼‰å¾€å¾€éœ€è¦è¿ç»´æˆæœ¬å’Œå¤æ‚çš„éƒ¨ç½²æµç¨‹ã€‚<br>æœ¬æ–‡å°†å¸¦ä½ ä½¿ç”¨ <strong>Vercel</strong> å’Œ <strong>Upstash Redis</strong> å¿«é€Ÿæ­å»ºä¸€ä¸ªè½»é‡ã€æ— æœåŠ¡å™¨ï¼ˆServerlessï¼‰çš„åŠ é€Ÿç¼“å­˜æœåŠ¡ï¼Œé€‚ç”¨äº API å“åº”ç¼“å­˜ã€é¡µé¢é™æ€åŒ–ã€ç”¨æˆ·ä¼šè¯å­˜å‚¨ç­‰åœºæ™¯ã€‚</p><span id="more"></span><hr><h2 id="ä¸ºä»€ä¹ˆé€‰æ‹©-Vercel-Upstashï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆé€‰æ‹©-Vercel-Upstashï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆé€‰æ‹© Vercel + Upstashï¼Ÿ"></a>ä¸ºä»€ä¹ˆé€‰æ‹© Vercel + Upstashï¼Ÿ</h2><ul><li><strong>Vercel</strong>ï¼šé¢†å…ˆçš„å‰ç«¯éƒ¨ç½²å¹³å°ï¼Œæ”¯æŒ Serverless Functionsã€Edge Functionsï¼Œè‡ªåŠ¨å…¨çƒ CDN åŠ é€Ÿã€‚</li><li><strong>Upstash Redis</strong>ï¼šä¸“ä¸º Serverless æ¶æ„è®¾è®¡çš„ Redis æœåŠ¡ï¼ŒæŒ‰è¯·æ±‚è®¡è´¹ã€ä½å»¶è¿Ÿã€æ— éœ€ç®¡ç†è¿æ¥æ± ï¼Œå®Œç¾é€‚é… Vercel çš„æ— çŠ¶æ€å‡½æ•°æ¨¡å‹ã€‚</li></ul><p>ä¸¤è€…ç»“åˆï¼Œå¯ä»¥å®ç°â€œé›¶è¿ç»´ã€é«˜å¯ç”¨ã€å…¨çƒä½å»¶è¿Ÿâ€çš„ç¼“å­˜æœåŠ¡ã€‚</p><hr><h2 id="ç¬¬ä¸€æ­¥ï¼šåˆ›å»º-Upstash-Redis-æ•°æ®åº“"><a href="#ç¬¬ä¸€æ­¥ï¼šåˆ›å»º-Upstash-Redis-æ•°æ®åº“" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šåˆ›å»º Upstash Redis æ•°æ®åº“"></a>ç¬¬ä¸€æ­¥ï¼šåˆ›å»º Upstash Redis æ•°æ®åº“</h2><ol><li>è®¿é—® <a href="https://upstash.com/">https://upstash.com</a> å¹¶æ³¨å†Œè´¦å·ã€‚</li><li>è¿›å…¥æ§åˆ¶å°ï¼Œç‚¹å‡» <strong>Create Database</strong>ã€‚</li><li>é€‰æ‹©åŒºåŸŸï¼ˆå»ºè®®é€‰ç¦»ä½ ç”¨æˆ·æœ€è¿‘çš„ï¼Œæˆ–ä½¿ç”¨ Global Database å®ç°å¤šåŒºåŸŸåŒæ­¥ï¼‰ã€‚</li><li>åˆ›å»ºå®Œæˆåï¼Œä½ ä¼šè·å¾—ï¼š<ul><li><strong>REST URL</strong></li><li><strong>Token</strong>ï¼ˆç”¨äºè®¤è¯ï¼‰</li></ul></li></ol><blockquote><p>âš ï¸ æ³¨æ„ï¼šUpstash æä¾› REST API æ¥å£è®¿é—® Redisï¼Œéå¸¸é€‚åˆ Serverless ç¯å¢ƒï¼Œé¿å…äº† TCP è¿æ¥æ± é—®é¢˜ã€‚</p></blockquote><hr><h2 id="ç¬¬äºŒæ­¥ï¼šåœ¨-Vercel-ä¸­è®¾ç½®ç¯å¢ƒå˜é‡"><a href="#ç¬¬äºŒæ­¥ï¼šåœ¨-Vercel-ä¸­è®¾ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šåœ¨ Vercel ä¸­è®¾ç½®ç¯å¢ƒå˜é‡"></a>ç¬¬äºŒæ­¥ï¼šåœ¨ Vercel ä¸­è®¾ç½®ç¯å¢ƒå˜é‡</h2><p>è¿›å…¥ä½ çš„ Vercel é¡¹ç›® â†’ Settings â†’ Environment Variablesï¼Œæ·»åŠ ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UPSTASH_REDIS_REST_URL = https://xxxxx.upstash.io</span><br><span class="line">UPSTASH_REDIS_REST_TOKEN = your-token-here</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç¡®ä¿è¿™äº›å˜é‡åœ¨éƒ¨ç½²æ—¶å¯ç”¨ã€‚</p><hr><h2 id="ç¬¬ä¸‰æ­¥ï¼šç¼–å†™ç¼“å­˜é€»è¾‘ï¼ˆNode-js-ç¤ºä¾‹ï¼‰"><a href="#ç¬¬ä¸‰æ­¥ï¼šç¼–å†™ç¼“å­˜é€»è¾‘ï¼ˆNode-js-ç¤ºä¾‹ï¼‰" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šç¼–å†™ç¼“å­˜é€»è¾‘ï¼ˆNode.js ç¤ºä¾‹ï¼‰"></a>ç¬¬ä¸‰æ­¥ï¼šç¼–å†™ç¼“å­˜é€»è¾‘ï¼ˆNode.js ç¤ºä¾‹ï¼‰</h2><p>æˆ‘ä»¬ä»¥ä¸€ä¸ªç®€å•çš„ API è·¯ç”±ä¸ºä¾‹ï¼šç¼“å­˜ GitHub ç”¨æˆ·ä¿¡æ¯ã€‚</p><h3 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install @upstash/redis</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="åˆ›å»º-API-è·¯ç”±ï¼ˆpages-api-user-username-jsï¼‰"><a href="#åˆ›å»º-API-è·¯ç”±ï¼ˆpages-api-user-username-jsï¼‰" class="headerlink" title="åˆ›å»º API è·¯ç”±ï¼ˆpages/api/user/[username].jsï¼‰"></a>åˆ›å»º API è·¯ç”±ï¼ˆ<code>pages/api/user/[username].js</code>ï¼‰</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Redis</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@upstash/redis&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> redis = <span class="keyword">new</span> <span class="title class_">Redis</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: process.<span class="property">env</span>.<span class="property">UPSTASH_REDIS_REST_URL</span>,</span><br><span class="line">  <span class="attr">token</span>: process.<span class="property">env</span>.<span class="property">UPSTASH_REDIS_REST_TOKEN</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">handler</span>(<span class="params">req, res</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; username &#125; = req.<span class="property">query</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å°è¯•ä»ç¼“å­˜è¯»å–</span></span><br><span class="line">  <span class="keyword">const</span> cached = <span class="keyword">await</span> redis.<span class="title function_">get</span>(<span class="string">`user:<span class="subst">$&#123;username&#125;</span>`</span>);</span><br><span class="line">  <span class="keyword">if</span> (cached) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Cache hit&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">200</span>).<span class="title function_">json</span>(&#123; <span class="attr">source</span>: <span class="string">&#x27;cache&#x27;</span>, <span class="attr">data</span>: cached &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç¼“å­˜æœªå‘½ä¸­ï¼Œè¯·æ±‚ GitHub API</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Cache miss, fetching from GitHub&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> githubRes = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`https://api.github.com/users/<span class="subst">$&#123;username&#125;</span>`</span>);</span><br><span class="line">  <span class="keyword">const</span> userData = <span class="keyword">await</span> githubRes.<span class="title function_">json</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!githubRes.<span class="property">ok</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> res.<span class="title function_">status</span>(githubRes.<span class="property">status</span>).<span class="title function_">json</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;User not found&#x27;</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å†™å…¥ç¼“å­˜ï¼Œæœ‰æ•ˆæœŸ 5 åˆ†é’Ÿ</span></span><br><span class="line">  <span class="keyword">await</span> redis.<span class="title function_">setex</span>(<span class="string">`user:<span class="subst">$&#123;username&#125;</span>`</span>, <span class="number">300</span>, userData);</span><br><span class="line"></span><br><span class="line">  res.<span class="title function_">status</span>(<span class="number">200</span>).<span class="title function_">json</span>(&#123; <span class="attr">source</span>: <span class="string">&#x27;github&#x27;</span>, <span class="attr">data</span>: userData &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="ç¬¬å››æ­¥ï¼šéƒ¨ç½²åˆ°-Vercel"><a href="#ç¬¬å››æ­¥ï¼šéƒ¨ç½²åˆ°-Vercel" class="headerlink" title="ç¬¬å››æ­¥ï¼šéƒ¨ç½²åˆ° Vercel"></a>ç¬¬å››æ­¥ï¼šéƒ¨ç½²åˆ° Vercel</h2><p>åªéœ€ <code>git push</code> åˆ°å…³è”çš„ä»“åº“ï¼ŒVercel ä¼šè‡ªåŠ¨æ„å»ºå¹¶éƒ¨ç½²ã€‚</p><p>æµ‹è¯•æ¥å£ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET https://your-app.vercel.app/api/user/octocat</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é¦–æ¬¡è®¿é—®ä¼šè°ƒç”¨ GitHub API å¹¶ç¼“å­˜ç»“æœï¼›åç»­ 5 åˆ†é’Ÿå†…è®¿é—®å°†ç›´æ¥è¿”å›ç¼“å­˜æ•°æ®ã€‚</p><hr><h2 id="è¿›é˜¶æŠ€å·§"><a href="#è¿›é˜¶æŠ€å·§" class="headerlink" title="è¿›é˜¶æŠ€å·§"></a>è¿›é˜¶æŠ€å·§</h2><h3 id="1-ä½¿ç”¨-Edge-Functions-é™ä½å»¶è¿Ÿ"><a href="#1-ä½¿ç”¨-Edge-Functions-é™ä½å»¶è¿Ÿ" class="headerlink" title="1. ä½¿ç”¨ Edge Functions é™ä½å»¶è¿Ÿ"></a>1. ä½¿ç”¨ Edge Functions é™ä½å»¶è¿Ÿ</h3><p>Vercel çš„ Edge Functions è¿è¡Œåœ¨å…¨çƒè¾¹ç¼˜èŠ‚ç‚¹ï¼Œé…åˆ Upstash çš„å…¨çƒæ•°æ®åº“ï¼Œå¯å®ç°æ¯«ç§’çº§å“åº”ã€‚</p><p>åªéœ€å°†æ–‡ä»¶æ”¾åœ¨ <code>app/api/.../route.ts</code>ï¼ˆNext.js App Routerï¼‰ï¼Œå¹¶å¯¼å‡º <code>runtime: &#39;edge&#39;</code>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> runtime = <span class="string">&#x27;edge&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">GET</span>(<span class="params">request: Request, &#123; params &#125;: &#123; params: &#123; username: <span class="built_in">string</span> &#125; &#125;</span>) &#123;</span><br><span class="line">  <span class="comment">// åŒä¸Šé€»è¾‘ï¼Œä½†è¿è¡Œåœ¨è¾¹ç¼˜</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-ç¼“å­˜ç­–ç•¥ä¼˜åŒ–"><a href="#2-ç¼“å­˜ç­–ç•¥ä¼˜åŒ–" class="headerlink" title="2. ç¼“å­˜ç­–ç•¥ä¼˜åŒ–"></a>2. ç¼“å­˜ç­–ç•¥ä¼˜åŒ–</h3><ul><li>å¯¹é¢‘ç¹å˜åŒ–çš„æ•°æ®ï¼šç¼©çŸ­ TTLï¼ˆå¦‚ 60 ç§’ï¼‰</li><li>å¯¹é™æ€å†…å®¹ï¼šå»¶é•¿ TTLï¼ˆå¦‚ 1 å°æ—¶ï¼‰</li><li>ä½¿ç”¨ <code>redis.del()</code> ä¸»åŠ¨å¤±æ•ˆç¼“å­˜ï¼ˆå¦‚ç”¨æˆ·æ›´æ–°èµ„æ–™åï¼‰</li></ul><h3 id="3-ç›‘æ§ä¸æˆæœ¬æ§åˆ¶"><a href="#3-ç›‘æ§ä¸æˆæœ¬æ§åˆ¶" class="headerlink" title="3. ç›‘æ§ä¸æˆæœ¬æ§åˆ¶"></a>3. ç›‘æ§ä¸æˆæœ¬æ§åˆ¶</h3><p>Upstash æŒ‰è¯·æ±‚æ¬¡æ•°è®¡è´¹ï¼ˆå…è´¹é¢åº¦è¶³å¤Ÿä¸ªäººé¡¹ç›®ï¼‰ã€‚å¯åœ¨æ§åˆ¶å°æŸ¥çœ‹ç”¨é‡ï¼Œè®¾ç½®è­¦æŠ¥ã€‚</p><hr><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é€šè¿‡ <strong>Vercel + Upstash Redis</strong>ï¼Œæˆ‘ä»¬ä»…ç”¨å‡ åè¡Œä»£ç å°±æ­å»ºäº†ä¸€ä¸ªé«˜æ€§èƒ½ã€å…¨çƒåˆ†å¸ƒçš„ç¼“å­˜æœåŠ¡ã€‚è¿™ç§ç»„åˆç‰¹åˆ«é€‚åˆï¼š</p><ul><li>Next.js &#x2F; Nuxt ç­‰ç°ä»£æ¡†æ¶é¡¹ç›®</li><li>éœ€è¦ç¼“å­˜ç¬¬ä¸‰æ–¹ API å“åº”çš„åœºæ™¯</li><li>æ— æœåŠ¡å™¨æ¶æ„ä¸‹çš„çŠ¶æ€å…±äº«ï¼ˆå¦‚é™æµã€ä¼šè¯ï¼‰</li></ul><p>æ— éœ€æ‹…å¿ƒ Redis è¿æ¥ã€æ‰©å®¹ã€å¤‡ä»½ç­‰é—®é¢˜ï¼ŒçœŸæ­£å®ç°â€œä¸“æ³¨ä¸šåŠ¡ï¼Œç¼“å­˜æ— å¿§â€ã€‚</p><hr><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ul><li>Upstash Redis: <a href="https://upstash.com/redis">https://upstash.com/redis</a></li><li>Vercel æ–‡æ¡£: <a href="https://vercel.com/docs">https://vercel.com/docs</a></li><li>@upstash&#x2F;redis SDK: <a href="https://github.com/upstash/upstash-redis">https://github.com/upstash/upstash-redis</a></li></ul><p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµã€åˆ†äº«ï¼Œæˆ–åœ¨è¯„è®ºåŒºç•™ä¸‹ä½ çš„å®è·µå¿ƒå¾—ï¼</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨ç°ä»£ Web å¼€å‘ä¸­ï¼Œæ€§èƒ½ä¼˜åŒ–è‡³å…³é‡è¦ã€‚ç¼“å­˜æ˜¯æå‡åº”ç”¨å“åº”é€Ÿåº¦ã€é™ä½åç«¯è´Ÿè½½çš„å¸¸ç”¨æ‰‹æ®µã€‚ç„¶è€Œï¼Œä¼ ç»Ÿç¼“å­˜æ–¹æ¡ˆï¼ˆå¦‚è‡ªå»º Redis æœåŠ¡å™¨ï¼‰å¾€å¾€éœ€è¦è¿ç»´æˆæœ¬å’Œå¤æ‚çš„éƒ¨ç½²æµç¨‹ã€‚&lt;br&gt;æœ¬æ–‡å°†å¸¦ä½ ä½¿ç”¨ &lt;strong&gt;Vercel&lt;/strong&gt; å’Œ &lt;strong&gt;Upstash Redis&lt;/strong&gt; å¿«é€Ÿæ­å»ºä¸€ä¸ªè½»é‡ã€æ— æœåŠ¡å™¨ï¼ˆServerlessï¼‰çš„åŠ é€Ÿç¼“å­˜æœåŠ¡ï¼Œé€‚ç”¨äº API å“åº”ç¼“å­˜ã€é¡µé¢é™æ€åŒ–ã€ç”¨æˆ·ä¼šè¯å­˜å‚¨ç­‰åœºæ™¯ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="Frontend" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/Frontend/"/>
    
    <category term="Redis" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/Frontend/Redis/"/>
    
    <category term="Vercel" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/Frontend/Redis/Vercel/"/>
    
    
    <category term="Vercel" scheme="https://xuehuayu.cn/tags/Vercel/"/>
    
    <category term="Redis" scheme="https://xuehuayu.cn/tags/Redis/"/>
    
    <category term="Serverless" scheme="https://xuehuayu.cn/tags/Serverless/"/>
    
    <category term="ç¼“å­˜" scheme="https://xuehuayu.cn/tags/%E7%BC%93%E5%AD%98/"/>
    
    <category term="æ€§èƒ½ä¼˜åŒ–" scheme="https://xuehuayu.cn/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>è´¦å·è¢«å°äº†ï¼Ÿè¢«æ‹…å¿ƒï¼Œä¸æ˜¯ï¼æ˜¯Cloudflareå´©äº†ï¼</title>
    <link href="https://xuehuayu.cn/article/46124b4e.html"/>
    <id>https://xuehuayu.cn/article/46124b4e.html</id>
    <published>2025-11-18T19:53:35.000Z</published>
    <updated>2025-12-13T16:23:58.683Z</updated>
    
    <content type="html"><![CDATA[<p>è´¦å·è¢«å°äº†ï¼Ÿè¢«æ‹…å¿ƒï¼Œä¸æ˜¯ï¼æ˜¯Cloudflareå´©äº†ï¼</p><span id="more"></span><p>åˆ«æ‹…å¿ƒï¼Œä¸æ˜¯ä½ çš„è´¦å·è¢«å°äº†ã€‚<br>æ˜¯çš„ï¼Œå…¨çƒ 50% çš„ç½‘ç«™ä¸èƒ½è®¿é—®äº†ã€‚2025å¹´11æœˆ18æ—¥Cloudflareå‘ç”Ÿäº†å…¨çƒæ€§çš„æŠ€æœ¯æ•…éšœã€‚</p><p>æ­¤æ¬¡æ•…éšœå¤§çº¦å§‹äºè‹±å›½æ—¶é—´ä¸Šåˆ11ç‚¹30åˆ†ï¼ˆä¸–ç•Œåè°ƒæ—¶é—´11:30å·¦å³ï¼‰ï¼Œå¯¼è‡´å¤§é‡ä¾èµ–å…¶æœåŠ¡çš„ç½‘ç«™å’Œå¹³å°è®¿é—®å¼‚å¸¸ï¼Œåƒç¤¾äº¤å¹³å°Xï¼ˆåŸTwitterï¼‰ã€OpenAIçš„ChatGPTç­‰éƒ½å‡ºç°äº†é¡µé¢æ— æ³•åŠ è½½çš„æƒ…å†µï¼Œç”¨æˆ·æ™®éæ”¶åˆ°â€œCloudflareç½‘ç»œå†…éƒ¨æœåŠ¡å™¨é”™è¯¯â€æç¤ºï¼Œä¸å°‘ç½‘ç«™è¿˜æŠ¥å‡º500é”™è¯¯ã€‚å°±è¿ç›‘æµ‹ç½‘ç»œä¸­æ–­çš„Down Detectorç½‘ç«™ä¹Ÿå—æ­¤æ³¢åŠï¼ŒçŸ­æš‚æ— æ³•æ­£å¸¸åŠ è½½ã€‚</p><p>Cloudflareåœ¨æ•…éšœå‘ç”Ÿçº¦15åˆ†é’Ÿåå‘å¸ƒé¦–æ¬¡é€šå‘Šï¼Œç¡®è®¤é—®é¢˜å¹¶å±•å¼€è°ƒæŸ¥ï¼Œåç»­åˆæ›´æ–°å£°æ˜ç§°ä»åœ¨è°ƒæŸ¥ä¸­ï¼Œæš‚æœªæ‰¾åˆ°æ•…éšœæ ¹æºä¸è§£å†³åŠæ³•ï¼Œåç»­ä¼šå…¬å¸ƒæ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚</p><p>æˆªè‡³ åŒ—äº¬æ—¶é—´ 2025å¹´11æœˆ18æ—¥21ç‚¹42åˆ†ï¼ŒCloudflareå·²æ¢å¤æœåŠ¡ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;è´¦å·è¢«å°äº†ï¼Ÿè¢«æ‹…å¿ƒï¼Œä¸æ˜¯ï¼æ˜¯Cloudflareå´©äº†ï¼&lt;/p&gt;</summary>
    
    
    
    <category term="CDN" scheme="https://xuehuayu.cn/categories/CDN/"/>
    
    <category term="ç½‘ç«™" scheme="https://xuehuayu.cn/categories/CDN/%E7%BD%91%E7%AB%99/"/>
    
    
    <category term="Cloudflare" scheme="https://xuehuayu.cn/tags/Cloudflare/"/>
    
  </entry>
  
  <entry>
    <title>é¢„è§ˆimgå›¾ç‰‡æ–‡ä»¶pdfæ–‡ä»¶å¦‚ä½•é‰´æƒé…ç½®è¯·æ±‚å¤´token</title>
    <link href="https://xuehuayu.cn/article/de24b120.html"/>
    <id>https://xuehuayu.cn/article/de24b120.html</id>
    <published>2025-11-16T15:35:10.000Z</published>
    <updated>2025-12-13T16:23:58.682Z</updated>
    
    <content type="html"><![CDATA[<p>å¦‚ä½•åœ¨å‰ç«¯ä¸º <code>&lt;img&gt;</code> å’Œ PDF èµ„æºè¯·æ±‚æ·»åŠ è‡ªå®šä¹‰è¯·æ±‚å¤´</p><p>åœ¨ç°ä»£ Web å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åŠ è½½å—æƒé™ä¿æŠ¤çš„èµ„æºï¼Œæ¯”å¦‚å¸¦æœ‰èº«ä»½è®¤è¯ï¼ˆå¦‚ Bearer Tokenï¼‰çš„å›¾ç‰‡æˆ– PDF æ–‡ä»¶ã€‚ç„¶è€Œï¼Œæ ‡å‡† HTML ä¸­çš„ <code>&lt;img&gt;</code> æ ‡ç­¾ã€<code>&lt;iframe&gt;</code> æˆ– <code>&lt;object&gt;</code> ç­‰å…ƒç´ <strong>æ— æ³•ç›´æ¥é…ç½® HTTP è¯·æ±‚å¤´</strong>ã€‚è¿™æ„å‘³ç€ä½ ä¸èƒ½åƒä½¿ç”¨ <code>fetch</code> é‚£æ ·ï¼Œåœ¨æ ‡ç­¾å±‚é¢ä¼ é€’ <code>Authorization</code>ã€<code>X-API-Key</code> ç­‰å¤´éƒ¨ä¿¡æ¯ã€‚</p><p>ä½†è¿™å¹¶ä¸æ„å‘³ç€æ— è§£ï¼æœ¬æ–‡å°†ä¸ºä½ è¯¦ç»†æ‹†è§£å¦‚ä½•é€šè¿‡â€œæ›²çº¿æ•‘å›½â€çš„æ–¹å¼â€”â€”å…ˆç”¨ JavaScript è·å–å—ä¿æŠ¤èµ„æºï¼Œå†å°†å…¶è½¬æ¢ä¸ºå¯åµŒå…¥é¡µé¢çš„æ•°æ® URL æˆ– Blob URLï¼Œä»è€Œå®ç°å¸¦è¯·æ±‚å¤´åŠ è½½å›¾ç‰‡å’Œ PDF çš„éœ€æ±‚ã€‚</p><hr><h2 id="ä¸€ã€ä¸ºä»€ä¹ˆ-ä¸èƒ½è®¾ç½®è¯·æ±‚å¤´ï¼Ÿ"><a href="#ä¸€ã€ä¸ºä»€ä¹ˆ-ä¸èƒ½è®¾ç½®è¯·æ±‚å¤´ï¼Ÿ" class="headerlink" title="ä¸€ã€ä¸ºä»€ä¹ˆ &lt;img&gt; ä¸èƒ½è®¾ç½®è¯·æ±‚å¤´ï¼Ÿ"></a>ä¸€ã€ä¸ºä»€ä¹ˆ <code>&lt;img&gt;</code> ä¸èƒ½è®¾ç½®è¯·æ±‚å¤´ï¼Ÿ</h2><p>HTML åŸç”Ÿæ ‡ç­¾ï¼ˆå¦‚ <code>&lt;img src=&quot;...&quot;&gt;</code>ï¼‰å‘èµ·çš„è¯·æ±‚æ˜¯ç”±æµè§ˆå™¨è‡ªåŠ¨å¤„ç†çš„ï¼Œå¼€å‘è€…æ— æ³•å¹²é¢„å…¶è¯·æ±‚å¤´ã€‚è¿™æ˜¯å‡ºäºå®‰å…¨å’Œç®€æ´æ€§çš„è®¾è®¡è€ƒé‡ã€‚å› æ­¤ï¼Œè‹¥æœåŠ¡å™¨è¦æ±‚ç‰¹å®šè¯·æ±‚å¤´ï¼ˆå¦‚ JWT Tokenï¼‰ï¼Œç›´æ¥ä½¿ç”¨ <code>&lt;img&gt;</code> å°†å¯¼è‡´ 401&#x2F;403 é”™è¯¯ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆçš„æ ¸å¿ƒæ€è·¯</strong>ï¼š</p><blockquote><p>ä½¿ç”¨ <code>fetch</code> æˆ– <code>XMLHttpRequest</code> æ‰‹åŠ¨å‘èµ·å¸¦è¯·æ±‚å¤´çš„è¯·æ±‚ â†’ è·å–äºŒè¿›åˆ¶æ•°æ® â†’ è½¬æ¢ä¸º <code>Blob URL</code> â†’ èµ‹å€¼ç»™ <code>&lt;img&gt;</code> æˆ– <code>&lt;iframe&gt;</code> çš„ <code>src</code>ã€‚</p></blockquote><hr><h2 id="äºŒã€åŠ è½½å¸¦è®¤è¯å¤´çš„å›¾ç‰‡"><a href="#äºŒã€åŠ è½½å¸¦è®¤è¯å¤´çš„å›¾ç‰‡" class="headerlink" title="äºŒã€åŠ è½½å¸¦è®¤è¯å¤´çš„å›¾ç‰‡"></a>äºŒã€åŠ è½½å¸¦è®¤è¯å¤´çš„å›¾ç‰‡</h2><h3 id="å®ç°æ­¥éª¤"><a href="#å®ç°æ­¥éª¤" class="headerlink" title="å®ç°æ­¥éª¤"></a>å®ç°æ­¥éª¤</h3><ol><li>ä½¿ç”¨ <code>fetch</code> è¯·æ±‚å›¾ç‰‡èµ„æºï¼Œå¹¶åœ¨ <code>headers</code> ä¸­æ·»åŠ è®¤è¯ä¿¡æ¯ï¼›</li><li>å°†å“åº”è½¬ä¸º <code>Blob</code> å¯¹è±¡ï¼›</li><li>é€šè¿‡ <code>URL.createObjectURL(blob)</code> ç”Ÿæˆæœ¬åœ° URLï¼›</li><li>å°†è¯¥ URL èµ‹ç»™ <code>&lt;img&gt;</code> çš„ <code>src</code> å±æ€§ï¼›</li><li>å›¾ç‰‡åŠ è½½å®Œæˆåï¼Œè°ƒç”¨ <code>URL.revokeObjectURL()</code> é‡Šæ”¾å†…å­˜ã€‚</li></ol><h3 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">loadImageWithAuth</span>(<span class="params">url, token, imgElement</span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(url, &#123;</span><br><span class="line">      <span class="attr">headers</span>: &#123;</span><br><span class="line">        <span class="title class_">Authorization</span>: <span class="string">&#x27;Bearer &#x27;</span> + token</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!res.<span class="property">ok</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Failed to load image&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> blob = <span class="keyword">await</span> res.<span class="title function_">blob</span>();</span><br><span class="line">    <span class="keyword">const</span> objectUrl = <span class="variable constant_">URL</span>.<span class="title function_">createObjectURL</span>(blob);</span><br><span class="line"></span><br><span class="line">    imgElement.<span class="property">src</span> = objectUrl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¸…ç†å†…å­˜ï¼šå›¾ç‰‡åŠ è½½å®Œæˆåé‡Šæ”¾ Blob URL</span></span><br><span class="line">    imgElement.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable constant_">URL</span>.<span class="title function_">revokeObjectURL</span>(objectUrl);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error loading image:&#x27;</span>, error);</span><br><span class="line">    imgElement.<span class="property">src</span> = <span class="string">&#x27;&#x27;</span>; <span class="comment">// å¯é€‰ï¼šæ˜¾ç¤ºå ä½å›¾æˆ–é”™è¯¯æç¤º</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> img = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;protected-image&#x27;</span>);</span><br><span class="line"><span class="title function_">loadImageWithAuth</span>(<span class="string">&#x27;https://api.example.com/image.jpg&#x27;</span>, <span class="string">&#x27;your-jwt-token&#x27;</span>, img);</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>âœ… <strong>ä¼˜ç‚¹</strong>ï¼šå…¼å®¹æ€§å¥½ï¼ˆç°ä»£æµè§ˆå™¨å‡æ”¯æŒ <code>fetch</code> å’Œ <code>Blob URL</code>ï¼‰ï¼›<br>âš ï¸ <strong>æ³¨æ„</strong>ï¼šé¢‘ç¹åˆ›å»ºæœªé‡Šæ”¾çš„ Blob URL ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼ŒåŠ¡å¿…åœ¨ <code>onload</code> æˆ–ç»„ä»¶é”€æ¯æ—¶è°ƒç”¨ <code>revokeObjectURL</code>ã€‚</p></blockquote><hr><h2 id="ä¸‰ã€åŠ è½½å¸¦è®¤è¯å¤´çš„-PDF-å¹¶åœ¨é¡µé¢é¢„è§ˆ"><a href="#ä¸‰ã€åŠ è½½å¸¦è®¤è¯å¤´çš„-PDF-å¹¶åœ¨é¡µé¢é¢„è§ˆ" class="headerlink" title="ä¸‰ã€åŠ è½½å¸¦è®¤è¯å¤´çš„ PDF å¹¶åœ¨é¡µé¢é¢„è§ˆ"></a>ä¸‰ã€åŠ è½½å¸¦è®¤è¯å¤´çš„ PDF å¹¶åœ¨é¡µé¢é¢„è§ˆ</h2><p>PDF æ–‡ä»¶é€šå¸¸é€šè¿‡ <code>&lt;iframe&gt;</code>ã€<code>&lt;embed&gt;</code> æˆ– PDF.js æ¸²æŸ“ã€‚ä¸å›¾ç‰‡ç±»ä¼¼ï¼Œè¿™äº›æ ‡ç­¾ä¹Ÿæ— æ³•æºå¸¦è¯·æ±‚å¤´ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ç›¸åŒæ€è·¯ï¼šå…ˆè·å– PDF çš„äºŒè¿›åˆ¶æµï¼Œå†ç”Ÿæˆå¯åµŒå…¥çš„ URLã€‚</p><h3 id="å®ç°æ­¥éª¤-1"><a href="#å®ç°æ­¥éª¤-1" class="headerlink" title="å®ç°æ­¥éª¤"></a>å®ç°æ­¥éª¤</h3><ol><li>ç”¨ <code>fetch</code> è·å– PDF èµ„æºï¼ˆå¸¦ <code>Authorization</code> å¤´ï¼‰ï¼›</li><li>è¯»å– <code>response.body</code> çš„ <code>ReadableStream</code>ï¼›</li><li>å°†æµæ•°æ®åˆ†å—æ”¶é›†å¹¶åˆå¹¶ä¸º <code>Blob</code>ï¼›</li><li>åˆ›å»º <code>Blob URL</code> å¹¶èµ‹ç»™ <code>&lt;iframe&gt;</code> çš„ <code>src</code>ã€‚</li></ol><h3 id="ç¤ºä¾‹ä»£ç -1"><a href="#ç¤ºä¾‹ä»£ç -1" class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">loadPdfWithAuth</span>(<span class="params">url, token, iframeElement</span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(url, &#123;</span><br><span class="line">      <span class="attr">headers</span>: &#123;</span><br><span class="line">        <span class="title class_">Authorization</span>: <span class="string">&#x27;Bearer &#x27;</span> + token</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!res.<span class="property">ok</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Failed to load PDF&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> reader = res.<span class="property">body</span>.<span class="title function_">getReader</span>();</span><br><span class="line">    <span class="keyword">const</span> chunks = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; done, value &#125; = <span class="keyword">await</span> reader.<span class="title function_">read</span>();</span><br><span class="line">      <span class="keyword">if</span> (done) <span class="keyword">break</span>;</span><br><span class="line">      chunks.<span class="title function_">push</span>(value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> blob = <span class="keyword">new</span> <span class="title class_">Blob</span>(chunks, &#123; <span class="attr">type</span>: <span class="string">&#x27;application/pdf&#x27;</span> &#125;);</span><br><span class="line">    <span class="keyword">const</span> objectUrl = <span class="variable constant_">URL</span>.<span class="title function_">createObjectURL</span>(blob);</span><br><span class="line"></span><br><span class="line">    iframeElement.<span class="property">src</span> = objectUrl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¸…ç†å†…å­˜</span></span><br><span class="line">    iframeElement.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable constant_">URL</span>.<span class="title function_">revokeObjectURL</span>(objectUrl);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error loading PDF:&#x27;</span>, error);</span><br><span class="line">    iframeElement.<span class="property">src</span> = <span class="string">&#x27;&#x27;</span>; <span class="comment">// æˆ–è·³è½¬åˆ°é”™è¯¯é¡µé¢</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> pdfIframe = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;pdf-preview&#x27;</span>);</span><br><span class="line"><span class="title function_">loadPdfWithAuth</span>(<span class="string">&#x27;https://api.example.com/report.pdf&#x27;</span>, <span class="string">&#x27;your-jwt-token&#x27;</span>, pdfIframe);</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>ğŸ” <strong>æ›¿ä»£æ–¹æ¡ˆ</strong>ï¼šå¦‚æœä½ ä½¿ç”¨ <a href="https://mozilla.github.io/pdf.js/">PDF.js</a>ï¼Œå¯ä»¥ç›´æ¥ä¼ å…¥ <code>Uint8Array</code> æˆ– <code>ArrayBuffer</code>ï¼Œæ— éœ€ç”Ÿæˆ Blob URLï¼Œæ›´çµæ´»ä¸”æ”¯æŒåˆ†é¡µã€ç¼©æ”¾ç­‰é«˜çº§åŠŸèƒ½ã€‚</p></blockquote><hr><h2 id="å››ã€æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ"><a href="#å››ã€æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ" class="headerlink" title="å››ã€æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ"></a>å››ã€æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ</h2><table><thead><tr><th>é¡¹ç›®</th><th>å»ºè®®</th></tr></thead><tbody><tr><td><strong>å†…å­˜ç®¡ç†</strong></td><td>åŠ¡å¿…åœ¨èµ„æºåŠ è½½å®Œæˆåè°ƒç”¨ <code>URL.revokeObjectURL()</code>ï¼Œé¿å…å†…å­˜æ³„æ¼</td></tr><tr><td><strong>é”™è¯¯å¤„ç†</strong></td><td>ç½‘ç»œå¤±è´¥ã€è®¤è¯è¿‡æœŸç­‰æƒ…å†µéœ€æœ‰ç”¨æˆ·å‹å¥½çš„åé¦ˆ</td></tr><tr><td><strong>CORS é—®é¢˜</strong></td><td>ç¡®ä¿åç«¯è®¾ç½®äº†æ­£ç¡®çš„ CORS å¤´ï¼ˆå¦‚ <code>Access-Control-Allow-Origin</code>ï¼‰</td></tr><tr><td><strong>å¤§æ–‡ä»¶æ€§èƒ½</strong></td><td>å¯¹äºè¶…å¤§å›¾ç‰‡&#x2F;PDFï¼Œè€ƒè™‘åˆ†å—åŠ è½½æˆ–æ‡’åŠ è½½ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹</td></tr><tr><td><strong>ç¼“å­˜ç­–ç•¥</strong></td><td><code>fetch</code> é»˜è®¤ä¸èµ°æµè§ˆå™¨ç¼“å­˜ï¼Œå¦‚éœ€ç¼“å­˜å¯é…åˆ <code>Cache API</code> æˆ–æœåŠ¡ç«¯åå•†ç¼“å­˜</td></tr></tbody></table><hr><h2 id="äº”ã€æ€»ç»“"><a href="#äº”ã€æ€»ç»“" class="headerlink" title="äº”ã€æ€»ç»“"></a>äº”ã€æ€»ç»“</h2><p>è™½ç„¶ HTML åŸç”Ÿæ ‡ç­¾æ— æ³•ç›´æ¥è®¾ç½®è¯·æ±‚å¤´ï¼Œä½†å€ŸåŠ©ç°ä»£ Web APIï¼ˆ<code>fetch</code> + <code>Blob</code> + <code>URL.createObjectURL</code>ï¼‰ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥ä¼˜é›…åœ°ç»•è¿‡è¿™ä¸€é™åˆ¶ã€‚æ— è®ºæ˜¯ç§æœ‰å›¾ç‰‡ã€åŠ å¯† PDFï¼Œè¿˜æ˜¯å…¶ä»–äºŒè¿›åˆ¶èµ„æºï¼Œåªè¦èƒ½é€šè¿‡ JavaScript è·å–ï¼Œå°±èƒ½å®‰å…¨åœ°åµŒå…¥é¡µé¢ã€‚</p><blockquote><p><strong>è®°ä½</strong>ï¼šè¿™ä¸æ˜¯ hackï¼Œè€Œæ˜¯æ ‡å‡† Web å¹³å°èƒ½åŠ›çš„åˆç†ç»„åˆã€‚</p></blockquote><p>å¸Œæœ›æœ¬æ–‡èƒ½å¸®ä½ è§£å†³å®é™…å¼€å‘ä¸­çš„æƒé™èµ„æºåŠ è½½éš¾é¢˜ã€‚å¦‚æœ‰æ›´å¤æ‚çš„åœºæ™¯ï¼ˆå¦‚æµå¼æ¸²æŸ“ PDFã€å›¾ç‰‡æ‡’åŠ è½½ + è®¤è¯ï¼‰ï¼Œä¹Ÿæ¬¢è¿è¿›ä¸€æ­¥æ¢è®¨ï¼</p><hr><p><strong>å»¶ä¼¸é˜…è¯»</strong>ï¼š</p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL">MDN: URL.createObjectURL()</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch">Using Fetch - MDN</a></li><li><a href="https://mozilla.github.io/pdf.js/">PDF.js å®˜æ–¹æ–‡æ¡£</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å¦‚ä½•åœ¨å‰ç«¯ä¸º &lt;code&gt;&amp;lt;img&amp;gt;&lt;/code&gt; å’Œ PDF èµ„æºè¯·æ±‚æ·»åŠ è‡ªå®šä¹‰è¯·æ±‚å¤´&lt;/p&gt;
&lt;p&gt;åœ¨ç°ä»£ Web å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åŠ è½½å—æƒé™ä¿æŠ¤çš„èµ„æºï¼Œæ¯”å¦‚å¸¦æœ‰èº«ä»½è®¤è¯ï¼ˆå¦‚ Bearer Tokenï¼‰çš„å›¾ç‰‡æˆ– PDF æ–‡ä»¶ã€‚ç„¶è€Œï¼Œæ ‡å‡† HTML ä¸­çš„ </summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="Frontend" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/Frontend/"/>
    
    <category term="PDF" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/Frontend/PDF/"/>
    
    <category term="Image" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/Frontend/PDF/Image/"/>
    
    <category term="è¯·æ±‚å¤´" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/Frontend/PDF/Image/%E8%AF%B7%E6%B1%82%E5%A4%B4/"/>
    
    
    <category term="imgæ ‡ç­¾" scheme="https://xuehuayu.cn/tags/img%E6%A0%87%E7%AD%BE/"/>
    
    <category term="pdfæ–‡ä»¶" scheme="https://xuehuayu.cn/tags/pdf%E6%96%87%E4%BB%B6/"/>
    
    <category term="è¯·æ±‚å¤´" scheme="https://xuehuayu.cn/tags/%E8%AF%B7%E6%B1%82%E5%A4%B4/"/>
    
    <category term="é‰´æƒ" scheme="https://xuehuayu.cn/tags/%E9%89%B4%E6%9D%83/"/>
    
    <category term="é¢„è§ˆ" scheme="https://xuehuayu.cn/tags/%E9%A2%84%E8%A7%88/"/>
    
  </entry>
  
  <entry>
    <title>æ‰‹æœºä¸¢å¤±è¯¥æ€ä¹ˆåŠï¼Ÿæ‰‹æœºé˜²ç›—é˜²ä¸¢å®Œå…¨æŒ‡å—</title>
    <link href="https://xuehuayu.cn/article/472c582b.html"/>
    <id>https://xuehuayu.cn/article/472c582b.html</id>
    <published>2025-11-03T10:27:09.000Z</published>
    <updated>2025-12-13T16:23:58.681Z</updated>
    
    <content type="html"><![CDATA[<p>æ‰‹æœºå¼€å¯â€œä¸¢å¤±æ¨¡å¼â€åçš„ä¸»è¦å®‰å…¨åŠŸèƒ½å’Œæ³¨æ„äº‹é¡¹ï¼Œæ—¨åœ¨ä¿æŠ¤å¤±ä¸»éšç§ã€ååŠ©å®šä½è®¾å¤‡ï¼Œå¹¶å¢åŠ å°å·çš„å¤„ç†éš¾åº¦ã€‚</p><span id="more"></span><p>ä»¥ä¸‹æ˜¯å¯¹è¿™äº›è¦ç‚¹çš„æ¸…æ™°å½’çº³ï¼š</p><hr><h3 id="æ‰‹æœºä¸¢å¤±æ¨¡å¼çš„æ ¸å¿ƒåŠŸèƒ½ä¸ä½œç”¨"><a href="#æ‰‹æœºä¸¢å¤±æ¨¡å¼çš„æ ¸å¿ƒåŠŸèƒ½ä¸ä½œç”¨" class="headerlink" title="æ‰‹æœºä¸¢å¤±æ¨¡å¼çš„æ ¸å¿ƒåŠŸèƒ½ä¸ä½œç”¨"></a><strong>æ‰‹æœºä¸¢å¤±æ¨¡å¼çš„æ ¸å¿ƒåŠŸèƒ½ä¸ä½œç”¨</strong></h3><ol><li><p><strong>åˆ·æœºé”æ­» (Bootloaderé”)</strong></p><ul><li>å¦‚æœæ‰‹æœºBootloaderå·²ä¸Šé”ä¸”å¼€å¯ä¸¢å¤±æ¨¡å¼ï¼Œå°å·å°†æ— æ³•é€šè¿‡å¸¸è§„æ‰‹æ®µåˆ·æœºã€‚æ‰‹æœºå°†å§‹ç»ˆä¿æŒâ€œç –å¤´â€çŠ¶æ€ï¼Œé™¤éæœºä¸»æœ¬äººè§£é”ã€‚</li></ul></li><li><p><strong>è”ç½‘æ¿€æ´»é”</strong></p><ul><li>ä»»ä½•åˆ·æœºæˆ–æ¢å¤å‡ºå‚è®¾ç½®çš„æ“ä½œåï¼Œæ‰‹æœºéœ€è¦è”ç½‘æ¿€æ´»ã€‚ä¸€æ—¦è”ç½‘ï¼Œæ‰‹æœºå°±ä¼šè¢«å®šä½å¹¶é”æ­»ï¼Œä½¿åˆ·æœºæ— æ•ˆã€‚</li></ul></li><li><p><strong>è¿œç¨‹é”å®šä¸æ•°æ®ä¿æŠ¤</strong></p><ul><li>å¤±ä¸»å¯ä»¥è¿œç¨‹é”å®šæ‰‹æœºï¼Œé˜²æ­¢ä»–äººè®¿é—®ã€‚</li><li>å¯ä»¥è¿œç¨‹è§¦å‘æ•°æ®æ¸…é™¤åŠŸèƒ½ï¼Œä¿æŠ¤é“¶è¡Œå¡ã€é’±åŒ…ç­‰æ•æ„Ÿä¿¡æ¯ã€‚</li></ul></li><li><p><strong>åŠŸèƒ½é™åˆ¶</strong></p><ul><li>æ— æ³•å…³æœºï¼šé˜²æ­¢å°å·é€šè¿‡å…³æœºé€ƒé¿å®šä½ã€‚</li><li>æ— çº¿ç½‘ç»œã€è“ç‰™ç­‰æ— æ³•å…³é—­ï¼šç¡®ä¿å®šä½åŠŸèƒ½æŒç»­æœ‰æ•ˆã€‚</li></ul></li><li><p><strong>å¤šé‡å®šä½æŠ€æœ¯</strong></p><ul><li><strong>å®æ—¶GPSå®šä½</strong>ï¼šé€šè¿‡ç§»åŠ¨ç½‘ç»œæˆ–WiFiè¿›è¡Œå®šä½ã€‚</li><li><strong>æ— ç½‘ç»œå®šä½</strong>ï¼šå³ä½¿æ‹”æ‰SIMå¡ï¼Œä¹Ÿèƒ½é€šè¿‡æ‰«æé™„è¿‘çš„WiFiç½‘ç»œæˆ–è“ç‰™è®¾å¤‡ï¼ˆå¦‚ä»–äººçš„æ‰‹æœºï¼‰æ¥å®ç°ç²¾ç¡®å®šä½ã€‚</li></ul></li><li><p><strong>è¿œç¨‹æŠ¥è­¦</strong></p><ul><li>å¤±ä¸»å¯ä»¥è¿œç¨‹è§¦å‘æœ€å¤§éŸ³é‡çš„æŠ¥è­¦é“ƒå£°ï¼Œå³ä½¿æ‰‹æœºå¤„äºé™éŸ³æ¨¡å¼ä¹Ÿä¼šå“èµ·ï¼Œæœ‰åŠ©äºåœ¨é™„è¿‘ï¼ˆå¦‚æ¥¼é“ã€æˆ¿é—´ï¼‰å®šä½æ‰‹æœºã€‚</li></ul></li><li><p><strong>SIMå¡é”</strong></p><ul><li>å¼ºçƒˆå»ºè®®å¼€å¯SIMå¡é”ï¼ˆPINç ï¼‰ã€‚è¿™æ ·å³ä½¿æ‰‹æœºå¡è¢«æ‹”å‡ºæ’å…¥å…¶ä»–æ‰‹æœºï¼Œä¹Ÿæ— æ³•ä½¿ç”¨ï¼Œé˜²æ­¢è¢«ç”¨äºè¯ˆéª—ç­‰éæ³•æ´»åŠ¨ã€‚</li></ul></li><li><p><strong>æ³•å¾‹å¨æ…‘</strong></p><ul><li>æ‹¾è·æˆ–ç›—çªƒæ‰‹æœºæ‹’ä¸å½’è¿˜ï¼Œå°†é¢ä¸´æ³•å¾‹é£é™©ã€‚å¤±ä¸»æŠ¥è­¦åï¼Œè­¦æ–¹å¯ä¾æ®å®šä½ä¿¡æ¯è¿›è¡Œå¤„ç†ã€‚</li></ul></li><li><p><strong>å¤±ä¸»è¡ŒåŠ¨æŒ‡å—</strong></p><ul><li>æ ¹æ®å®šä½æ‰¾åˆ°å¤§è‡´ä½ç½®åï¼Œä½¿ç”¨æ’­æ”¾é“ƒå£°åŠŸèƒ½ç²¾ç¡®å®šä½ï¼Œç„¶åæŠ¥è­¦æ±‚åŠ©ã€‚</li><li>å¦‚æœæ‰‹æœºè¢«è¿…é€Ÿè½¬ç§»è‡³å¤–åœ°ï¼Œæ‰¾å›æˆæœ¬è¿‡é«˜ï¼Œåº”æœæ–­é€‰æ‹©è¿œç¨‹æ¸…é™¤æ‰€æœ‰æ•°æ®ï¼Œå¹¶ç¬¬ä¸€æ—¶é—´æŒ‚å¤±ç”µè¯å¡ï¼Œä»¥ä¿æŠ¤è´¢äº§å®‰å…¨å’Œä¸ªäººéšç§ã€‚</li></ul></li></ol><hr><h3 id="ç»™å¤±ä¸»çš„å»ºè®®"><a href="#ç»™å¤±ä¸»çš„å»ºè®®" class="headerlink" title="ç»™å¤±ä¸»çš„å»ºè®®"></a><strong>ç»™å¤±ä¸»çš„å»ºè®®</strong></h3><ul><li><strong>é¢„é˜²ä¼˜äºè¡¥æ•‘</strong>ï¼šè¯·åŠ¡å¿…æå‰åœ¨æ‰‹æœºè®¾ç½®ä¸­å¼€å¯â€œæŸ¥æ‰¾æˆ‘çš„æ‰‹æœºâ€åŠŸèƒ½å’ŒSIMå¡PINç é”ã€‚</li><li><strong>ç«‹å³è¡ŒåŠ¨</strong>ï¼šä¸€æ—¦å‘ç°æ‰‹æœºä¸¢å¤±ï¼Œåº”ç«‹åˆ»é€šè¿‡ç”µè„‘æˆ–å…¶ä»–è®¾å¤‡ç™»å½•æ‰‹æœºå“ç‰Œçš„äº‘æœåŠ¡ï¼ˆå¦‚iCloudã€å°ç±³äº‘ã€åä¸ºäº‘ç­‰ï¼‰å¼€å¯ä¸¢å¤±æ¨¡å¼ã€‚</li><li><strong>ä¿æŒå†·é™</strong>ï¼šæŒ‰ç…§ä¸Šè¿°æµç¨‹ï¼Œåˆ©ç”¨ç§‘æŠ€æ‰‹æ®µå’Œæ³•å¾‹æ­¦å™¨å°½å¯èƒ½æ‰¾å›æ‰‹æœºæˆ–ä¿æŠ¤æ•°æ®ã€‚</li></ul><p>æˆ‘ä»¬å¯ä»¥ä» <strong>â€œäº‹å‰é¢„é˜²â€ã€â€œäº‹ä¸­æ“ä½œâ€å’Œâ€œäº‹ååº”å¯¹â€</strong> ä¸‰ä¸ªç»´åº¦è¿›è¡Œè¡¥å……å’Œå®Œå–„ï¼Œä½¿å…¶æˆä¸ºä¸€ä¸ªæ›´å®Œæ•´ã€æ›´å…·æ“ä½œæ€§çš„å®‰å…¨æŒ‡å—ã€‚</p><hr><h3 id="æ‰‹æœºé˜²ç›—é˜²ä¸¢å®Œå…¨æŒ‡å—"><a href="#æ‰‹æœºé˜²ç›—é˜²ä¸¢å®Œå…¨æŒ‡å—" class="headerlink" title="æ‰‹æœºé˜²ç›—é˜²ä¸¢å®Œå…¨æŒ‡å—"></a><strong>æ‰‹æœºé˜²ç›—é˜²ä¸¢å®Œå…¨æŒ‡å—</strong></h3><h4 id="ç¬¬ä¸€éƒ¨åˆ†ï¼šäº‹å‰é¢„é˜²ï¼ˆæœ€é‡è¦çš„ç¯èŠ‚ï¼‰"><a href="#ç¬¬ä¸€éƒ¨åˆ†ï¼šäº‹å‰é¢„é˜²ï¼ˆæœ€é‡è¦çš„ç¯èŠ‚ï¼‰" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ†ï¼šäº‹å‰é¢„é˜²ï¼ˆæœ€é‡è¦çš„ç¯èŠ‚ï¼‰"></a><strong>ç¬¬ä¸€éƒ¨åˆ†ï¼šäº‹å‰é¢„é˜²ï¼ˆæœ€é‡è¦çš„ç¯èŠ‚ï¼‰</strong></h4><ol><li><p><strong>æœªé›¨ç»¸ç¼ªï¼Œç«‹å³è®¾ç½®</strong>ï¼š</p><ul><li><strong>å¼€å¯â€œæŸ¥æ‰¾æˆ‘çš„è®¾å¤‡â€</strong>ï¼šè¿™æ˜¯æ‰€æœ‰åŠŸèƒ½çš„åŸºç¡€ã€‚åœ¨iPhoneä¸Šæ˜¯â€œæŸ¥æ‰¾æˆ‘çš„iPhoneâ€ï¼Œåœ¨å®‰å“ä¸Šæ˜¯â€œæŸ¥æ‰¾æˆ‘çš„è®¾å¤‡â€ï¼Œå¹¶ç¡®ä¿å¼€å¯â€œç¦»çº¿æŸ¥æ‰¾â€æˆ–â€œå…³æœºåå®šä½â€ç­‰é«˜çº§é€‰é¡¹ã€‚</li><li><strong>è®¾ç½®é”å±å¯†ç å’Œç”Ÿç‰©è¯†åˆ«</strong>ï¼šä½¿ç”¨å¤æ‚çš„å¯†ç &#x2F;å›¾æ¡ˆï¼Œå¹¶åŠ¡å¿…å¼€å¯æŒ‡çº¹æˆ–é¢éƒ¨è¯†åˆ«ã€‚è¿™æ˜¯é˜²æ­¢å°å·è®¿é—®ä½ æ•°æ®çš„ç¬¬ä¸€é“å±éšœã€‚</li><li><strong>å¼ºåˆ¶å¼€å¯SIMå¡PINç </strong>ï¼šè¿™æ˜¯æ‚¨æåˆ°çš„ç¬¬9ç‚¹ï¼Œä½†éœ€è¦å¼ºè°ƒå…¶<strong>è®¾ç½®æ–¹æ³•</strong>ï¼šè¿›å…¥æ‰‹æœºè®¾ç½® -&gt; èœ‚çªç½‘ç»œ&#x2F;SIMå¡ä¸æµé‡ç®¡ç† -&gt; é€‰æ‹©SIMå¡ -&gt; SIMå¡PINç  -&gt; å¼€å¯å¹¶ä¿®æ”¹é»˜è®¤PINç ï¼ˆé€šå¸¸æ˜¯1234æˆ–0000ï¼‰ã€‚è¿™æ ·ï¼Œæ‰‹æœºé‡å¯æˆ–SIMå¡æ’å…¥åˆ«çš„æ‰‹æœºæ—¶ï¼Œå¿…é¡»è¾“å…¥PINç æ‰èƒ½ä½¿ç”¨ç½‘ç»œã€‚</li><li><strong>è®°å½•ä½ çš„æ‰‹æœºIMEIå·</strong>ï¼šåœ¨æ‹¨å·ç›˜è¾“å…¥ <code>*#06#</code> å³å¯æ˜¾ç¤ºã€‚IMEIæ˜¯æ‰‹æœºçš„å”¯ä¸€èº«ä»½ç ï¼ŒæŠ¥æ¡ˆæ—¶æä¾›ç»™è­¦æ–¹ï¼Œæœ‰åŠ©äºä»–ä»¬è¿½è¸ªè®¾å¤‡ã€‚</li></ul></li><li><p><strong>æ—¥å¸¸ä½¿ç”¨å¥½ä¹ æƒ¯</strong>ï¼š</p><ul><li>åœ¨å…¬å…±åœºæ‰€ï¼Œæ‰‹æœºä¸è¦æ”¾åœ¨å®½æ¾çš„å£è¢‹æˆ–æ•å¼€çš„åŒ…è¢‹ä¸­ã€‚</li><li>è­¦æƒ•â€œæ­è®ªâ€æˆ–â€œç¢°æ’â€ï¼Œè¿™å¯èƒ½æ˜¯åˆ†æ•£ä½ æ³¨æ„åŠ›çš„ä¼ä¿©ã€‚</li></ul></li></ol><h4 id="ç¬¬äºŒéƒ¨åˆ†ï¼šä¸¢å¤±åç«‹å³é‡‡å–çš„è¡ŒåŠ¨ï¼ˆäº‹ä¸­æ“ä½œï¼‰"><a href="#ç¬¬äºŒéƒ¨åˆ†ï¼šä¸¢å¤±åç«‹å³é‡‡å–çš„è¡ŒåŠ¨ï¼ˆäº‹ä¸­æ“ä½œï¼‰" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ†ï¼šä¸¢å¤±åç«‹å³é‡‡å–çš„è¡ŒåŠ¨ï¼ˆäº‹ä¸­æ“ä½œï¼‰"></a><strong>ç¬¬äºŒéƒ¨åˆ†ï¼šä¸¢å¤±åç«‹å³é‡‡å–çš„è¡ŒåŠ¨ï¼ˆäº‹ä¸­æ“ä½œï¼‰</strong></h4><ol><li><p><strong>ç¬¬ä¸€æ­¥ï¼šä¿æŒå†·é™ï¼Œè¿…é€Ÿå€Ÿè®¾å¤‡</strong></p><ul><li>ç«‹å³å€Ÿç”¨æœ‹å‹æ‰‹æœºã€ç”µè„‘æˆ–ä»»ä½•å¯è”ç½‘çš„è®¾å¤‡ã€‚</li></ul></li><li><p><strong>ç¬¬äºŒæ­¥ï¼šç™»å½•äº‘æœåŠ¡</strong></p><ul><li><strong>è‹¹æœç”¨æˆ·</strong>ï¼šè®¿é—® <a href="https://www.icloud.com/find">iCloud.com&#x2F;find</a></li><li><strong>åä¸ºç”¨æˆ·</strong>ï¼šè®¿é—® <a href="https://cloud.huawei.com/">cloud.huawei.com</a></li><li><strong>å°ç±³ç”¨æˆ·</strong>ï¼šè®¿é—® <a href="https://i.mi.com/">i.mi.com</a></li><li><strong>ä¸‰æ˜Ÿç”¨æˆ·</strong>ï¼šè®¿é—® <a href="https://findmymobile.samsung.cn/">findmymobile.samsung.cn</a></li><li>å…¶ä»–å“ç‰Œå®‰å“ç”¨æˆ·ä¹Ÿå¯ä½¿ç”¨ Google çš„ <a href="https://www.google.com/android/find">Find My Device</a></li></ul></li><li><p><strong>ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡Œâ€œä¸¢å¤±æ¨¡å¼â€</strong></p><ul><li>åœ¨äº‘æœåŠ¡åœ°å›¾ä¸Šé€‰æ‹©ä½ çš„è®¾å¤‡ï¼Œç„¶åå¼€å¯â€œä¸¢å¤±æ¨¡å¼â€ã€‚</li><li><strong>è¡¥å……æ“ä½œ</strong>ï¼š<ul><li><strong>ç•™ä¸‹è”ç³»æ–¹å¼</strong>ï¼šåœ¨ä¸¢å¤±æ¨¡å¼çš„é”å±ç•Œé¢ä¸Šï¼Œç•™ä¸‹ä¸€ä¸ªä½ å¯ä»¥æ¥å¬çš„ç”µè¯å·ç ï¼ˆå¦‚æœ‹å‹çš„ï¼‰ã€‚è¿™ç»™æ‹¾è·è€…ä¸€ä¸ªå½’è¿˜çš„æ¸ é“ï¼Œæœ‰æ—¶æ¯”è­¦æŠ¥æ›´æœ‰æ•ˆã€‚</li><li><strong>ä¸è¦ç«‹å³æ¸…ç©ºæ•°æ®</strong>ï¼šæ¸…ç©ºæ•°æ®ä¼šä½¿â€œæŸ¥æ‰¾â€åŠŸèƒ½å¤±æ•ˆã€‚é™¤éç¡®è®¤æ— æ³•æ‰¾å›ï¼ˆå¦‚æ‰‹æœºå·²åˆ°å¤–åœ°ï¼‰ï¼Œå¦åˆ™å…ˆå®šä½å’Œé”å®šï¼Œå†è€ƒè™‘æ¸…é™¤ã€‚</li></ul></li></ul></li></ol><h4 id="ç¬¬ä¸‰éƒ¨åˆ†ï¼šå¯¹åŸæ¡ç›®çš„é‡è¦è¡¥å……å’Œä¿®æ­£"><a href="#ç¬¬ä¸‰éƒ¨åˆ†ï¼šå¯¹åŸæ¡ç›®çš„é‡è¦è¡¥å……å’Œä¿®æ­£" class="headerlink" title="ç¬¬ä¸‰éƒ¨åˆ†ï¼šå¯¹åŸæ¡ç›®çš„é‡è¦è¡¥å……å’Œä¿®æ­£"></a><strong>ç¬¬ä¸‰éƒ¨åˆ†ï¼šå¯¹åŸæ¡ç›®çš„é‡è¦è¡¥å……å’Œä¿®æ­£</strong></h4><ol><li><strong>å…³äºâ€œæ— æ³•å…³æœºâ€</strong>ï¼šç°ä»£æ‰‹æœºåœ¨ä¸¢å¤±æ¨¡å¼ä¸‹ï¼Œ<strong>é€šå¸¸åªæ˜¯â€œå¼ºçƒˆä¸å»ºè®®å…³æœºâ€æˆ–â€œå…³æœºéœ€è¦å¯†ç â€</strong>ï¼Œä½†ç‰©ç†å¼ºåˆ¶é‡å¯ï¼ˆé•¿æŒ‰ç”µæºé”®+éŸ³é‡é”®ï¼‰åœ¨æŸäº›æœºå‹ä¸Šä»ç„¶å¯èƒ½å®ç°ã€‚å› æ­¤ï¼Œ<strong>â€œæ— æ³•å…³æœºâ€å¹¶éç»å¯¹</strong>ï¼Œä½†ç¡®å®å¤§å¤§å¢åŠ äº†éš¾åº¦ã€‚</li><li><strong>å…³äºâ€œåˆ·æœº&#x2F;è§£é”â€</strong>ï¼š<ul><li><strong>â€œå·¥å‚é‡ç½®ä¿æŠ¤â€</strong>ï¼šæ‚¨æè¿°çš„æ•´ä¸ªæœºåˆ¶åœ¨ä¸šå†…ç§°ä¸ºFRPã€‚å³ä½¿åˆ·æœºç»•è¿‡Bootloaderé”ï¼Œæ‰‹æœºé‡å¯åä¹Ÿä¼šè§¦å‘FRPï¼Œè¦æ±‚è¾“å…¥åŸæœºä¸»çš„Googleæˆ–ä¸‰æ˜Ÿç­‰è´¦æˆ·çš„è´¦å·å¯†ç ï¼Œå¦åˆ™æ— æ³•è¿›å…¥ç³»ç»Ÿã€‚</li><li><strong>â€œç¡¬è§£â€çš„é£é™©</strong>ï¼šæœ‰æŠ€æœ¯å›¢é˜Ÿé€šè¿‡æ›´æ¢æ‰‹æœºä¸»æ¿ç­‰ç¡¬ä»¶æ¥ç ´è§£ï¼Œä½†æˆæœ¬æé«˜ï¼Œä¸”ä¼šä½¿æ‰‹æœºå¤±å»å®˜æ–¹ä¿ä¿®ï¼Œå˜æˆâ€œç»„è£…æœºâ€ï¼Œä»·å€¼å¤§æ‰“æŠ˜æ‰£ã€‚è¿™æœ¬èº«å°±æ˜¯ä¸€ç§å¼ºå¤§çš„å¨æ…‘ã€‚</li></ul></li><li><strong>å…³äºâ€œæŠ¥è­¦â€</strong>ï¼š<ul><li><strong>å¿…é¡»æŠ¥æ¡ˆ</strong>ï¼šåªè¦æ‚¨èƒ½æä¾›å‡†ç¡®çš„å®šä½ä¿¡æ¯ï¼ˆä¾‹å¦‚å…·ä½“åˆ°æŸæ ‹æ¥¼ã€æŸæˆ¿é—´ï¼‰å’ŒIMEIå·ï¼Œè­¦æ–¹æ˜¯æœ‰ä¾æ®å‡ºè­¦å¤„ç†çš„ã€‚æ¨¡ç³Šçš„å®šä½ï¼ˆå¦‚æ•´ä¸ªå°åŒºï¼‰å¯èƒ½ä¼šè¢«è¦æ±‚è‡ªè¡Œå¯»æ‰¾ã€‚</li><li><strong>è¯æ®é“¾</strong>ï¼šæ‚¨é€šè¿‡äº‘æœåŠ¡è¿›è¡Œçš„æ¯ä¸€æ­¥æ“ä½œï¼ˆå®šä½ã€é”å®šã€æ’­æ”¾é“ƒå£°ï¼‰éƒ½æ˜¯ç”µå­è¯æ®ï¼Œå¯ä»¥æˆªå›¾ä¿å­˜ï¼Œæä¾›ç»™è­¦æ–¹ã€‚</li></ul></li><li><strong>æ–°å¢ï¼šè­¦æƒ•é’“é±¼éª—å±€</strong><ul><li>è¿™æ˜¯éå¸¸é‡è¦çš„ä¸€ç‚¹ï¼å°å·å¯èƒ½ä¼šé€šè¿‡æŠ€æœ¯æ‰‹æ®µå‘ä½ å‘é€å‡çš„â€œæŸ¥æ‰¾â€é€šçŸ¥ï¼Œæˆ–è€…å†’å……å®˜æ–¹å®¢æœå‘çŸ­ä¿¡&#x2F;é‚®ä»¶ï¼Œç´¢è¦ä½ çš„Apple IDã€Googleæˆ–ä¸‰æ˜Ÿç­‰è´¦æˆ·çš„è´¦å·å¯†ç ã€‚<strong>è¯·åŠ¡å¿…è®°ä½ï¼šè‹¹æœã€è°·æ­Œç­‰å®˜æ–¹ç»ä¸ä¼šä¸»åŠ¨å‘ä½ ç´¢è¦å¯†ç ï¼</strong> ä»»ä½•è¦æ±‚ä½ è¾“å…¥è´¦å·å¯†ç çš„é“¾æ¥éƒ½ä¸è¦ç‚¹ï¼Œä¸€å®šè¦æ‰‹åŠ¨è¾“å…¥å®˜ç½‘åœ°å€ç™»å½•ã€‚</li></ul></li></ol><h4 id="æ€»ç»“ï¼šç»™å¤±ä¸»çš„è¡ŒåŠ¨æ¸…å•"><a href="#æ€»ç»“ï¼šç»™å¤±ä¸»çš„è¡ŒåŠ¨æ¸…å•" class="headerlink" title="æ€»ç»“ï¼šç»™å¤±ä¸»çš„è¡ŒåŠ¨æ¸…å•"></a><strong>æ€»ç»“ï¼šç»™å¤±ä¸»çš„è¡ŒåŠ¨æ¸…å•</strong></h4><ol><li><strong>é¢„é˜²</strong>ï¼šå¼€æŸ¥æ‰¾ã€è®¾å¯†ç ã€é”SIMå¡ã€è®°IMEIã€‚</li><li><strong>äº‹å‘</strong>ï¼šå€Ÿè®¾å¤‡ã€ç™»äº‘æœåŠ¡ã€å¼€ä¸¢å¤±æ¨¡å¼ã€ç•™è”ç³»æ–¹å¼ã€‚</li><li><strong>è¿½è¸ª</strong>ï¼šæ ¹æ®å®šä½ï¼Œæ’­æ”¾é“ƒå£°ç²¾ç¡®å®šä½ã€‚</li><li><strong>æ±‚åŠ©</strong>ï¼šæºå¸¦å®šä½æˆªå›¾å’ŒIMEIå·ï¼ŒæŠ¥è­¦å¤„ç†ã€‚</li><li><strong>æ­¢æŸ</strong>ï¼šè‹¥ç¡®å®šæ— æ³•æ‰¾å›ï¼Œè¿œç¨‹æ“¦é™¤æ•°æ®ï¼Œå¹¶ç¬¬ä¸€æ—¶é—´è”ç³»è¿è¥å•†æŒ‚å¤±&#x2F;è¡¥åŠSIMå¡ã€‚</li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;æ‰‹æœºå¼€å¯â€œä¸¢å¤±æ¨¡å¼â€åçš„ä¸»è¦å®‰å…¨åŠŸèƒ½å’Œæ³¨æ„äº‹é¡¹ï¼Œæ—¨åœ¨ä¿æŠ¤å¤±ä¸»éšç§ã€ååŠ©å®šä½è®¾å¤‡ï¼Œå¹¶å¢åŠ å°å·çš„å¤„ç†éš¾åº¦ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="ç”Ÿæ´»" scheme="https://xuehuayu.cn/categories/%E7%94%9F%E6%B4%BB/"/>
    
    <category term="æ‰‹æœº" scheme="https://xuehuayu.cn/categories/%E7%94%9F%E6%B4%BB/%E6%89%8B%E6%9C%BA/"/>
    
    
    <category term="æ‰‹æœº" scheme="https://xuehuayu.cn/tags/%E6%89%8B%E6%9C%BA/"/>
    
    <category term="é˜²ç›—" scheme="https://xuehuayu.cn/tags/%E9%98%B2%E7%9B%97/"/>
    
    <category term="ä¸¢å¤±" scheme="https://xuehuayu.cn/tags/%E4%B8%A2%E5%A4%B1/"/>
    
    <category term="æ‰¾å›" scheme="https://xuehuayu.cn/tags/%E6%89%BE%E5%9B%9E/"/>
    
    <category term="æŒ‡å—" scheme="https://xuehuayu.cn/tags/%E6%8C%87%E5%8D%97/"/>
    
  </entry>
  
  <entry>
    <title>vue3 piniaåœ¨App.vueä¸­ä½¿ç”¨äº†useStoreæŠ¥é”™getActivePinia() was called but there wa no active pinia</title>
    <link href="https://xuehuayu.cn/article/ead1a366.html"/>
    <id>https://xuehuayu.cn/article/ead1a366.html</id>
    <published>2025-10-29T23:04:20.000Z</published>
    <updated>2025-12-13T16:23:58.675Z</updated>
    
    <content type="html"><![CDATA[<p>vue3 piniaåœ¨App.vueä¸­ä½¿ç”¨äº†useStore æŠ¥é”™getActivePinia() was called but there wa no active pinia</p><span id="more"></span><h3 id="äº‹ä»¶èµ·å› "><a href="#äº‹ä»¶èµ·å› " class="headerlink" title="äº‹ä»¶èµ·å› "></a>äº‹ä»¶èµ·å› </h3><p>å› ä¸ºè¦åœ¨å…¨å±€<code>axios</code>ä¸­ä½¿ç”¨å…¨å±€çš„å‚æ•°ï¼Œæ‰€ä»¥è¦åœ¨å°è£…<code>axios</code>æ–¹æ³•ä¸­ä½¿ç”¨<code>pinia</code>çš„<code>useStore</code>ï¼Œå› ä¸ºæ˜¯<code>axios</code>æ˜¯<code>js/ts</code>æ–‡ä»¶åœ¨<code>import</code>æ—¶ä¼šç«‹å³æ‰§è¡Œï¼Œå¯¼è‡´ç»„ä»¶å°šæœªåŠ è½½<code>pinia</code>è€Œæå‰ä½¿ç”¨äº†<code>pinia</code>ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™<code>getActivePinia() was called but there wa no active pinia</code></p><h3 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><p>åœ¨<code>App.vue</code>ä¸­ä½¿ç”¨åŠ¨æ€ç»„ä»¶ï¼Œé€šè¿‡åˆ¤æ–­<code>pinia</code>æ˜¯å¦å·²ç»åˆ›å»ºå®Œæˆï¼Œå¦‚æœæœªåˆ›å»ºå®Œæˆåˆ™ç­‰å¾…<code>pinia</code>åˆ›å»ºå®Œæˆå†åŠ è½½ç»„ä»¶ã€‚</p><p>App.vueæ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; defineAsyncComponent, getcurrentInstance &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const index = ref(null)</span><br><span class="line">const app = getcurrentInstance()</span><br><span class="line"></span><br><span class="line">const timer = setinterval(() =&gt; &#123;</span><br><span class="line">  if (app?.appContext.config.globalProperties.$pinia) &#123;</span><br><span class="line">    index.value = defineAsyncComponent(() =&gt; import(&#x27;./views/index.vue&#x27;))</span><br><span class="line">    clearInterval(timer)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;#app&quot; ref=&quot;app&quot;&gt;</span><br><span class="line">    &lt;component :is=&quot;index&quot;/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;vue3 piniaåœ¨App.vueä¸­ä½¿ç”¨äº†useStore æŠ¥é”™getActivePinia() was called but there wa no active pinia&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="FrontEnd" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/FrontEnd/"/>
    
    <category term="Vue3" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/FrontEnd/Vue3/"/>
    
    
    <category term="Vue3" scheme="https://xuehuayu.cn/tags/Vue3/"/>
    
    <category term="ts" scheme="https://xuehuayu.cn/tags/ts/"/>
    
    <category term="Pinia" scheme="https://xuehuayu.cn/tags/Pinia/"/>
    
  </entry>
  
  <entry>
    <title>vue3ä¸­çš„mixinå†™æ³•ä½¿ç”¨Composition API æ¥å®ç°ä»£ç å¤ç”¨</title>
    <link href="https://xuehuayu.cn/article/abe47f31.html"/>
    <id>https://xuehuayu.cn/article/abe47f31.html</id>
    <published>2025-10-29T11:23:40.000Z</published>
    <updated>2025-12-13T16:23:58.678Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ Vue 3 ä¸­ï¼Œè™½ç„¶ä¾ç„¶æ”¯æŒ <strong>Options API é£æ ¼çš„ Mixins</strong>ï¼Œä½†æ›´æ¨èä½¿ç”¨ <strong>Composition API</strong> æ¥å®ç°ä»£ç å¤ç”¨ï¼Œå› ä¸ºå®ƒèƒ½æ›´å¥½åœ°è§£å†³ä¼ ç»Ÿ Mixins åœ¨å¯è¯»æ€§ã€å‘½åå†²çªå’Œç±»å‹æ¨æ–­æ–¹é¢çš„ä¸€äº›ç—›ç‚¹ã€‚</p><p>ä¸‹é¢çš„è¡¨æ ¼èƒ½å¸®ä½ å¿«é€Ÿäº†è§£è¿™ä¸¤ç§æ–¹å¼çš„ä¸»è¦åŒºåˆ«ï¼š</p><table><thead><tr><th align="left">ç‰¹æ€§ç»´åº¦</th><th align="left">Mixins (Options API é£æ ¼)</th><th align="left">Composition API (ç»„åˆå¼å‡½æ•°)</th></tr></thead><tbody><tr><td align="left"><strong>ä»£ç å¤ç”¨æ–¹å¼</strong></td><td align="left">é€šè¿‡é€‰é¡¹ï¼ˆ<code>data</code>, <code>methods</code> ç­‰ï¼‰åˆå¹¶</td><td align="left">é€šè¿‡å‡½æ•°è°ƒç”¨å’Œè¿”å›å€¼</td></tr><tr><td align="left"><strong>å¯è¯»æ€§</strong></td><td align="left">é€»è¾‘åˆ†æ•£ across å¤šä¸ªé€‰é¡¹ï¼Œæ¥æºä¸æ¸…æ™°</td><td align="left">é€»è¾‘é›†ä¸­ï¼ŒæŒ‰åŠŸèƒ½ç»„ç»‡</td></tr><tr><td align="left"><strong>å‘½åå†²çª</strong></td><td align="left">å®¹æ˜“å‘ç”Ÿï¼Œéœ€å°å¿ƒå¤„ç†åˆå¹¶ç­–ç•¥</td><td align="left">é€šè¿‡è§£æ„é‡å‘½åï¼Œå†²çªé£é™©ä½</td></tr><tr><td align="left"><strong>ç±»å‹æ”¯æŒ</strong></td><td align="left">è¾ƒå¼±</td><td align="left">å¯¹ TypeScript æ”¯æŒè‰¯å¥½</td></tr><tr><td align="left"><strong>çµæ´»æ€§</strong></td><td align="left">ç›¸å¯¹å›ºå®š</td><td align="left">é«˜ï¼Œå¯ä»¥åƒæ™®é€šå‡½æ•°ä¸€æ ·ç»„åˆå’ŒåµŒå¥—</td></tr></tbody></table><h3 id="ğŸ°-ä¼ ç»Ÿ-Mixins-çš„å†™æ³•"><a href="#ğŸ°-ä¼ ç»Ÿ-Mixins-çš„å†™æ³•" class="headerlink" title="ğŸ° ä¼ ç»Ÿ Mixins çš„å†™æ³•"></a>ğŸ° ä¼ ç»Ÿ Mixins çš„å†™æ³•</h3><p>è¿™ç§æ–¹å¼æ˜¯å°†ç»„ä»¶çš„å…¬å…±é€»è¾‘é€šè¿‡é€‰é¡¹çš„å½¢å¼å®šä¹‰åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ã€‚</p><ol><li><p><strong>å®šä¹‰ Mixin</strong><br> åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ï¼ˆä¾‹å¦‚ <code>useCounterMixin.js</code>ï¼‰ï¼Œä½¿ç”¨ Options API çš„é£æ ¼å®šä¹‰æ•°æ®å’Œæ–¹æ³•ï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// useCounterMixin.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCounterMixin = &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">mixinCount</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">mixinIncrement</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">mixinCount</span>++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Mixin mounted!&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</strong><br> åœ¨ç»„ä»¶ä¸­é€šè¿‡ <code>mixins</code> é€‰é¡¹å¼•å…¥ï¼ŒVue ä¼šè‡ªåŠ¨åˆå¹¶è¿™äº›é€‰é¡¹ã€‚å½“ç»„ä»¶å’Œ Mixin æœ‰<strong>åŒåå±æ€§æˆ–æ–¹æ³•</strong>æ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ<strong>ç»„ä»¶çš„é€‰é¡¹ä¼šè¦†ç›– Mixin çš„</strong>ã€‚å¯¹äº<strong>ç”Ÿå‘½å‘¨æœŸé’©å­</strong>ï¼Œ<strong>ä¸¤è€…éƒ½ä¼šè¢«æ‰§è¡Œï¼Œä¸” Mixin çš„é’©å­å…ˆäºç»„ä»¶è‡ªèº«çš„é’©å­æ‰§è¡Œ</strong>ã€‚</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;Count from mixin: &#123;&#123; mixinCount &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;mixinIncrement&quot;&gt;Increment from Mixin&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; useCounterMixin &#125; from &#x27;./useCounterMixin&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  mixins: [useCounterMixin],</span><br><span class="line">  // ç»„ä»¶è‡ªå·±çš„ dataã€methods ç­‰é€‰é¡¹...</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    console.log(&#x27;Component mounted!&#x27;);</span><br><span class="line">    // è¾“å‡ºé¡ºåºï¼š</span><br><span class="line">    // &quot;Mixin mounted!&quot;</span><br><span class="line">    // &quot;Component mounted!&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ol><h3 id="ğŸ’¡-ä½¿ç”¨-Composition-API-å®ç°é€»è¾‘å¤ç”¨"><a href="#ğŸ’¡-ä½¿ç”¨-Composition-API-å®ç°é€»è¾‘å¤ç”¨" class="headerlink" title="ğŸ’¡ ä½¿ç”¨ Composition API å®ç°é€»è¾‘å¤ç”¨"></a>ğŸ’¡ ä½¿ç”¨ Composition API å®ç°é€»è¾‘å¤ç”¨</h3><p>Composition API é€šè¿‡â€œç»„åˆå¼å‡½æ•°â€æ¥å®ç°å¤ç”¨ï¼Œè¿™æ˜¯ä¸€ä¸ªæ›´ç¬¦åˆ JavaScript åŸç”Ÿæ€ç»´çš„æ–¹å¼ã€‚</p><ol><li><p><strong>åˆ›å»ºç»„åˆå¼å‡½æ•°</strong><br> åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼ˆé€šå¸¸ä»¥ <code>use</code> å¼€å¤´ï¼‰ï¼Œåœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ <code>ref</code>, <code>reactive</code>, <code>computed</code> ç­‰ Composition API å®šä¹‰å“åº”å¼æ•°æ®å’Œé€»è¾‘ï¼Œå¹¶è¿”å›éœ€è¦æš´éœ²ç»™ç»„ä»¶çš„å€¼ã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// useCounter.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref, computed, onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useCounter</span>(<span class="params">initialValue = <span class="number">0</span></span>) &#123;</span><br><span class="line">  <span class="comment">// å“åº”å¼çŠ¶æ€</span></span><br><span class="line">  <span class="keyword">const</span> count = <span class="title function_">ref</span>(initialValue)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¡ç®—å±æ€§</span></span><br><span class="line">  <span class="keyword">const</span> double = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> count.<span class="property">value</span> * <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">    count.<span class="property">value</span>++</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç”Ÿå‘½å‘¨æœŸé’©å­</span></span><br><span class="line">  <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Counter composition mounted!&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿”å›æ‰€æœ‰éœ€è¦ä½¿ç”¨çš„æ•°æ®å’Œæ–¹æ³•</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    count,</span><br><span class="line">    double,</span><br><span class="line">    increment</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ç»„åˆå¼å‡½æ•°</strong><br> åœ¨ç»„ä»¶çš„ <code>setup()</code> å‡½æ•°æˆ– <code>&lt;script setup&gt;</code> è¯­æ³•ç³–ä¸­ï¼Œè°ƒç”¨ç»„åˆå¼å‡½æ•°å¹¶è·å–å…¶è¿”å›çš„å€¼ã€‚ä½ å¯ä»¥æŒ‰éœ€é‡å‘½åï¼Œæœ‰æ•ˆé¿å…äº†å‘½åå†²çªã€‚</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ä½¿ç”¨ &lt;script setup&gt; è¯­æ³• --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;Count: &#123;&#123; count &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;Double: &#123;&#123; double &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;increment&quot;&gt;Increment&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">// å¯¼å…¥ç»„åˆå¼å‡½æ•°</span><br><span class="line">import &#123; useCounter &#125; from &#x27;./useCounter&#x27;</span><br><span class="line"></span><br><span class="line">// è°ƒç”¨å‡½æ•°ï¼Œè§£æ„è¿”å›å€¼</span><br><span class="line">const &#123; count, double, increment &#125; = useCounter(10) // å¯ä»¥ä¼ é€’åˆå§‹å‚æ•°</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ol><h3 id="âœ…-å¦‚ä½•é€‰æ‹©ä¸æœ€ä½³å®è·µ"><a href="#âœ…-å¦‚ä½•é€‰æ‹©ä¸æœ€ä½³å®è·µ" class="headerlink" title="âœ… å¦‚ä½•é€‰æ‹©ä¸æœ€ä½³å®è·µ"></a>âœ… å¦‚ä½•é€‰æ‹©ä¸æœ€ä½³å®è·µ</h3><ul><li><p><strong>é€‰æ‹©å»ºè®®</strong>ï¼š</p><ul><li>å¯¹äºæ–°é¡¹ç›®æˆ–å¤æ‚çš„é€»è¾‘å¤ç”¨ï¼Œ<strong>å¼ºçƒˆæ¨èä½¿ç”¨ Composition API</strong>ã€‚å®ƒå¸¦æ¥äº†æ›´å¥½çš„å¯ç»´æŠ¤æ€§å’Œç±»å‹æ”¯æŒã€‚</li><li>å¦‚æœä½ æ˜¯åœ¨ç»´æŠ¤ä¸€ä¸ªæ—§çš„ã€ä¸»è¦ä½¿ç”¨ Options API çš„ Vue 2 é¡¹ç›®ï¼Œæˆ–è€…å¤ç”¨çš„é€»è¾‘éå¸¸ç®€å•ï¼Œå¯ä»¥ç»§ç»­ä½¿ç”¨ Mixinsã€‚</li></ul></li><li><p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p><ul><li><strong>å•ä¸€èŒè´£</strong>ï¼šæ— è®ºæ˜¯ Mixin è¿˜æ˜¯ç»„åˆå¼å‡½æ•°ï¼Œéƒ½å°½é‡è®©å…¶åªè´Ÿè´£ä¸€ä¸ªæ˜ç¡®çš„åŠŸèƒ½ã€‚</li><li><strong>æ¸…æ™°å‘½å</strong>ï¼šåœ¨ Mixin ä¸­ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ç‰¹å®šçš„å‰ç¼€æ¥å‡å°‘å‘½åå†²çªçš„é£é™©ï¼ˆä¾‹å¦‚ <code>mixinCount</code>ï¼‰ã€‚åœ¨ç»„åˆå¼å‡½æ•°ä¸­ï¼Œåˆ™å¯ä»¥åˆ©ç”¨è§£æ„é‡å‘½åã€‚</li><li><strong>æ˜ç¡®ä¾èµ–</strong>ï¼šåœ¨ç»„åˆå¼å‡½æ•°ä¸­ï¼Œå¯¹äºéœ€è¦ä»å¤–éƒ¨æ¥æ”¶çš„å‚æ•°ï¼Œä½¿ç”¨ <code>ref</code> æˆ– <code>reactive</code> ä¿æŒå…¶å“åº”æ€§ã€‚</li></ul></li></ul><p>æ€»è€Œè¨€ä¹‹ï¼ŒComposition API é€šè¿‡åŸç”Ÿ JavaScript çš„å‡½æ•°æœºåˆ¶è¿›è¡Œé€»è¾‘ç»„åˆå’Œå¤ç”¨ï¼Œæä¾›äº†æ¯” Mixins æ›´çµæ´»å’Œå¯æ§çš„æ–¹å¼ï¼Œæ˜¯ç°ä»£ Vue åº”ç”¨ä»£ç å¤ç”¨çš„é¦–é€‰ã€‚</p><p>å¸Œæœ›è¿™ä»½è®²è§£èƒ½å¸®åŠ©ä½ é¡ºåˆ©åœ°åœ¨ Vue 3 ä¸­å®ç°ä»£ç å¤ç”¨ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åœ¨ Vue 3 ä¸­ï¼Œè™½ç„¶ä¾ç„¶æ”¯æŒ &lt;strong&gt;Options API é£æ ¼çš„ Mixins&lt;/strong&gt;ï¼Œä½†æ›´æ¨èä½¿ç”¨ &lt;strong&gt;Composition API&lt;/strong&gt; æ¥å®ç°ä»£ç å¤ç”¨ï¼Œå› ä¸ºå®ƒèƒ½æ›´å¥½åœ°è§£å†³ä¼ ç»Ÿ Mixins åœ¨å¯è¯»æ€§ã€å‘½åå†²çªå’Œç±»å‹æ¨</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="FrontEnd" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/FrontEnd/"/>
    
    <category term="Vue3" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/FrontEnd/Vue3/"/>
    
    
    <category term="Vue3" scheme="https://xuehuayu.cn/tags/Vue3/"/>
    
    <category term="Composition" scheme="https://xuehuayu.cn/tags/Composition/"/>
    
    <category term="Mixins" scheme="https://xuehuayu.cn/tags/Mixins/"/>
    
    <category term="setup" scheme="https://xuehuayu.cn/tags/setup/"/>
    
    <category term="Options" scheme="https://xuehuayu.cn/tags/Options/"/>
    
  </entry>
  
  <entry>
    <title>windowsè™šæ‹Ÿå†…å­˜è‡ªåŠ¨ç®¡ç†å¥½è¿˜æ˜¯æ‰‹åŠ¨è®¾ç½®å¥½ï¼Ÿ å¦‚æœæ˜¯æ‰‹åŠ¨è®¾ç½®å¤šå°‘åˆé€‚ï¼Ÿ</title>
    <link href="https://xuehuayu.cn/article/cbf3079f.html"/>
    <id>https://xuehuayu.cn/article/cbf3079f.html</id>
    <published>2025-10-29T08:41:30.000Z</published>
    <updated>2025-12-13T16:23:58.679Z</updated>
    
    <content type="html"><![CDATA[<p>å¯¹äºWindowsè™šæ‹Ÿå†…å­˜çš„è®¾ç½®ï¼Œ<strong>ç»å¤§å¤šæ•°æ™®é€šç”¨æˆ·é€‰æ‹©â€œè‡ªåŠ¨ç®¡ç†â€æ˜¯æ›´çœå¿ƒä¸”ç¨³å¦¥çš„æ–¹æ¡ˆ</strong>ã€‚ä¸è¿‡ï¼Œå¦‚æœä½ æœ‰éå¸¸ç‰¹å®šçš„ä½¿ç”¨éœ€æ±‚ï¼Œæ‰‹åŠ¨è®¾ç½®ä¹Ÿèƒ½ä½œä¸ºä¼˜åŒ–æ‰‹æ®µã€‚</p><span id="more"></span><p>ä¸ºäº†å¸®ä½ å¿«é€Ÿäº†è§£ä¸¤ç§æ–¹å¼çš„åŒºåˆ«ï¼Œæˆ‘å‡†å¤‡äº†ä¸‹é¢çš„è¡¨æ ¼ï¼š</p><table><thead><tr><th align="left">å¯¹æ¯”ç»´åº¦</th><th align="left">âš™ï¸ è‡ªåŠ¨ç®¡ç†</th><th align="left">ğŸ› ï¸ æ‰‹åŠ¨è®¾ç½®</th></tr></thead><tbody><tr><td align="left"><strong>å·¥ä½œåŸç†</strong></td><td align="left">ç³»ç»Ÿæ ¹æ®å½“å‰è´Ÿè½½åŠ¨æ€è°ƒæ•´è™šæ‹Ÿå†…å­˜å¤§å°ã€‚</td><td align="left">ç”±ä½ å›ºå®šåˆå§‹å’Œæœ€å¤§å€¼ï¼Œç³»ç»Ÿä¸ä¼šè‡ªåŠ¨æ”¹å˜ã€‚</td></tr><tr><td align="left"><strong>ä¼˜ç‚¹</strong></td><td align="left">âœ… <strong>ç®€å•æ–¹ä¾¿</strong>ï¼Œæ— éœ€ç”¨æˆ·å¹²é¢„<br>âœ… <strong>åŠ¨æ€é€‚é…</strong>ï¼Œåº”å¯¹ä¸åŒä½¿ç”¨åœºæ™¯<br>âœ… <strong>ç¨³å®šå¯é </strong>ï¼Œå¾®è½¯å®˜æ–¹æ¨è</td><td align="left">âœ… <strong>æ€§èƒ½ç¨³å®š</strong>ï¼Œé¿å…ç³»ç»Ÿé¢‘ç¹è°ƒæ•´äº§ç”Ÿç¢ç‰‡ï¼ˆè‹¥è®¾ç½®å›ºå®šå€¼ï¼‰<br>âœ… <strong>åº”å¯¹ç‰¹æ®Šéœ€æ±‚</strong>ï¼Œå¯ä¸ºç‰¹å®šä»»åŠ¡é¢„ç•™è¶³å¤Ÿç©ºé—´</td></tr><tr><td align="left"><strong>ç¼ºç‚¹</strong></td><td align="left">âŒ å¯èƒ½ä¸å¤Ÿç²¾ç¡®ï¼ŒåŠ¨æ€è°ƒæ•´å¶å°”ä¼šäº§ç”Ÿç£ç›˜ç¢ç‰‡</td><td align="left">âŒ <strong>è®¾ç½®ä¸å½“æœ‰é£é™©</strong>ï¼šè¿‡å°æ˜“å†…å­˜ä¸è¶³ï¼Œè¿‡å¤§ä¼šå ç”¨ç£ç›˜ç©ºé—´ä¸”å¯èƒ½å› é¢‘ç¹è¯»å†™æ‹–æ…¢ç³»ç»Ÿ</td></tr><tr><td align="left"><strong>é€‚ç”¨äººç¾¤</strong></td><td align="left">ç»å¤§å¤šæ•°æ™®é€šç”¨æˆ·ã€æ¸¸æˆç©å®¶ã€æ—¥å¸¸åŠå…¬è€…ã€‚</td><td align="left">é«˜çº§ç”¨æˆ·ã€ä¸“ä¸šè½¯ä»¶ä½¿ç”¨è€…ï¼ˆå¦‚è¿è¡Œå¤§å‹å»ºæ¨¡ã€è§†é¢‘ç¼–è¾‘ï¼‰ï¼Œæˆ–æ›¾é‡åˆ°â€œè™šæ‹Ÿå†…å­˜ä¸è¶³â€æç¤ºçš„ç”¨æˆ·ã€‚</td></tr></tbody></table><h3 id="ğŸ’¡-å¦‚ä½•é€‰æ‹©ä¸æ‰‹åŠ¨è®¾ç½®å»ºè®®"><a href="#ğŸ’¡-å¦‚ä½•é€‰æ‹©ä¸æ‰‹åŠ¨è®¾ç½®å»ºè®®" class="headerlink" title="ğŸ’¡ å¦‚ä½•é€‰æ‹©ä¸æ‰‹åŠ¨è®¾ç½®å»ºè®®"></a>ğŸ’¡ å¦‚ä½•é€‰æ‹©ä¸æ‰‹åŠ¨è®¾ç½®å»ºè®®</h3><p>ä½ å¯ä»¥å‚è€ƒä»¥ä¸‹æµç¨‹å›¾ï¼Œå¿«é€Ÿåˆ¤æ–­å“ªç§æ–¹å¼æ›´é€‚åˆä½ ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">flowchart TD</span><br><span class="line">    A[å¼€å§‹é€‰æ‹©è™šæ‹Ÿå†…å­˜æ–¹æ¡ˆ] --&gt; B&#123;ä½ æ˜¯å¤§å¤šæ•°æ™®é€šç”¨æˆ·å—ï¼Ÿ&#125;;</span><br><span class="line">    B -- æ˜¯ --&gt; C[å¼ºçƒˆæ¨èä½¿ç”¨&lt;br&gt;**è‡ªåŠ¨ç®¡ç†**];</span><br><span class="line">    B -- å¦&lt;br&gt;ï¼ˆæœ‰ç‰¹æ®Šéœ€æ±‚æˆ–é—®é¢˜ï¼‰ --&gt; D&#123;æ˜¯å¦å¸¸é‡åˆ°&lt;br&gt;è™šæ‹Ÿå†…å­˜ä¸è¶³è­¦å‘Šï¼Ÿ&#125;;</span><br><span class="line"></span><br><span class="line">    D -- æ˜¯ --&gt; E[å»ºè®®æ‰‹åŠ¨è®¾ç½®];</span><br><span class="line">    E --&gt; F[æŒ‰æ¨èå€¼çš„1.5-3å€&lt;br&gt;é€‚å½“è°ƒå¤§è™šæ‹Ÿå†…å­˜];</span><br><span class="line"></span><br><span class="line">    D -- å¦ --&gt; G&#123;æ˜¯å¦è¿½æ±‚ä¸“ä¸šè½¯ä»¶&lt;br&gt;æˆ–æ¸¸æˆçš„æè‡´ç¨³å®šï¼Ÿ&#125;;</span><br><span class="line">    G -- æ˜¯ --&gt; H[å»ºè®®æ‰‹åŠ¨è®¾ç½®å›ºå®šå€¼];</span><br><span class="line">    H --&gt; I[å‚è€ƒæ¨èå€¼&lt;br&gt;è®¾ç½®ä¸ºå›ºå®šå¤§å°];</span><br><span class="line"></span><br><span class="line">    G -- å¦ --&gt; C;</span><br><span class="line"></span><br><span class="line">    E &amp; H --&gt; J[**æ‰‹åŠ¨è®¾ç½®é€šç”¨å»ºè®®**&lt;br&gt;åˆå§‹å¤§å° = ç‰©ç†å†…å­˜çš„1-1.5å€&lt;br&gt;æœ€å¤§å€¼ = ç‰©ç†å†…å­˜çš„1.5-3å€];</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœç»è¿‡åˆ¤æ–­ï¼Œä½ ç¡®å®éœ€è¦æ‰‹åŠ¨è®¾ç½®ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹å…·ä½“æ­¥éª¤å’Œé€šç”¨å»ºè®®ï¼š</p><ol><li><p><strong>æ‰“å¼€è®¾ç½®çª—å£</strong>ï¼š</p><ul><li>å³é”®ç‚¹å‡»â€œæ­¤ç”µè„‘â€ï¼Œé€‰æ‹©â€œå±æ€§â€ â†’ â€œé«˜çº§ç³»ç»Ÿè®¾ç½®â€ã€‚</li><li>æˆ–ç›´æ¥æŒ‰ <code>Windowså¾½æ ‡ + R</code> é”®ï¼Œè¾“å…¥ <code>sysdm.cpl</code> åå›è½¦ã€‚</li></ul></li><li><p><strong>è¿›è¡Œè®¾ç½®</strong>ï¼šåœ¨â€œç³»ç»Ÿå±æ€§â€çª—å£ä¸­ï¼Œè¿›å…¥â€œé«˜çº§â€é€‰é¡¹å¡ï¼Œç‚¹å‡»â€œæ€§èƒ½â€ä¸‹çš„â€œè®¾ç½®â€ â†’ å†è¿›å…¥â€œé«˜çº§â€é€‰é¡¹å¡ï¼Œç‚¹å‡»â€œè™šæ‹Ÿå†…å­˜â€ä¸‹çš„â€œæ›´æ”¹â€¦â€ã€‚</p></li><li><p><strong>æ‰‹åŠ¨æŒ‡å®š</strong>ï¼š</p><ul><li>å–æ¶ˆå‹¾é€‰â€œ<strong>è‡ªåŠ¨ç®¡ç†æ‰€æœ‰é©±åŠ¨å™¨çš„åˆ†é¡µæ–‡ä»¶å¤§å°</strong>â€ã€‚</li><li>é€‰æ‹©ä½ æƒ³è¦è®¾ç½®çš„é©±åŠ¨å™¨ï¼ˆé€šå¸¸æ˜¯Cç›˜ï¼‰ã€‚</li><li>é€‰æ‹©â€œ<strong>è‡ªå®šä¹‰å¤§å°</strong>â€ï¼Œåˆ†åˆ«å¡«å†™â€œåˆå§‹å¤§å°â€å’Œâ€œæœ€å¤§å€¼â€ã€‚</li><li>ç‚¹å‡»â€œ<strong>è®¾ç½®</strong>â€æŒ‰é’®ï¼Œç„¶åâ€œç¡®å®šâ€å¹¶é‡å¯ç”µè„‘ä½¿è®¾ç½®ç”Ÿæ•ˆã€‚</li></ul></li></ol><p>æ‰‹åŠ¨è®¾ç½®çš„é€šç”¨å»ºè®®ï¼š</p><ul><li><strong>åˆå§‹å¤§å°</strong>ï¼šè®¾ç½®ä¸ºç‰©ç†å†…å­˜çš„ <strong>1å€åˆ°1.5å€</strong>ã€‚</li><li><strong>æœ€å¤§å€¼</strong>ï¼šè®¾ç½®ä¸ºç‰©ç†å†…å­˜çš„ <strong>1.5å€åˆ°3å€</strong>ã€‚</li></ul><blockquote><p>æ³¨ï¼šä¾‹å¦‚å¯¹äº8GBç‰©ç†å†…å­˜çš„ç”µè„‘ï¼Œåˆå§‹å¤§å°å¯è®¾ä¸º8192MBï¼Œæœ€å¤§å€¼å¯è®¾ä¸º12288MBè‡³24576MBä¹‹é—´ã€‚å¦‚æœä½ çš„ç‰©ç†å†…å­˜æ›´å¤§ï¼ˆå¦‚16GBä»¥ä¸Šï¼‰ï¼Œå€æ•°å¯ä»¥å–æ¨èèŒƒå›´ä¸­è¾ƒå°çš„å€¼ï¼Œç”šè‡³1å€å³å¯ã€‚</p></blockquote><h3 id="âš ï¸-æ³¨æ„äº‹é¡¹"><a href="#âš ï¸-æ³¨æ„äº‹é¡¹" class="headerlink" title="âš ï¸ æ³¨æ„äº‹é¡¹"></a>âš ï¸ æ³¨æ„äº‹é¡¹</h3><ul><li><p><strong>æ‰‹åŠ¨è®¾ç½®çš„é£é™©</strong>ï¼šæ‰‹åŠ¨è®¾ç½®è™šæ‹Ÿå†…å­˜å¹¶éâ€œè¶Šå¤§è¶Šå¥½â€ã€‚å¦‚æœè®¾ç½®å¾—è¿‡å¤§ï¼Œç³»ç»Ÿä¼šé¢‘ç¹åœ°åœ¨ç‰©ç†å†…å­˜å’Œè¿‡å¤§çš„è™šæ‹Ÿå†…å­˜ä¹‹é—´è¿›è¡Œæ•°æ®äº¤æ¢ï¼ˆé¡µé¢æ–‡ä»¶æ“ä½œï¼‰ï¼Œç”±äºç¡¬ç›˜é€Ÿåº¦è¿œæ…¢äºå†…å­˜ï¼Œè¿™åè€Œä¼šå¯¼è‡´ç³»ç»Ÿå“åº”å˜æ…¢ï¼Œå‡ºç°å¡é¡¿ã€‚</p></li><li><p><strong>SSDç”¨æˆ·é¡»çŸ¥</strong>ï¼šå¯¹äºä½¿ç”¨å›ºæ€ç¡¬ç›˜ï¼ˆSSDï¼‰çš„ç”¨æˆ·ï¼Œä¹Ÿ<strong>å»ºè®®å¯ç”¨è™šæ‹Ÿå†…å­˜</strong>ã€‚è™½ç„¶SSDé€Ÿåº¦æ¯”æœºæ¢°ç¡¬ç›˜å¿«å¾ˆå¤šï¼Œä½†ä»è¿œä½äºç‰©ç†å†…å­˜ã€‚å¯ç”¨è™šæ‹Ÿå†…å­˜å¯ä»¥é¿å…å› å†…å­˜ä¸è¶³å¯¼è‡´çš„ç¨‹åºå´©æºƒå’Œç³»ç»Ÿä¸ç¨³å®šã€‚</p></li><li><p><strong>é©±åŠ¨å™¨é€‰æ‹©</strong>ï¼šå»ºè®®<strong>ä¼˜å…ˆå°†è™šæ‹Ÿå†…å­˜è®¾ç½®åœ¨SSDä¸Š</strong>ï¼Œå› ä¸ºè¯»å†™é€Ÿåº¦å¿«å¾—å¤šã€‚å¦‚æœåªæœ‰æœºæ¢°ç¡¬ç›˜ï¼Œå¯ä»¥å°è¯•å°†å…¶è®¾ç½®åœ¨éç³»ç»Ÿç›˜ã€ä¸”å‰©ä½™ç©ºé—´è¾ƒå¤§çš„åˆ†åŒºä¸Šã€‚</p></li></ul><p>å¸Œæœ›è¿™ä»½è¯¦ç»†çš„æŒ‡å—èƒ½å¸®åŠ©ä½ åšå‡ºåˆé€‚çš„é€‰æ‹©ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;å¯¹äºWindowsè™šæ‹Ÿå†…å­˜çš„è®¾ç½®ï¼Œ&lt;strong&gt;ç»å¤§å¤šæ•°æ™®é€šç”¨æˆ·é€‰æ‹©â€œè‡ªåŠ¨ç®¡ç†â€æ˜¯æ›´çœå¿ƒä¸”ç¨³å¦¥çš„æ–¹æ¡ˆ&lt;/strong&gt;ã€‚ä¸è¿‡ï¼Œå¦‚æœä½ æœ‰éå¸¸ç‰¹å®šçš„ä½¿ç”¨éœ€æ±‚ï¼Œæ‰‹åŠ¨è®¾ç½®ä¹Ÿèƒ½ä½œä¸ºä¼˜åŒ–æ‰‹æ®µã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="ç³»ç»Ÿ" scheme="https://xuehuayu.cn/categories/%E7%B3%BB%E7%BB%9F/"/>
    
    <category term="System" scheme="https://xuehuayu.cn/categories/%E7%B3%BB%E7%BB%9F/System/"/>
    
    <category term="Windows" scheme="https://xuehuayu.cn/categories/%E7%B3%BB%E7%BB%9F/System/Windows/"/>
    
    
    <category term="Windows" scheme="https://xuehuayu.cn/tags/Windows/"/>
    
    <category term="è™šæ‹Ÿå†…å­˜" scheme="https://xuehuayu.cn/tags/%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98/"/>
    
    <category term="ä¼˜åŒ–" scheme="https://xuehuayu.cn/tags/%E4%BC%98%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>vue3ä¸­tsæç¤ºæ‰©å¼ å‚æ•°å¿…é¡»å…·æœ‰å…ƒç»„ç±»å‹æˆ–ä¼ é€’ç»™restå‚æ•°</title>
    <link href="https://xuehuayu.cn/article/763d6087.html"/>
    <id>https://xuehuayu.cn/article/763d6087.html</id>
    <published>2025-10-29T08:38:46.000Z</published>
    <updated>2025-12-13T16:23:58.677Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸ªé”™è¯¯é€šå¸¸å‘ç”Ÿåœ¨ TypeScript ä¸­ï¼Œå½“ä½ å°è¯•ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼ˆspread operatorï¼‰<code>...</code> æ—¶ï¼ŒTypeScript æ£€æµ‹åˆ°ç±»å‹ä¸åŒ¹é…ã€‚</p><span id="more"></span><h2 id="é”™è¯¯åŸå› "><a href="#é”™è¯¯åŸå› " class="headerlink" title="é”™è¯¯åŸå› "></a>é”™è¯¯åŸå› </h2><p>è¿™ä¸ªé”™è¯¯è¡¨æ˜ä½ æ­£åœ¨å°è¯•æ‰©å±•ä¸€ä¸ªä¸æ˜¯å…ƒç»„ç±»å‹æˆ–æ•°ç»„ç±»å‹çš„å€¼ã€‚</p><h2 id="å¸¸è§åœºæ™¯å’Œè§£å†³æ–¹æ¡ˆ"><a href="#å¸¸è§åœºæ™¯å’Œè§£å†³æ–¹æ¡ˆ" class="headerlink" title="å¸¸è§åœºæ™¯å’Œè§£å†³æ–¹æ¡ˆ"></a>å¸¸è§åœºæ™¯å’Œè§£å†³æ–¹æ¡ˆ</h2><h3 id="1-å‡½æ•°å‚æ•°æ‰©å±•"><a href="#1-å‡½æ•°å‚æ•°æ‰©å±•" class="headerlink" title="1. å‡½æ•°å‚æ•°æ‰©å±•"></a>1. å‡½æ•°å‚æ•°æ‰©å±•</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">example</span>(<span class="params">...args: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£ç¡®ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">example</span>(<span class="params">...args: <span class="built_in">number</span>[]</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">exampleTuple</span>(<span class="params">...args: [<span class="built_in">string</span>, <span class="built_in">number</span>]</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-æ•°ç»„-å…ƒç»„åˆå¹¶"><a href="#2-æ•°ç»„-å…ƒç»„åˆå¹¶" class="headerlink" title="2. æ•°ç»„&#x2F;å…ƒç»„åˆå¹¶"></a>2. æ•°ç»„&#x2F;å…ƒç»„åˆå¹¶</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">tuple</span>: [<span class="built_in">number</span>, <span class="built_in">string</span>] = [<span class="number">1</span>, <span class="string">&quot;hello&quot;</span>];</span><br><span class="line"><span class="keyword">const</span> arr = [...tuple]; <span class="comment">// å¦‚æœ tuple ç±»å‹å®šä¹‰é”™è¯¯ä¼šæŠ¥é”™</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£ç¡®ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">tuple</span>: [<span class="built_in">number</span>, <span class="built_in">string</span>] = [<span class="number">1</span>, <span class="string">&quot;hello&quot;</span>];</span><br><span class="line"><span class="keyword">const</span> arr = [...tuple]; <span class="comment">// æ­£ç¡®</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–è€…ä½¿ç”¨æ•°ç»„</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">numbers</span>: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> newArray = [...numbers];</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-å¯¹è±¡æ‰©å±•"><a href="#3-å¯¹è±¡æ‰©å±•" class="headerlink" title="3. å¯¹è±¡æ‰©å±•"></a>3. å¯¹è±¡æ‰©å±•</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹è±¡æ‰©å±•é€šå¸¸ä¸ä¼šå‡ºç°è¿™ä¸ªé”™è¯¯</span></span><br><span class="line"><span class="keyword">const</span> obj1 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> obj2 = &#123; ...obj1, <span class="attr">c</span>: <span class="number">3</span> &#125;; <span class="comment">// æ­£ç¡®</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="4-React-ç»„ä»¶-props-æ‰©å±•"><a href="#4-React-ç»„ä»¶-props-æ‰©å±•" class="headerlink" title="4. React ç»„ä»¶ props æ‰©å±•"></a>4. React ç»„ä»¶ props æ‰©å±•</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// React ç»„ä»¶ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ButtonProps</span> &#123;</span><br><span class="line">  <span class="attr">onClick</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  <span class="attr">children</span>: <span class="title class_">React</span>.<span class="property">ReactNode</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Button</span>(<span class="params">props: ButtonProps</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–è€…ä½¿ç”¨ React çš„ç±»å‹</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ButtonHTMLAttributes</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Button</span>(<span class="params">props: ButtonHTMLAttributes&lt;HTMLButtonElement&gt;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="5-æ³›å‹çº¦æŸ"><a href="#5-æ³›å‹çº¦æŸ" class="headerlink" title="5. æ³›å‹çº¦æŸ"></a>5. æ³›å‹çº¦æŸ</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨æ³›å‹çº¦æŸç¡®ä¿å¯è¿­ä»£</span></span><br><span class="line"><span class="keyword">function</span> mergeArrays&lt;T <span class="keyword">extends</span> <span class="built_in">any</span>[]&gt;(...<span class="attr">arrays</span>: T[]): T &#123;</span><br><span class="line">  <span class="keyword">return</span> arrays.<span class="title function_">flat</span>() <span class="keyword">as</span> T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="è°ƒè¯•æŠ€å·§"><a href="#è°ƒè¯•æŠ€å·§" class="headerlink" title="è°ƒè¯•æŠ€å·§"></a>è°ƒè¯•æŠ€å·§</h2><ol><li><strong>æ£€æŸ¥ç±»å‹å®šä¹‰</strong>ï¼šç¡®ä¿ä½ æ‰©å±•çš„å€¼æœ‰æ­£ç¡®çš„æ•°ç»„æˆ–å…ƒç»„ç±»å‹</li><li><strong>ä½¿ç”¨ç±»å‹æ–­è¨€</strong>ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰ï¼š <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> value = someValue <span class="keyword">as</span> <span class="built_in">any</span>[];</span><br><span class="line"><span class="keyword">const</span> result = [...value];</span><br></pre></td></tr></table></figure></li><li><strong>æ£€æŸ¥ç¬¬ä¸‰æ–¹åº“ç±»å‹</strong>ï¼šæŸäº›åº“å¯èƒ½éœ€è¦å®‰è£…å¯¹åº”çš„ç±»å‹å®šä¹‰</li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;è¿™ä¸ªé”™è¯¯é€šå¸¸å‘ç”Ÿåœ¨ TypeScript ä¸­ï¼Œå½“ä½ å°è¯•ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼ˆspread operatorï¼‰&lt;code&gt;...&lt;/code&gt; æ—¶ï¼ŒTypeScript æ£€æµ‹åˆ°ç±»å‹ä¸åŒ¹é…ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="FrontEnd" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/FrontEnd/"/>
    
    <category term="Vue3" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/FrontEnd/Vue3/"/>
    
    
    <category term="Vue3" scheme="https://xuehuayu.cn/tags/Vue3/"/>
    
    <category term="ts" scheme="https://xuehuayu.cn/tags/ts/"/>
    
    <category term="Vetur" scheme="https://xuehuayu.cn/tags/Vetur/"/>
    
    <category term="Volar" scheme="https://xuehuayu.cn/tags/Volar/"/>
    
    <category term="export" scheme="https://xuehuayu.cn/tags/export/"/>
    
    <category term="spread" scheme="https://xuehuayu.cn/tags/spread/"/>
    
  </entry>
  
  <entry>
    <title>vue3 ç»„ä»¶ has no default export</title>
    <link href="https://xuehuayu.cn/article/2f775138.html"/>
    <id>https://xuehuayu.cn/article/2f775138.html</id>
    <published>2025-10-29T08:35:35.000Z</published>
    <updated>2025-12-13T16:23:58.676Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ Vue 3 é¡¹ç›®ä¸­é‡åˆ° â€œhas no default exportâ€ çš„æç¤ºï¼Œé€šå¸¸ä¸æ˜¯å› ä¸ºä½ çš„ä»£ç å†™é”™äº†ï¼Œè€Œæ˜¯ç”±äº <strong>VSCode çš„ Vue æ‰©å±• <code>Vetur</code> å¯¹ Vue 3 å’Œ <code>&lt;script setup&gt;</code> è¯­æ³•æ”¯æŒä¸å®Œå–„</strong>å¯¼è‡´çš„ã€‚</p><span id="more"></span><p>åˆ«æ‹…å¿ƒï¼Œè¿™é‡Œæœ‰å‡ ä¸ªè§£å†³æ–¹æ³•ï¼Œä½ å¯ä»¥æ ¹æ®æƒ…å†µå°è¯•ã€‚</p><h3 id="æ¨èçš„è§£å†³æ–¹æ¡ˆ-ğŸ¥‡"><a href="#æ¨èçš„è§£å†³æ–¹æ¡ˆ-ğŸ¥‡" class="headerlink" title="æ¨èçš„è§£å†³æ–¹æ¡ˆ ğŸ¥‡"></a>æ¨èçš„è§£å†³æ–¹æ¡ˆ ğŸ¥‡</h3><p>æœ€å½»åº•å’Œæ¨èçš„æ–¹æ³•æ˜¯<strong>æ›´æ¢ VSCode æ’ä»¶</strong>ã€‚</p><ol><li><strong>ç¦ç”¨æˆ–å¸è½½ <code>Vetur</code></strong>ï¼šåœ¨ VSCode çš„æ‰©å±•é¢æ¿ä¸­ï¼Œæ‰¾åˆ° Vetur å¹¶å°†å…¶ç¦ç”¨æˆ–ç›´æ¥å¸è½½ã€‚</li><li><strong>å®‰è£… <code>Volar</code></strong>ï¼šåœ¨ VSCode æ‰©å±•å•†åº—ä¸­æœç´¢å¹¶å®‰è£… <code>Vue Language Features (Volar)</code>ã€‚è¿™æ˜¯ Vue å®˜æ–¹å›¢é˜Ÿæ¨èçš„æ–°ä¸€ä»£ Vue å·¥å…·æ’ä»¶ï¼Œå®Œç¾æ”¯æŒ Vue 3ã€TypeScript å’Œ <code>&lt;script setup&gt;</code> è¯­æ³•ã€‚</li><li><strong>é‡å¯ VSCode</strong>ï¼šå®Œæˆä¸Šè¿°æ“ä½œåï¼Œé‡å¯ VSCodeï¼Œé”™è¯¯æç¤ºåº”è¯¥å°±ä¼šæ¶ˆå¤±ã€‚</li></ol><blockquote><p>æ³¨ï¼šå¦‚æœä½ åœ¨ä½¿ç”¨ TypeScriptï¼Œå»ºè®®åŒæ—¶å®‰è£… <code>TypeScript Vue Plugin</code> æ’ä»¶ï¼Œå®ƒå¯ä»¥æ›´å¥½åœ°æ”¯æŒåœ¨ <code>.ts</code> æ–‡ä»¶ä¸­å¯¼å…¥ <code>.vue</code> ç»„ä»¶ã€‚</p></blockquote><h3 id="å…¶ä»–å¤‡é€‰æ–¹æ¡ˆ"><a href="#å…¶ä»–å¤‡é€‰æ–¹æ¡ˆ" class="headerlink" title="å…¶ä»–å¤‡é€‰æ–¹æ¡ˆ"></a>å…¶ä»–å¤‡é€‰æ–¹æ¡ˆ</h3><p>å¦‚æœä¸Šè¿°æ–¹æ³•ä¸é€‚ç”¨ï¼Œä½ å¯ä»¥è€ƒè™‘ä»¥ä¸‹é€‰æ‹©ï¼š</p><ul><li><p><strong>ä¸´æ—¶é…ç½® Vetur</strong>ï¼šå¦‚æœæš‚æ—¶ä¸æƒ³å¸è½½ Veturï¼Œå¯ä»¥åœ¨ VSCode çš„è®¾ç½®ä¸­ï¼ˆ<code>settings.json</code>ï¼‰æ·»åŠ ä»¥ä¸‹é…ç½®æ¥å…³é—­ Vetur çš„è„šæœ¬éªŒè¯ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;vetur.validation.script&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šè¿™åªæ˜¯æ¶ˆé™¤äº†é”™è¯¯æç¤ºï¼Œå¹¶æœªä»æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜ã€‚</p></blockquote></li><li><p><strong>æ£€æŸ¥æ¨¡å—å¯¼å‡ºç±»å‹ï¼ˆé’ˆå¯¹JS&#x2F;TSåº“ï¼‰</strong>ï¼šå¦‚æœä½ åœ¨å¯¼å…¥ä¸€ä¸ªé Vue ç»„ä»¶çš„ JavaScript&#x2F;TypeScript åº“æ—¶é‡åˆ°ç±»ä¼¼é”™è¯¯ï¼ˆä¾‹å¦‚ <code>&quot;default&quot; is not exported by ...</code>ï¼‰ï¼Œè¿™è¡¨ç¤ºè¯¥åº“å¯èƒ½æ²¡æœ‰ä½¿ç”¨ <code>export default</code> è¯­æ³•ã€‚è¿™æ—¶ï¼Œä½ éœ€è¦æ ¹æ®è¯¥åº“æä¾›çš„å¯¼å‡ºæ–¹å¼ï¼Œä½¿ç”¨<strong>å‘½åå¯¼å…¥</strong>è€Œéé»˜è®¤å¯¼å…¥ã€‚</p><p><strong>é»˜è®¤å¯¼å…¥</strong>ï¼ˆå¯èƒ½å¯¼è‡´é”™è¯¯ï¼‰ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> myLib <span class="keyword">from</span> <span class="string">&#x27;my-library&#x27;</span>;</span><br></pre></td></tr></table></figure><p><strong>å‘½åå¯¼å…¥</strong>ï¼ˆå¯èƒ½ä¸ºæ­£ç¡®æ–¹å¼ï¼‰ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; myFunction &#125; <span class="keyword">from</span> <span class="string">&#x27;my-library&#x27;</span>;</span><br></pre></td></tr></table></figure><p>å…·ä½“åº”ä½¿ç”¨å“ªç§æ–¹å¼ï¼Œè¯·æŸ¥é˜…è¯¥åº“çš„å®˜æ–¹æ–‡æ¡£ã€‚</p></li></ul><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œâ€has no default exportâ€ çš„æç¤ºé€šè¿‡ <strong>ç”¨ Volar æ›¿æ¢ Vetur å³å¯è§£å†³</strong>ã€‚è¿™ä¸ªæ–¹æ¡ˆä¹Ÿæ˜¯ Vue ä½œè€…å°¤é›¨æºªæ‰€æ¨èçš„ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨ Vue 3 é¡¹ç›®ä¸­é‡åˆ° â€œhas no default exportâ€ çš„æç¤ºï¼Œé€šå¸¸ä¸æ˜¯å› ä¸ºä½ çš„ä»£ç å†™é”™äº†ï¼Œè€Œæ˜¯ç”±äº &lt;strong&gt;VSCode çš„ Vue æ‰©å±• &lt;code&gt;Vetur&lt;/code&gt; å¯¹ Vue 3 å’Œ &lt;code&gt;&amp;lt;script setup&amp;gt;&lt;/code&gt; è¯­æ³•æ”¯æŒä¸å®Œå–„&lt;/strong&gt;å¯¼è‡´çš„ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="FrontEnd" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/FrontEnd/"/>
    
    <category term="Vue3" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/FrontEnd/Vue3/"/>
    
    
    <category term="Vue3" scheme="https://xuehuayu.cn/tags/Vue3/"/>
    
    <category term="ts" scheme="https://xuehuayu.cn/tags/ts/"/>
    
    <category term="Vetur" scheme="https://xuehuayu.cn/tags/Vetur/"/>
    
    <category term="Volar" scheme="https://xuehuayu.cn/tags/Volar/"/>
    
    <category term="export" scheme="https://xuehuayu.cn/tags/export/"/>
    
  </entry>
  
  <entry>
    <title>js es6 class ç±»ä¸­çš„å€¼æ˜¯å¼‚æ­¥èµ‹å€¼ï¼Œ å­ç±»ä¸­å¦‚ä½•è·å–è¿™ä¸ªå€¼ï¼Ÿ</title>
    <link href="https://xuehuayu.cn/article/37e1f99c.html"/>
    <id>https://xuehuayu.cn/article/37e1f99c.html</id>
    <published>2025-10-29T08:32:57.000Z</published>
    <updated>2025-12-13T16:23:58.674Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ ES6 ç±»ä¸­ï¼Œå¦‚æœçˆ¶ç±»çš„å±æ€§æ˜¯é€šè¿‡<strong>å¼‚æ­¥èµ‹å€¼</strong>çš„ï¼Œå­ç±»èƒ½å¦è·å–åˆ°è¿™ä¸ªå€¼å–å†³äº<strong>è®¿é—®æ—¶æœº</strong>ã€‚ä¸‹é¢é€šè¿‡ä»£ç ç¤ºä¾‹è¯¦ç»†è¯´æ˜ï¼š</p><span id="more"></span><h2 id="1-åŒæ­¥-vs-å¼‚æ­¥èµ‹å€¼çš„åŒºåˆ«"><a href="#1-åŒæ­¥-vs-å¼‚æ­¥èµ‹å€¼çš„åŒºåˆ«" class="headerlink" title="1. åŒæ­¥ vs å¼‚æ­¥èµ‹å€¼çš„åŒºåˆ«"></a>1. åŒæ­¥ vs å¼‚æ­¥èµ‹å€¼çš„åŒºåˆ«</h2><h3 id="åŒæ­¥èµ‹å€¼ï¼ˆæ­£å¸¸æƒ…å†µï¼‰"><a href="#åŒæ­¥èµ‹å€¼ï¼ˆæ­£å¸¸æƒ…å†µï¼‰" class="headerlink" title="åŒæ­¥èµ‹å€¼ï¼ˆæ­£å¸¸æƒ…å†µï¼‰"></a>åŒæ­¥èµ‹å€¼ï¼ˆæ­£å¸¸æƒ…å†µï¼‰</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">syncValue</span> = <span class="string">&#x27;åŒæ­¥å€¼&#x27;</span>; <span class="comment">// åŒæ­¥èµ‹å€¼</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Parent</span> &#123;</span><br><span class="line">  <span class="title function_">getValues</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">syncValue</span>: <span class="variable language_">this</span>.<span class="property">syncValue</span> <span class="comment">// å¯ä»¥æ­£å¸¸è·å–</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> child = <span class="keyword">new</span> <span class="title class_">Child</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(child.<span class="title function_">getValues</span>()); <span class="comment">// &#123; syncValue: &#x27;åŒæ­¥å€¼&#x27; &#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å¼‚æ­¥èµ‹å€¼çš„æƒ…å†µ"><a href="#å¼‚æ­¥èµ‹å€¼çš„æƒ…å†µ" class="headerlink" title="å¼‚æ­¥èµ‹å€¼çš„æƒ…å†µ"></a>å¼‚æ­¥èµ‹å€¼çš„æƒ…å†µ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">asyncValue</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="comment">// å¼‚æ­¥èµ‹å€¼</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">asyncValue</span> = <span class="string">&#x27;å¼‚æ­¥èµ‹å€¼å®Œæˆ&#x27;</span>;</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Parent</span> &#123;</span><br><span class="line">  <span class="title function_">getValues</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">asyncValue</span>: <span class="variable language_">this</span>.<span class="property">asyncValue</span> <span class="comment">// âŒ ç«‹å³è®¿é—®å¯èƒ½ä¸º null</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> child = <span class="keyword">new</span> <span class="title class_">Child</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(child.<span class="title function_">getValues</span>()); <span class="comment">// &#123; asyncValue: null &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1ç§’åå†è®¿é—®</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(child.<span class="title function_">getValues</span>()); <span class="comment">// &#123; asyncValue: &#x27;å¼‚æ­¥èµ‹å€¼å®Œæˆ&#x27; &#125;</span></span><br><span class="line">&#125;, <span class="number">1500</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2-è§£å†³æ–¹æ¡ˆ"><a href="#2-è§£å†³æ–¹æ¡ˆ" class="headerlink" title="2. è§£å†³æ–¹æ¡ˆ"></a>2. è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ¡ˆ-1ï¼šä½¿ç”¨-Promise-ç®¡ç†å¼‚æ­¥çŠ¶æ€"><a href="#æ–¹æ¡ˆ-1ï¼šä½¿ç”¨-Promise-ç®¡ç†å¼‚æ­¥çŠ¶æ€" class="headerlink" title="æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ Promise ç®¡ç†å¼‚æ­¥çŠ¶æ€"></a>æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ Promise ç®¡ç†å¼‚æ­¥çŠ¶æ€</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">asyncValue</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">valueReady</span> = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">asyncValue</span> = <span class="string">&#x27;å¼‚æ­¥èµ‹å€¼å®Œæˆ&#x27;</span>;</span><br><span class="line">        <span class="title function_">resolve</span>(<span class="variable language_">this</span>.<span class="property">asyncValue</span>);</span><br><span class="line">      &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Parent</span> &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">getValues</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// ç­‰å¾…å¼‚æ­¥èµ‹å€¼å®Œæˆ</span></span><br><span class="line">    <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">valueReady</span>;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">asyncValue</span>: <span class="variable language_">this</span>.<span class="property">asyncValue</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">const</span> child = <span class="keyword">new</span> <span class="title class_">Child</span>();</span><br><span class="line">child.<span class="title function_">getValues</span>().<span class="title function_">then</span>(<span class="function"><span class="params">values</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(values); <span class="comment">// &#123; asyncValue: &#x27;å¼‚æ­¥èµ‹å€¼å®Œæˆ&#x27; &#125;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ–¹æ¡ˆ-2ï¼šä½¿ç”¨-async-await-æ¨¡å¼"><a href="#æ–¹æ¡ˆ-2ï¼šä½¿ç”¨-async-await-æ¨¡å¼" class="headerlink" title="æ–¹æ¡ˆ 2ï¼šä½¿ç”¨ async&#x2F;await æ¨¡å¼"></a>æ–¹æ¡ˆ 2ï¼šä½¿ç”¨ async&#x2F;await æ¨¡å¼</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">initialized</span> = <span class="variable language_">this</span>.<span class="title function_">init</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">init</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">asyncValue</span> = <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="title function_">resolve</span>(<span class="string">&#x27;å¼‚æ­¥å€¼&#x27;</span>), <span class="number">1000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">ensureInitialized</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">initialized</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Parent</span> &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">getAsyncValue</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">ensureInitialized</span>(); <span class="comment">// ç­‰å¾…çˆ¶ç±»åˆå§‹åŒ–å®Œæˆ</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">asyncValue</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">const</span> child = <span class="keyword">new</span> <span class="title class_">Child</span>();</span><br><span class="line">child.<span class="title function_">getAsyncValue</span>().<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// &#x27;å¼‚æ­¥å€¼&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ–¹æ¡ˆ-3ï¼šäº‹ä»¶é©±åŠ¨æ¨¡å¼"><a href="#æ–¹æ¡ˆ-3ï¼šäº‹ä»¶é©±åŠ¨æ¨¡å¼" class="headerlink" title="æ–¹æ¡ˆ 3ï¼šäº‹ä»¶é©±åŠ¨æ¨¡å¼"></a>æ–¹æ¡ˆ 3ï¼šäº‹ä»¶é©±åŠ¨æ¨¡å¼</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">asyncValue</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">listeners</span> = [];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">asyncValue</span> = <span class="string">&#x27;å¼‚æ­¥å€¼&#x27;</span>;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">listeners</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">callback</span> =&gt;</span> <span class="title function_">callback</span>(<span class="variable language_">this</span>.<span class="property">asyncValue</span>));</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onValueReady</span>(<span class="params">callback</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">asyncValue</span>) &#123;</span><br><span class="line">      <span class="title function_">callback</span>(<span class="variable language_">this</span>.<span class="property">asyncValue</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">listeners</span>.<span class="title function_">push</span>(callback);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Parent</span> &#123;</span><br><span class="line">  <span class="title function_">getValue</span>(<span class="params">callback</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">onValueReady</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">callback</span>(value);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">const</span> child = <span class="keyword">new</span> <span class="title class_">Child</span>();</span><br><span class="line">child.<span class="title function_">getValue</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// &#x27;å¼‚æ­¥å€¼&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="3-å®é™…åº”ç”¨åœºæ™¯"><a href="#3-å®é™…åº”ç”¨åœºæ™¯" class="headerlink" title="3. å®é™…åº”ç”¨åœºæ™¯"></a>3. å®é™…åº”ç”¨åœºæ™¯</h2><h3 id="å¼‚æ­¥æ•°æ®è·å–"><a href="#å¼‚æ­¥æ•°æ®è·å–" class="headerlink" title="å¼‚æ­¥æ•°æ®è·å–"></a>å¼‚æ­¥æ•°æ®è·å–</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ApiService</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">userData</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">initialized</span> = <span class="variable language_">this</span>.<span class="title function_">fetchUserData</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">fetchUserData</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// æ¨¡æ‹Ÿ API è°ƒç”¨</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">userData</span> = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/api/user&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> res.<span class="title function_">json</span>());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">ensureReady</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">initialized</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">ApiService</span> &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">getUserProfile</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">ensureReady</span>();</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">userData</span>.<span class="property">name</span>,</span><br><span class="line">      <span class="attr">email</span>: <span class="variable language_">this</span>.<span class="property">userData</span>.<span class="property">email</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li><strong>å­ç±»å¯ä»¥è·å–çˆ¶ç±»çš„å¼‚æ­¥èµ‹å€¼</strong>ï¼Œä½†å¿…é¡»åœ¨<strong>å¼‚æ­¥æ“ä½œå®Œæˆå</strong></li><li>ç«‹å³è®¿é—®å¯èƒ½å¾—åˆ° <code>null</code> æˆ–åˆå§‹å€¼</li><li>æ¨èä½¿ç”¨ <strong>Promise</strong> æˆ– <strong>async&#x2F;await</strong> æ¥ç®¡ç†å¼‚æ­¥çŠ¶æ€</li><li>é€šè¿‡ç­‰å¾…åˆå§‹åŒ–å®Œæˆçš„æ–¹æ³•ç¡®ä¿æ•°æ®å¯ç”¨æ€§</li><li>äº‹ä»¶ç›‘å¬æ¨¡å¼é€‚åˆéœ€è¦å®æ—¶å“åº”çš„åœºæ™¯</li></ul><p>å…³é”®åœ¨äº<strong>æ—¶åºæ§åˆ¶</strong> - ç¡®ä¿åœ¨è®¿é—®å¼‚æ­¥å€¼ä¹‹å‰ï¼Œç›¸å…³çš„å¼‚æ­¥æ“ä½œå·²ç»å®Œæˆã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨ ES6 ç±»ä¸­ï¼Œå¦‚æœçˆ¶ç±»çš„å±æ€§æ˜¯é€šè¿‡&lt;strong&gt;å¼‚æ­¥èµ‹å€¼&lt;/strong&gt;çš„ï¼Œå­ç±»èƒ½å¦è·å–åˆ°è¿™ä¸ªå€¼å–å†³äº&lt;strong&gt;è®¿é—®æ—¶æœº&lt;/strong&gt;ã€‚ä¸‹é¢é€šè¿‡ä»£ç ç¤ºä¾‹è¯¦ç»†è¯´æ˜ï¼š&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="FrontEnd" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/FrontEnd/"/>
    
    <category term="Class" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/FrontEnd/Class/"/>
    
    
    <category term="Class" scheme="https://xuehuayu.cn/tags/Class/"/>
    
    <category term="çˆ¶ç±»" scheme="https://xuehuayu.cn/tags/%E7%88%B6%E7%B1%BB/"/>
    
    <category term="å­ç±»" scheme="https://xuehuayu.cn/tags/%E5%AD%90%E7%B1%BB/"/>
    
    <category term="å¼‚æ­¥" scheme="https://xuehuayu.cn/tags/%E5%BC%82%E6%AD%A5/"/>
    
  </entry>
  
  <entry>
    <title>ä¸‰å²å­©å­ä¸ç»™çœ‹ç”µè§†å°±ä¸åƒé¥­æ€ä¹ˆåŠ</title>
    <link href="https://xuehuayu.cn/article/332cad3d.html"/>
    <id>https://xuehuayu.cn/article/332cad3d.html</id>
    <published>2025-10-27T10:45:32.000Z</published>
    <updated>2025-12-13T16:23:58.673Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§ä¸”è®©å¾ˆå¤šå®¶é•¿å¤´ç–¼çš„é—®é¢˜ã€‚ä¸‰å²çš„å­©å­æ­£å¤„äºè‡ªä¸»æ„è¯†èŒå‘çš„é˜¶æ®µï¼Œç”¨ä¸åƒé¥­æ¥â€œè¦æŒŸâ€çœ‹ç”µè§†ï¼Œæˆ–è€…å› ä¸ºä¹ æƒ¯äº†ç”µè§†ä¼´é¥­è€Œå¤±å»è‡ªä¸»è¿›é£Ÿçš„å…´è¶£ï¼Œéƒ½æ˜¯å…¸å‹çš„è¡¨ç°ã€‚</p><span id="more"></span><p>é¦–å…ˆï¼Œè¯·ç†è§£å¹¶åšå®šä¸€ä¸ªæ ¸å¿ƒåŸåˆ™ï¼š<strong>åƒé¥­å’Œçœ‹ç”µè§†æ˜¯ä¸¤ä»¶ç‹¬ç«‹çš„äº‹æƒ…ï¼Œä¸åº”è¯¥è¢«æ†ç»‘åœ¨ä¸€èµ·ã€‚</strong> ç”¨çœ‹ç”µè§†æ¢æ¥çš„ä¸€æ—¶å®‰é™åƒé¥­ï¼Œé•¿è¿œæ¥çœ‹ä¼šå¸¦æ¥æ›´å¤šé—®é¢˜ï¼Œå¦‚æ¶ˆåŒ–ä¸è‰¯ã€æ³¨æ„åŠ›ä¸é›†ä¸­ã€è‡ªä¸»è¿›é£Ÿèƒ½åŠ›ç¼ºå¤±ç­‰ã€‚</p><p>ä»¥ä¸‹æ˜¯é’ˆå¯¹â€œä¸çœ‹ç”µè§†ä¸åƒé¥­â€è¿™ä¸ªé—®é¢˜çš„è¯¦ç»†è§£å†³æ­¥éª¤å’Œç­–ç•¥ï¼Œè¯·æ‚¨è€å¿ƒå¹¶åšæŒæ‰§è¡Œï¼š</p><h3 id="ç¬¬ä¸€æ­¥ï¼šç«‹å³è¡ŒåŠ¨â€”â€”å»ºç«‹æ¸…æ™°çš„è§„åˆ™"><a href="#ç¬¬ä¸€æ­¥ï¼šç«‹å³è¡ŒåŠ¨â€”â€”å»ºç«‹æ¸…æ™°çš„è§„åˆ™" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šç«‹å³è¡ŒåŠ¨â€”â€”å»ºç«‹æ¸…æ™°çš„è§„åˆ™"></a>ç¬¬ä¸€æ­¥ï¼šç«‹å³è¡ŒåŠ¨â€”â€”å»ºç«‹æ¸…æ™°çš„è§„åˆ™</h3><ol><li><strong>å…¨å®¶ç»Ÿä¸€ç«‹åœºï¼Œåšå†³æ‰§è¡Œ</strong>ï¼šæ‰€æœ‰å®¶åº­æˆå‘˜ï¼ˆåŒ…æ‹¬çˆ·çˆ·å¥¶å¥¶&#x2F;å¤–å…¬å¤–å©†ï¼‰å¿…é¡»è¾¾æˆä¸€è‡´ï¼Œä»ä»Šå¤©èµ·ï¼Œåƒé¥­æ—¶é—´ç»ä¸å¼€ç”µè§†ã€‚è¿™æ˜¯æˆåŠŸçš„å…³é”®ã€‚</li><li><strong>æ¸©å’Œè€Œåšå®šåœ°å‘ŠçŸ¥å­©å­</strong>ï¼šç”¨ç®€å•ç›´æ¥çš„è¯­è¨€å‘Šè¯‰å­©å­æ–°è§„åˆ™ã€‚â€œå®å®ï¼Œä»ä»Šå¤©å¼€å§‹ï¼Œæˆ‘ä»¬åƒé¥­çš„æ—¶å€™è¦å…³æ‰ç”µè§†äº†ã€‚åƒå®Œé¥­ï¼Œæˆ‘ä»¬å†çœ‹ä¸€ä¼šå„¿ã€‚â€ æ— è®ºä»–å¦‚ä½•å“­é—¹ï¼Œéƒ½è¦ä¿æŒå¹³é™ï¼Œé‡å¤è§„åˆ™ã€‚</li><li><strong>åšå¥½å¿ƒç†å‡†å¤‡ï¼Œæ¥å—æš‚æ—¶çš„â€œé¥¥é¥¿â€</strong>ï¼šåœ¨æ”¹å˜åˆæœŸï¼Œå­©å­å¾ˆå¯èƒ½ä¼šå› ä¸ºæ„¿æœ›æœªè¢«æ»¡è¶³è€Œæ‹’ç»åƒé¥­ã€‚è¿™æ˜¯æœ€è€ƒéªŒå®¶é•¿çš„æ—¶åˆ»ã€‚è¯·ç›¸ä¿¡ï¼Œ<strong>ä¸€ä¸¤é¡¿åƒä¸é¥±ï¼Œä¸ä¼šå½±å“å­©å­çš„å¥åº·</strong>ï¼Œä½†è¿™æ˜¯ä»–å­¦ä¹ è§„åˆ™å¿…é¡»ç»å†çš„è¿‡ç¨‹ã€‚ä»–ä¼šæ˜ç™½ï¼Œå“­é—¹æ— æ³•æ”¹å˜è§„åˆ™ã€‚</li></ol><h3 id="ç¬¬äºŒæ­¥ï¼šé•¿æœŸç­–ç•¥â€”â€”è®©åƒé¥­å˜å¾—æœ‰å¸å¼•åŠ›"><a href="#ç¬¬äºŒæ­¥ï¼šé•¿æœŸç­–ç•¥â€”â€”è®©åƒé¥­å˜å¾—æœ‰å¸å¼•åŠ›" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šé•¿æœŸç­–ç•¥â€”â€”è®©åƒé¥­å˜å¾—æœ‰å¸å¼•åŠ›"></a>ç¬¬äºŒæ­¥ï¼šé•¿æœŸç­–ç•¥â€”â€”è®©åƒé¥­å˜å¾—æœ‰å¸å¼•åŠ›</h3><p>å½“æ‹¿èµ°äº†â€œç”µè§†â€è¿™ä¸ªå¤–éƒ¨åˆºæ¿€åï¼Œæˆ‘ä»¬éœ€è¦è®©â€œåƒé¥­â€æœ¬èº«å˜å¾—æœ‰è¶£ï¼Œé‡æ–°æ¿€å‘å­©å­å†…åœ¨çš„è¿›é£Ÿæ¬²æœ›ã€‚</p><ol><li><p><strong>è®©å­©å­å‚ä¸è¿‡ç¨‹</strong>ï¼š</p><ul><li><strong>ä¸€èµ·å‡†å¤‡é£Ÿæ</strong>ï¼šå¸¦ä»–ä¸€èµ·å»ä¹°èœï¼Œè®©ä»–æŒ‘é€‰å–œæ¬¢çš„è”¬èœï¼ˆæ¯”å¦‚â€œæˆ‘ä»¬ä»Šå¤©ä¹°è¿™ä¸ªçº¢è‰²çš„ç•ªèŒ„è¿˜æ˜¯ç»¿è‰²çš„é»„ç“œï¼Ÿâ€ï¼‰ã€‚</li><li><strong>ç®€å•å‚ä¸çƒ¹é¥ª</strong>ï¼šè®©ä»–æ´—èœã€é€’ä¸œè¥¿ã€æ‘†ç¢—ç­·ã€‚ä»–ä¼šå¯¹è‡ªå·±å‚ä¸åˆ¶ä½œçš„é£Ÿç‰©æ›´æœ‰å…´è¶£ã€‚</li><li><strong>èµ‹äºˆé€‰æ‹©æƒ</strong>ï¼šæä¾›æœ‰é™çš„å¥åº·é€‰æ‹©ï¼Œæ¯”å¦‚â€œä½ æƒ³ç”¨å°ç‹—ç¢—è¿˜æ˜¯å°ç†Šç¢—åƒé¥­ï¼Ÿâ€â€œä½ æƒ³å…ˆåƒèƒ¡èåœè¿˜æ˜¯è¥¿å…°èŠ±ï¼Ÿâ€è¿™èƒ½æ»¡è¶³ä»–çš„è‡ªä¸»æ„Ÿã€‚</li></ul></li><li><p><strong>æ‰“é€ æ„‰å¿«çš„è¿›é¤æ°›å›´</strong>ï¼š</p><ul><li><strong>å›ºå®šæ—¶é—´å’Œåœ°ç‚¹</strong>ï¼šåœ¨é¤æ¡Œä¸Šåƒé¥­ï¼Œå½¢æˆä»ªå¼æ„Ÿã€‚å…¨å®¶å°½é‡ä¸€èµ·åƒé¥­ï¼Œåˆ›é€ è½»æ¾èŠå¤©çš„æ°›å›´ï¼Œè€Œä¸æ˜¯åªç›¯ç€å­©å­ã€‚</li><li><strong>è®©é£Ÿç‰©å˜å¾—æœ‰è¶£</strong>ï¼šæŠŠé£Ÿç‰©åšæˆå¯çˆ±çš„é€ å‹ï¼Œæ¯”å¦‚é¥­å›¢åšæˆå°ç†Šã€èƒ¡èåœåˆ‡æˆæ˜Ÿæ˜Ÿã€‚ä½¿ç”¨è‰²å½©é²œè‰³çš„é¤ç›˜ã€‚</li><li><strong>æ­£é¢æè¿°é£Ÿç‰©</strong>ï¼šç”¨ç”ŸåŠ¨çš„è¯­è¨€æè¿°é£Ÿç‰©ï¼Œâ€œè¿™ä¸ªåœŸè±†æ³¥åƒä¸åƒäº‘æœµï¼Ÿâ€â€œå¬ï¼Œå’¬é»„ç“œçš„å£°éŸ³å¤šæ¸…è„†ï¼â€ é¿å…è¯´â€œè¿™ä¸ªæœ‰è¥å…»ï¼Œå¿«åƒâ€è¿™ç§è¯´æ•™è¯­è¨€ã€‚</li></ul></li><li><p><strong>ç®¡ç†é›¶é£Ÿå’Œå¥¶é‡</strong>ï¼š</p><ul><li>ä¸¥æ ¼æ§åˆ¶æ­£é¤ä¹‹é—´çš„é›¶é£Ÿï¼Œå°¤å…¶æ˜¯é¥­å‰1-2å°æ—¶å†…ä¸è¦ç»™ä»»ä½•é›¶é£Ÿã€æœæ±æˆ–ç‰›å¥¶ã€‚</li><li>ç¡®ä¿å¥¶æ˜¯è¾…é£Ÿï¼Œè€Œä¸æ˜¯ä¸»é£Ÿã€‚ä¸‰å²å­©å­æ¯æ—¥å¥¶é‡å»ºè®®åœ¨360-480mlå·¦å³ï¼Œè¿‡å¤šä¼šå½±å“æ­£é¤é£Ÿæ¬²ã€‚</li></ul></li></ol><h3 id="ç¬¬ä¸‰æ­¥ï¼šåº”å¯¹å“­é—¹å’Œæ‹’é£Ÿçš„â€œæˆ˜æœ¯â€"><a href="#ç¬¬ä¸‰æ­¥ï¼šåº”å¯¹å“­é—¹å’Œæ‹’é£Ÿçš„â€œæˆ˜æœ¯â€" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šåº”å¯¹å“­é—¹å’Œæ‹’é£Ÿçš„â€œæˆ˜æœ¯â€"></a>ç¬¬ä¸‰æ­¥ï¼šåº”å¯¹å“­é—¹å’Œæ‹’é£Ÿçš„â€œæˆ˜æœ¯â€</h3><p>å½“è§„åˆ™å»ºç«‹åˆæœŸï¼Œå­©å­å“­é—¹æ—¶ï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š</p><ol><li><p><strong>å…±æƒ…ï¼Œä½†ä¸å¦¥å</strong>ï¼šâ€œå¦ˆå¦ˆçŸ¥é“ä½ æƒ³çœ‹ç”µè§†ï¼Œä¸èƒ½çœ‹ç”µè§†è®©ä½ å¾ˆéš¾è¿‡ã€‚æˆ‘ä»¬å¯ä»¥å…ˆåƒå®Œé¥­ï¼Œå†ä¸€èµ·çœ‹ä¸€é›†ä½ æœ€å–œæ¬¢çš„åŠ¨ç”»ç‰‡ã€‚â€ æ‰¿è®¤ä»–çš„æƒ…ç»ªï¼Œä½†åšæŒåŸåˆ™ã€‚</p></li><li><p><strong>è®¾å®šâ€œé¥­åèŠ‚ç›®â€</strong>ï¼šæ‰¿è¯ºé¥­åå¯ä»¥æœ‰çŸ­æš‚çš„äº²å­æ´»åŠ¨ï¼Œæ¯”å¦‚çœ‹15åˆ†é’Ÿç”µè§†ã€è¯»ä¸€æœ¬ç»˜æœ¬æˆ–ç©ä¸€ä¸ªæ¸¸æˆã€‚è¿™ç»™äº†ä»–ä¸€ä¸ªæœŸå¾…ï¼Œå¹¶ä¸”è®©ä»–çŸ¥é“â€œåƒé¥­â€æ˜¯è¿›è¡Œä¸‹ä¸€ä»¶æœ‰è¶£äº‹æƒ…çš„å¿…ç»æ­¥éª¤ã€‚</p></li><li><p><strong>â€œä¸å‚¬ä¿ƒã€ä¸å¼ºè¿«ã€ä¸è´¿èµ‚â€</strong>ï¼š</p><ul><li><strong>ä¸å‚¬ä¿ƒ</strong>ï¼šè§„å®šä¸€ä¸ªåˆç†çš„è¿›é¤æ—¶é—´ï¼ˆæ¯”å¦‚30åˆ†é’Ÿï¼‰ï¼Œæ—¶é—´åˆ°äº†å°±å¹³é™åœ°æ”¶èµ°é¥­èœã€‚</li><li><strong>ä¸å¼ºè¿«</strong>ï¼šä¸è¦è¿½ç€å–‚ï¼Œä¹Ÿä¸è¦å› ä¸ºä»–ä¸åƒå°±ç”Ÿæ°”æ‰“éª‚ã€‚æŠŠåƒé¥­çš„è´£ä»»è¿˜ç»™å­©å­ã€‚</li><li><strong>ä¸è´¿èµ‚</strong>ï¼šé¿å…è¯´â€œä½ åƒå®Œè¿™å£ï¼Œæˆ‘å°±ç»™ä½ ç³–åƒâ€ã€‚è¿™ä¼šè®©åƒé¥­å˜æˆä¸€åœºäº¤æ˜“ã€‚</li></ul></li><li><p><strong>åˆ©ç”¨â€œåŒä¼´æ•ˆåº”â€</strong>ï¼š</p><ul><li>å¦‚æœæœ‰å¯èƒ½ï¼Œå¤šé‚€è¯·å°æœ‹å‹æ¥å®¶é‡Œä¸€èµ·åƒé¥­ï¼Œå­©å­ä»¬åœ¨ä¸€èµ·åƒé¥­ä¼šæ›´æœ‰ç«äº‰å’Œæ¨¡ä»¿çš„ä¹è¶£ã€‚</li><li>å®¶é•¿è‡ªå·±è¦åšå‡ºåƒå¾—æ´¥æ´¥æœ‰å‘³çš„æ ·å­ã€‚</li></ul></li></ol><h3 id="æ€»ç»“ä¸æé†’"><a href="#æ€»ç»“ä¸æé†’" class="headerlink" title="æ€»ç»“ä¸æé†’"></a>æ€»ç»“ä¸æé†’</h3><ul><li><strong>ä¸€è‡´æ€§æ˜¯å…³é”®</strong>ï¼šä»Šå¤©ä¸è®©çœ‹ï¼Œæ˜å¤©å¿ƒè½¯åˆè®©çœ‹ï¼Œè§„åˆ™å°±å½»åº•å¤±æ•ˆäº†ï¼Œä¸‹æ¬¡çº æ­£ä¼šæ›´éš¾ã€‚</li><li><strong>è€å¿ƒï¼Œè€å¿ƒï¼Œå†è€å¿ƒ</strong>ï¼šæ”¹å˜ä¸€ä¸ªä¹ æƒ¯éœ€è¦æ—¶é—´ï¼Œå¯èƒ½æ˜¯å‡ å¤©ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸¤å‘¨ã€‚è¯·ç»™æ‚¨çš„å­©å­å’Œè‡ªå·±è¶³å¤Ÿçš„æ—¶é—´æ¥é€‚åº”ã€‚</li><li><strong>ç›¸ä¿¡å­©å­çš„æœ¬èƒ½</strong>ï¼šå¥åº·çš„å­©å­ä¸ä¼šè®©è‡ªå·±é•¿æœŸæŒ¨é¥¿ã€‚å½“ä»–å‘ç°å“­é—¹æ— ç”¨ï¼Œä¸”é¥­æ¡Œä¸Šçš„é£Ÿç‰©è¶Šæ¥è¶Šæœ‰è¶£æ—¶ï¼Œä»–ä¼šé‡æ–°å¼€å§‹åƒé¥­ã€‚</li></ul><p>è¿™ä¸ªè¿‡ç¨‹å¯¹å®¶é•¿æ¥è¯´æ˜¯å·¨å¤§çš„è€ƒéªŒï¼Œä½†ä¸ºäº†å­©å­å…»æˆç»ˆèº«å—ç›Šçš„è‰¯å¥½é¥®é£Ÿä¹ æƒ¯ï¼Œå‰æœŸçš„è¾›è‹¦æ˜¯å®Œå…¨å€¼å¾—çš„ã€‚å½“å­©å­æœ€ç»ˆèƒ½ååœ¨é¤æ¡Œä¸Šï¼Œä¸“æ³¨äºé£Ÿç‰©æœ¬èº«ï¼Œå¹¶äº«å—å’Œå®¶äººå…±åº¦çš„æ—¶å…‰æ—¶ï¼Œæ‚¨ä¼šæ„Ÿè°¢ç°åœ¨åšå®šçš„è‡ªå·±ã€‚</p><p><strong>å¦‚æœå­©å­é•¿æœŸé£Ÿæ¬²ä¸æŒ¯ï¼Œä¸”ä¼´æœ‰ç”Ÿé•¿å‘è‚²è¿Ÿç¼“ã€ç²¾ç¥èé¡ç­‰ç—‡çŠ¶ï¼Œå»ºè®®å’¨è¯¢å„¿ç§‘åŒ»ç”Ÿï¼Œæ’é™¤ç”Ÿç†æ€§ç—…å˜çš„å¯èƒ½ã€‚</strong></p><p>å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©æ‚¨ã€‚å¦‚æœè¿˜æœ‰å…¶ä»–æƒ³äº†è§£çš„ï¼Œéšæ—¶å¯ä»¥ç•™è¨€ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§ä¸”è®©å¾ˆå¤šå®¶é•¿å¤´ç–¼çš„é—®é¢˜ã€‚ä¸‰å²çš„å­©å­æ­£å¤„äºè‡ªä¸»æ„è¯†èŒå‘çš„é˜¶æ®µï¼Œç”¨ä¸åƒé¥­æ¥â€œè¦æŒŸâ€çœ‹ç”µè§†ï¼Œæˆ–è€…å› ä¸ºä¹ æƒ¯äº†ç”µè§†ä¼´é¥­è€Œå¤±å»è‡ªä¸»è¿›é£Ÿçš„å…´è¶£ï¼Œéƒ½æ˜¯å…¸å‹çš„è¡¨ç°ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="å„¿ç«¥" scheme="https://xuehuayu.cn/categories/%E5%84%BF%E7%AB%A5/"/>
    
    <category term="å¥åº·" scheme="https://xuehuayu.cn/categories/%E5%84%BF%E7%AB%A5/%E5%81%A5%E5%BA%B7/"/>
    
    <category term="Children" scheme="https://xuehuayu.cn/categories/%E5%84%BF%E7%AB%A5/%E5%81%A5%E5%BA%B7/Children/"/>
    
    <category term="Health" scheme="https://xuehuayu.cn/categories/%E5%84%BF%E7%AB%A5/%E5%81%A5%E5%BA%B7/Children/Health/"/>
    
    
    <category term="å„¿ç«¥" scheme="https://xuehuayu.cn/tags/%E5%84%BF%E7%AB%A5/"/>
    
    <category term="ä¸‰å²" scheme="https://xuehuayu.cn/tags/%E4%B8%89%E5%B2%81/"/>
    
    <category term="çœ‹ç”µè§†" scheme="https://xuehuayu.cn/tags/%E7%9C%8B%E7%94%B5%E8%A7%86/"/>
    
    <category term="ä¸åƒé¥­" scheme="https://xuehuayu.cn/tags/%E4%B8%8D%E5%90%83%E9%A5%AD/"/>
    
  </entry>
  
  <entry>
    <title>jsä¸­Mapå’Œå¯¹è±¡{}çš„åŒºåˆ«</title>
    <link href="https://xuehuayu.cn/article/80fad23d.html"/>
    <id>https://xuehuayu.cn/article/80fad23d.html</id>
    <published>2025-10-24T18:21:54.000Z</published>
    <updated>2025-12-13T16:23:58.672Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ JavaScript ä¸­ï¼Œ<code>new Map</code> å’Œæ™®é€šå¯¹è±¡ <code>{}</code> éƒ½æ˜¯é”®å€¼å¯¹é›†åˆï¼Œä½†å®ƒä»¬æœ‰é‡è¦åŒºåˆ«ï¼š</p><span id="more"></span><h2 id="1-é”®çš„ç±»å‹"><a href="#1-é”®çš„ç±»å‹" class="headerlink" title="1. é”®çš„ç±»å‹"></a>1. é”®çš„ç±»å‹</h2><h3 id="Map-é”®å¯ä»¥æ˜¯ä»»æ„ç±»å‹"><a href="#Map-é”®å¯ä»¥æ˜¯ä»»æ„ç±»å‹" class="headerlink" title="Map - é”®å¯ä»¥æ˜¯ä»»æ„ç±»å‹"></a>Map - é”®å¯ä»¥æ˜¯ä»»æ„ç±»å‹</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å„ç§ç±»å‹çš„é”®éƒ½å¯ä»¥</span></span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&#x27;string&#x27;</span>, <span class="string">&#x27;å­—ç¬¦ä¸²é”®&#x27;</span>);</span><br><span class="line">map.<span class="title function_">set</span>(<span class="number">123</span>, <span class="string">&#x27;æ•°å­—é”®&#x27;</span>);</span><br><span class="line">map.<span class="title function_">set</span>(<span class="literal">true</span>, <span class="string">&#x27;å¸ƒå°”é”®&#x27;</span>);</span><br><span class="line">map.<span class="title function_">set</span>(&#123;&#125;, <span class="string">&#x27;å¯¹è±¡é”®&#x27;</span>);</span><br><span class="line">map.<span class="title function_">set</span>([], <span class="string">&#x27;æ•°ç»„é”®&#x27;</span>);</span><br><span class="line">map.<span class="title function_">set</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;, <span class="string">&#x27;å‡½æ•°é”®&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">get</span>(<span class="number">123</span>)); <span class="comment">// &#x27;æ•°å­—é”®&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å¯¹è±¡-é”®åªèƒ½æ˜¯å­—ç¬¦ä¸²æˆ–-Symbol"><a href="#å¯¹è±¡-é”®åªèƒ½æ˜¯å­—ç¬¦ä¸²æˆ–-Symbol" class="headerlink" title="å¯¹è±¡ - é”®åªèƒ½æ˜¯å­—ç¬¦ä¸²æˆ– Symbol"></a>å¯¹è±¡ - é”®åªèƒ½æ˜¯å­—ç¬¦ä¸²æˆ– Symbol</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">obj[<span class="string">&#x27;string&#x27;</span>] = <span class="string">&#x27;å­—ç¬¦ä¸²é”®&#x27;</span>; <span class="comment">// âœ…</span></span><br><span class="line">obj[<span class="number">123</span>] = <span class="string">&#x27;æ•°å­—é”®&#x27;</span>; <span class="comment">// ä¼šè¢«è½¬æ¢ä¸ºå­—ç¬¦ä¸² &quot;123&quot;</span></span><br><span class="line">obj[&#123;&#125;] = <span class="string">&#x27;å¯¹è±¡é”®&#x27;</span>; <span class="comment">// é”®ä¼šè¢«è½¬æ¢ä¸º &quot;[object Object]&quot;</span></span><br><span class="line">obj[[<span class="number">1</span>,<span class="number">2</span>]] = <span class="string">&#x27;æ•°ç»„é”®&#x27;</span>; <span class="comment">// é”®ä¼šè¢«è½¬æ¢ä¸º &quot;1,2&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span><br><span class="line"><span class="comment">// &#123; &quot;123&quot;: &quot;æ•°å­—é”®&quot;, &quot;string&quot;: &quot;å­—ç¬¦ä¸²é”®&quot;, &quot;[object Object]&quot;: &quot;å¯¹è±¡é”®&quot;, &quot;1,2&quot;: &quot;æ•°ç»„é”®&quot; &#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2-é¡ºåºä¿è¯"><a href="#2-é¡ºåºä¿è¯" class="headerlink" title="2. é¡ºåºä¿è¯"></a>2. é¡ºåºä¿è¯</h2><h3 id="Map-ä¿æŒæ’å…¥é¡ºåº"><a href="#Map-ä¿æŒæ’å…¥é¡ºåº" class="headerlink" title="Map - ä¿æŒæ’å…¥é¡ºåº"></a>Map - ä¿æŒæ’å…¥é¡ºåº</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&#x27;z&#x27;</span>, <span class="number">1</span>);</span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&#x27;a&#x27;</span>, <span class="number">2</span>);</span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&#x27;m&#x27;</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// éå†æ—¶ä¿æŒæ’å…¥é¡ºåº</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> map) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(key); <span class="comment">// z, a, m (æ’å…¥é¡ºåº)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å¯¹è±¡-ä¸ä¿è¯é¡ºåºï¼ˆç°ä»£JSæœ‰æ”¹è¿›ä½†ä»æœ‰å·®å¼‚ï¼‰"><a href="#å¯¹è±¡-ä¸ä¿è¯é¡ºåºï¼ˆç°ä»£JSæœ‰æ”¹è¿›ä½†ä»æœ‰å·®å¼‚ï¼‰" class="headerlink" title="å¯¹è±¡ - ä¸ä¿è¯é¡ºåºï¼ˆç°ä»£JSæœ‰æ”¹è¿›ä½†ä»æœ‰å·®å¼‚ï¼‰"></a>å¯¹è±¡ - ä¸ä¿è¯é¡ºåºï¼ˆç°ä»£JSæœ‰æ”¹è¿›ä½†ä»æœ‰å·®å¼‚ï¼‰</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">    <span class="attr">z</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">a</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">m</span>: <span class="number">3</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç°ä»£JSä¸­å­—ç¬¦ä¸²é”®é€šå¸¸æŒ‰åˆ›å»ºé¡ºåºï¼Œä½†æœ‰ç‰¹æ®Šæƒ…å†µ</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(key); <span class="comment">// é¡ºåºå¯èƒ½å› JSå¼•æ“è€Œå¼‚</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="3-å¤§å°è·å–"><a href="#3-å¤§å°è·å–" class="headerlink" title="3. å¤§å°è·å–"></a>3. å¤§å°è·å–</h2><h3 id="Map-æœ‰-size-å±æ€§"><a href="#Map-æœ‰-size-å±æ€§" class="headerlink" title="Map - æœ‰ size å±æ€§"></a>Map - æœ‰ size å±æ€§</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>);</span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&#x27;b&#x27;</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="property">size</span>); <span class="comment">// 2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å¯¹è±¡-éœ€è¦æ‰‹åŠ¨è®¡ç®—"><a href="#å¯¹è±¡-éœ€è¦æ‰‹åŠ¨è®¡ç®—" class="headerlink" title="å¯¹è±¡ - éœ€è¦æ‰‹åŠ¨è®¡ç®—"></a>å¯¹è±¡ - éœ€è¦æ‰‹åŠ¨è®¡ç®—</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">keys</span>(obj).<span class="property">length</span>); <span class="comment">// 2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="4-æ€§èƒ½å·®å¼‚"><a href="#4-æ€§èƒ½å·®å¼‚" class="headerlink" title="4. æ€§èƒ½å·®å¼‚"></a>4. æ€§èƒ½å·®å¼‚</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Map åœ¨é¢‘ç¹å¢åˆ æ—¶æ€§èƒ½æ›´å¥½</span></span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"><span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ å¤§é‡æ•°æ®æµ‹è¯•</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="string">&#x27;Mapæ·»åŠ &#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++) &#123;</span><br><span class="line">    map.<span class="title function_">set</span>(i, i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="string">&#x27;Mapæ·»åŠ &#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="string">&#x27;å¯¹è±¡æ·»åŠ &#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++) &#123;</span><br><span class="line">    obj[i] = i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="string">&#x27;å¯¹è±¡æ·»åŠ &#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="5-æ–¹æ³•å’Œç‰¹æ€§å¯¹æ¯”"><a href="#5-æ–¹æ³•å’Œç‰¹æ€§å¯¹æ¯”" class="headerlink" title="5. æ–¹æ³•å’Œç‰¹æ€§å¯¹æ¯”"></a>5. æ–¹æ³•å’Œç‰¹æ€§å¯¹æ¯”</h2><h3 id="Map-æ–¹æ³•"><a href="#Map-æ–¹æ³•" class="headerlink" title="Map æ–¹æ³•"></a>Map æ–¹æ³•</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"></span><br><span class="line">map.<span class="title function_">set</span>(<span class="string">&#x27;key&#x27;</span>, <span class="string">&#x27;value&#x27;</span>); <span class="comment">// è®¾ç½®</span></span><br><span class="line">map.<span class="title function_">get</span>(<span class="string">&#x27;key&#x27;</span>); <span class="comment">// è·å–</span></span><br><span class="line">map.<span class="title function_">has</span>(<span class="string">&#x27;key&#x27;</span>); <span class="comment">// æ£€æŸ¥å­˜åœ¨</span></span><br><span class="line">map.<span class="title function_">delete</span>(<span class="string">&#x27;key&#x27;</span>); <span class="comment">// åˆ é™¤</span></span><br><span class="line">map.<span class="title function_">clear</span>(); <span class="comment">// æ¸…ç©º</span></span><br><span class="line">map.<span class="title function_">forEach</span>(<span class="function">(<span class="params">value, key</span>) =&gt;</span> &#123;&#125;); <span class="comment">// éå†</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å¯¹è±¡æ–¹æ³•"><a href="#å¯¹è±¡æ–¹æ³•" class="headerlink" title="å¯¹è±¡æ–¹æ³•"></a>å¯¹è±¡æ–¹æ³•</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">obj.<span class="property">key</span> = <span class="string">&#x27;value&#x27;</span>; <span class="comment">// è®¾ç½®</span></span><br><span class="line">obj.<span class="property">key</span>; <span class="comment">// è·å–</span></span><br><span class="line"><span class="string">&#x27;key&#x27;</span> <span class="keyword">in</span> obj; <span class="comment">// æ£€æŸ¥å­˜åœ¨</span></span><br><span class="line"><span class="keyword">delete</span> obj.<span class="property">key</span>; <span class="comment">// åˆ é™¤</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(obj).<span class="title function_">forEach</span>(<span class="function"><span class="params">key</span> =&gt;</span> &#123;&#125;); <span class="comment">// éå†</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="6-åŸå‹é“¾é—®é¢˜"><a href="#6-åŸå‹é“¾é—®é¢˜" class="headerlink" title="6. åŸå‹é“¾é—®é¢˜"></a>6. åŸå‹é“¾é—®é¢˜</h2><h3 id="Map-æ²¡æœ‰åŸå‹é“¾å¹²æ‰°"><a href="#Map-æ²¡æœ‰åŸå‹é“¾å¹²æ‰°" class="headerlink" title="Map - æ²¡æœ‰åŸå‹é“¾å¹²æ‰°"></a>Map - æ²¡æœ‰åŸå‹é“¾å¹²æ‰°</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">get</span>(<span class="string">&#x27;toString&#x27;</span>)); <span class="comment">// undefined</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å¯¹è±¡-æœ‰åŸå‹é“¾"><a href="#å¯¹è±¡-æœ‰åŸå‹é“¾" class="headerlink" title="å¯¹è±¡ - æœ‰åŸå‹é“¾"></a>å¯¹è±¡ - æœ‰åŸå‹é“¾</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">toString</span>); <span class="comment">// Æ’ toString() &#123; [native code] &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®‰å…¨åˆ›å»ºæ— åŸå‹å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> safeObj = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(safeObj.<span class="property">toString</span>); <span class="comment">// undefined</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="7-åºåˆ—åŒ–"><a href="#7-åºåˆ—åŒ–" class="headerlink" title="7. åºåˆ—åŒ–"></a>7. åºåˆ—åŒ–</h2><h3 id="å¯¹è±¡-å¯-JSON-åºåˆ—åŒ–"><a href="#å¯¹è±¡-å¯-JSON-åºåˆ—åŒ–" class="headerlink" title="å¯¹è±¡ - å¯ JSON åºåˆ—åŒ–"></a>å¯¹è±¡ - å¯ JSON åºåˆ—åŒ–</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj)); <span class="comment">// &#x27;&#123;&quot;a&quot;:1,&quot;b&quot;:2&#125;&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Map-ä¸èƒ½ç›´æ¥åºåˆ—åŒ–"><a href="#Map-ä¸èƒ½ç›´æ¥åºåˆ—åŒ–" class="headerlink" title="Map - ä¸èƒ½ç›´æ¥åºåˆ—åŒ–"></a>Map - ä¸èƒ½ç›´æ¥åºåˆ—åŒ–</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>([[<span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>], [<span class="string">&#x27;b&#x27;</span>, <span class="number">2</span>]]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(map)); <span class="comment">// &#x27;&#123;&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// éœ€è¦è½¬æ¢</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>([...map])); <span class="comment">// &#x27;[[&quot;a&quot;,1],[&quot;b&quot;,2]]&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="8-ä½¿ç”¨åœºæ™¯æ€»ç»“"><a href="#8-ä½¿ç”¨åœºæ™¯æ€»ç»“" class="headerlink" title="8. ä½¿ç”¨åœºæ™¯æ€»ç»“"></a>8. ä½¿ç”¨åœºæ™¯æ€»ç»“</h2><h3 id="ä½¿ç”¨-Map-çš„æƒ…å†µï¼š"><a href="#ä½¿ç”¨-Map-çš„æƒ…å†µï¼š" class="headerlink" title="ä½¿ç”¨ Map çš„æƒ…å†µï¼š"></a>ä½¿ç”¨ Map çš„æƒ…å†µï¼š</h3><ul><li>é”®ç±»å‹å¤šæ ·ï¼ˆå¯¹è±¡ã€å‡½æ•°ç­‰ä½œä¸ºé”®ï¼‰</li><li>éœ€è¦é¢‘ç¹å¢åˆ é”®å€¼å¯¹</li><li>éœ€è¦ä¿æŒæ’å…¥é¡ºåº</li><li>å¤§æ•°æ®é‡æ“ä½œ</li></ul><h3 id="ä½¿ç”¨å¯¹è±¡çš„æƒ…å†µï¼š"><a href="#ä½¿ç”¨å¯¹è±¡çš„æƒ…å†µï¼š" class="headerlink" title="ä½¿ç”¨å¯¹è±¡çš„æƒ…å†µï¼š"></a>ä½¿ç”¨å¯¹è±¡çš„æƒ…å†µï¼š</h3><ul><li>é”®éƒ½æ˜¯å­—ç¬¦ä¸²æˆ– Symbol</li><li>éœ€è¦ JSON åºåˆ—åŒ–</li><li>ç®€å•çš„é…ç½®ã€æ•°æ®å­˜å‚¨</li><li>æ–¹æ³•å’Œå±æ€§çš„é›†åˆ</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Map é€‚åˆçš„åœºæ™¯</span></span><br><span class="line"><span class="keyword">const</span> userSessions = <span class="keyword">new</span> <span class="title class_">Map</span>(); <span class="comment">// ç”¨æˆ·ä¼šè¯å­˜å‚¨ï¼Œé”®æ˜¯ç”¨æˆ·å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹è±¡é€‚åˆçš„åœºæ™¯</span></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    <span class="attr">apiUrl</span>: <span class="string">&#x27;https://api.example.com&#x27;</span>,</span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">5000</span>,</span><br><span class="line">    <span class="attr">retryCount</span>: <span class="number">3</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é€‰æ‹©ä¾æ®ï¼šå¦‚æœéœ€è¦å¤æ‚é”®æˆ–é«˜æ€§èƒ½æ“ä½œï¼Œç”¨ Mapï¼›å¦‚æœæ˜¯ç®€å•æ•°æ®ç»“æ„ï¼Œç”¨å¯¹è±¡ã€‚</p><p>å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©æ‚¨ã€‚å¦‚æœè¿˜æœ‰å…¶ä»–æƒ³äº†è§£çš„ï¼Œéšæ—¶å¯ä»¥ç•™è¨€ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨ JavaScript ä¸­ï¼Œ&lt;code&gt;new Map&lt;/code&gt; å’Œæ™®é€šå¯¹è±¡ &lt;code&gt;{}&lt;/code&gt; éƒ½æ˜¯é”®å€¼å¯¹é›†åˆï¼Œä½†å®ƒä»¬æœ‰é‡è¦åŒºåˆ«ï¼š&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="FrontEnd" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/FrontEnd/"/>
    
    <category term="Map" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/FrontEnd/Map/"/>
    
    
    <category term="å¯¹è±¡" scheme="https://xuehuayu.cn/tags/%E5%AF%B9%E8%B1%A1/"/>
    
    <category term="Map" scheme="https://xuehuayu.cn/tags/Map/"/>
    
    <category term="é›†åˆ" scheme="https://xuehuayu.cn/tags/%E9%9B%86%E5%90%88/"/>
    
  </entry>
  
  <entry>
    <title>Husky åœ¨å‰ç«¯é¡¹ç›®ä¸­çš„ä½¿ç”¨æŒ‡å—</title>
    <link href="https://xuehuayu.cn/article/e36b137f.html"/>
    <id>https://xuehuayu.cn/article/e36b137f.html</id>
    <published>2025-10-23T11:41:03.000Z</published>
    <updated>2025-12-13T16:23:58.664Z</updated>
    
    <content type="html"><![CDATA[<p>Husky æ˜¯ä¸€ä¸ª Git hooks å·¥å…·ï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨ Git æ“ä½œçš„ç‰¹å®šé˜¶æ®µï¼ˆå¦‚æäº¤å‰ã€æ¨é€å‰ï¼‰è‡ªåŠ¨æ‰§è¡Œè„šæœ¬ï¼Œå¸¸ç”¨äºä»£ç è´¨é‡æ£€æŸ¥ã€æµ‹è¯•è¿è¡Œç­‰ã€‚</p><span id="more"></span><h2 id="å®‰è£…ä¸é…ç½®-Husky"><a href="#å®‰è£…ä¸é…ç½®-Husky" class="headerlink" title="å®‰è£…ä¸é…ç½® Husky"></a>å®‰è£…ä¸é…ç½® Husky</h2><h3 id="1-å®‰è£…-Husky"><a href="#1-å®‰è£…-Husky" class="headerlink" title="1. å®‰è£… Husky"></a>1. å®‰è£… Husky</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ npm</span></span><br><span class="line"></span><br><span class="line">npm install husky --save-dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ yarn</span></span><br><span class="line"></span><br><span class="line">yarn add husky --dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ pnpm</span></span><br><span class="line"></span><br><span class="line">pnpm add husky -D</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-å¯ç”¨-Git-hooks"><a href="#2-å¯ç”¨-Git-hooks" class="headerlink" title="2. å¯ç”¨ Git hooks"></a>2. å¯ç”¨ Git hooks</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ– Husky</span></span><br><span class="line"></span><br><span class="line">npx husky init</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…æ‰‹åŠ¨åˆ›å»º .husky ç›®å½•</span></span><br><span class="line"></span><br><span class="line">npm pkg <span class="built_in">set</span> scripts.prepare=<span class="string">&quot;husky install&quot;</span></span><br><span class="line">npm run prepare</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-æ·»åŠ -hooks"><a href="#3-æ·»åŠ -hooks" class="headerlink" title="3. æ·»åŠ  hooks"></a>3. æ·»åŠ  hooks</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ  pre-commit hook</span></span><br><span class="line"></span><br><span class="line">npx husky add .husky/pre-commit <span class="string">&quot;npm test&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ  commit-msg hook</span></span><br><span class="line"></span><br><span class="line">npx husky add .husky/commit-msg <span class="string">&#x27;npx --no -- commitlint --edit &quot;$1&quot;&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å¸¸ç”¨é…ç½®ç¤ºä¾‹"><a href="#å¸¸ç”¨é…ç½®ç¤ºä¾‹" class="headerlink" title="å¸¸ç”¨é…ç½®ç¤ºä¾‹"></a>å¸¸ç”¨é…ç½®ç¤ºä¾‹</h2><h3 id="1-Pre-commit-é’©å­é…ç½®"><a href="#1-Pre-commit-é’©å­é…ç½®" class="headerlink" title="1. Pre-commit é’©å­é…ç½®"></a>1. Pre-commit é’©å­é…ç½®</h3><p>åœ¨ <code>.husky/pre-commit</code> æ–‡ä»¶ä¸­ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># !/usr/bin/env sh</span></span><br><span class="line"></span><br><span class="line">. <span class="string">&quot;<span class="subst">$(dirname -- <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span>/_/husky.sh&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œ lint æ£€æŸ¥</span></span><br><span class="line"></span><br><span class="line">npm run lint</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œæµ‹è¯•</span></span><br><span class="line"></span><br><span class="line">npm <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥ä»£ç æ ¼å¼</span></span><br><span class="line"></span><br><span class="line">npm run format:check</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-Commit-msg-é’©å­é…ç½®"><a href="#2-Commit-msg-é’©å­é…ç½®" class="headerlink" title="2. Commit-msg é’©å­é…ç½®"></a>2. Commit-msg é’©å­é…ç½®</h3><p>åœ¨ <code>.husky/commit-msg</code> æ–‡ä»¶ä¸­ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># !/usr/bin/env sh</span></span><br><span class="line"></span><br><span class="line">. <span class="string">&quot;<span class="subst">$(dirname -- <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span>/_/husky.sh&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ commitlint æ£€æŸ¥æäº¤ä¿¡æ¯æ ¼å¼</span></span><br><span class="line"></span><br><span class="line">npx --no -- commitlint --edit <span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-Pre-push-é’©å­é…ç½®"><a href="#3-Pre-push-é’©å­é…ç½®" class="headerlink" title="3. Pre-push é’©å­é…ç½®"></a>3. Pre-push é’©å­é…ç½®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># !/usr/bin/env sh</span></span><br><span class="line"></span><br><span class="line">. <span class="string">&quot;<span class="subst">$(dirname -- <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span>/_/husky.sh&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨æ¨é€å‰è¿è¡Œå®Œæ•´æµ‹è¯•</span></span><br><span class="line"></span><br><span class="line">npm run <span class="built_in">test</span>:ci</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="é…åˆå…¶ä»–å·¥å…·ä½¿ç”¨"><a href="#é…åˆå…¶ä»–å·¥å…·ä½¿ç”¨" class="headerlink" title="é…åˆå…¶ä»–å·¥å…·ä½¿ç”¨"></a>é…åˆå…¶ä»–å·¥å…·ä½¿ç”¨</h2><h3 id="1-é…åˆ-ESLint"><a href="#1-é…åˆ-ESLint" class="headerlink" title="1. é…åˆ ESLint"></a>1. é…åˆ ESLint</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># pre-commit æ–‡ä»¶å†…å®¹</span></span><br><span class="line"></span><br><span class="line">npm run lint:fix</span><br><span class="line">git add .</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-é…åˆ-Prettier"><a href="#2-é…åˆ-Prettier" class="headerlink" title="2. é…åˆ Prettier"></a>2. é…åˆ Prettier</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># pre-commit æ–‡ä»¶å†…å®¹</span></span><br><span class="line"></span><br><span class="line">npm run format</span><br><span class="line">git add .</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-é…åˆ-lint-staged"><a href="#3-é…åˆ-lint-staged" class="headerlink" title="3. é…åˆ lint-staged"></a>3. é…åˆ lint-staged</h3><p>é¦–å…ˆå®‰è£… lint-stagedï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install lint-staged --save-dev</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ <code>package.json</code> ä¸­é…ç½®ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;lint-staged&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;*.&#123;js,jsx,ts,tsx&#125;&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;eslint --fix&quot;</span><span class="punctuation">,</span> <span class="string">&quot;prettier --write&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;*.&#123;json,md,html,css,scss&#125;&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;prettier --write&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨ <code>.husky/pre-commit</code> ä¸­ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># !/usr/bin/env sh</span></span><br><span class="line"></span><br><span class="line">. <span class="string">&quot;<span class="subst">$(dirname -- <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span>/_/husky.sh&quot;</span></span><br><span class="line"></span><br><span class="line">npx lint-staged</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å®Œæ•´é…ç½®ç¤ºä¾‹"><a href="#å®Œæ•´é…ç½®ç¤ºä¾‹" class="headerlink" title="å®Œæ•´é…ç½®ç¤ºä¾‹"></a>å®Œæ•´é…ç½®ç¤ºä¾‹</h2><h3 id="package-json-é…ç½®"><a href="#package-json-é…ç½®" class="headerlink" title="package.json é…ç½®"></a>package.json é…ç½®</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;prepare&quot;</span><span class="punctuation">:</span> <span class="string">&quot;husky install&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint . --ext .js,.jsx,.ts,.tsx&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lint:fix&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint . --ext .js,.jsx,.ts,.tsx --fix&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;format&quot;</span><span class="punctuation">:</span> <span class="string">&quot;prettier --write .&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;format:check&quot;</span><span class="punctuation">:</span> <span class="string">&quot;prettier --check .&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;jest&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;test:ci&quot;</span><span class="punctuation">:</span> <span class="string">&quot;jest --ci --coverage&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;husky&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^8.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lint-staged&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^13.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;eslint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^8.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;prettier&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;jest&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^29.0.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;lint-staged&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;*.&#123;js,jsx,ts,tsx&#125;&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;eslint --fix&quot;</span><span class="punctuation">,</span> <span class="string">&quot;prettier --write&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;*.&#123;json,md,html,css,scss,yml&#125;&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;prettier --write&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="husky-ç›®å½•ç»“æ„"><a href="#husky-ç›®å½•ç»“æ„" class="headerlink" title=".husky ç›®å½•ç»“æ„"></a>.husky ç›®å½•ç»“æ„</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">.husky/</span><br><span class="line">â”œâ”€â”€ _</span><br><span class="line">â”‚ â””â”€â”€ husky.sh</span><br><span class="line">â”œâ”€â”€ pre-commit</span><br><span class="line">â”œâ”€â”€ commit-msg</span><br><span class="line">â””â”€â”€ pre-push</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="è·³è¿‡-hooksï¼ˆç‰¹æ®Šæƒ…å†µï¼‰"><a href="#è·³è¿‡-hooksï¼ˆç‰¹æ®Šæƒ…å†µï¼‰" class="headerlink" title="è·³è¿‡ hooksï¼ˆç‰¹æ®Šæƒ…å†µï¼‰"></a>è·³è¿‡ hooksï¼ˆç‰¹æ®Šæƒ…å†µï¼‰</h2><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½éœ€è¦è·³è¿‡ hooksï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># è·³è¿‡æ‰€æœ‰ hooks</span></span><br><span class="line"></span><br><span class="line">git commit -m <span class="string">&quot;message&quot;</span> --no-verify</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…ä½¿ç”¨ç¼©å†™</span></span><br><span class="line"></span><br><span class="line">git commit -m <span class="string">&quot;message&quot;</span> -n</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h2><ol><li><strong>ä¿æŒ hooks å¿«é€Ÿæ‰§è¡Œ</strong> - é¿å…åœ¨ pre-commit ä¸­è¿è¡Œè€—æ—¶å¾ˆé•¿çš„ä»»åŠ¡</li><li><strong>åªæ£€æŸ¥æš‚å­˜åŒºçš„æ–‡ä»¶</strong> - ä½¿ç”¨ lint-staged åªå¯¹å°†è¦æäº¤çš„æ–‡ä»¶è¿›è¡Œæ£€æŸ¥</li><li><strong>æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯</strong> - å½“æ£€æŸ¥å¤±è´¥æ—¶ï¼Œç»™å‡ºæ˜ç¡®çš„ä¿®å¤æŒ‡å¯¼</li><li><strong>å›¢é˜Ÿç»Ÿä¸€é…ç½®</strong> - ç¡®ä¿å›¢é˜Ÿæ‰€æœ‰æˆå‘˜ä½¿ç”¨ç›¸åŒçš„ hooks é…ç½®</li></ol><h2 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h2><h3 id="1-Hook-ä¸æ‰§è¡Œ"><a href="#1-Hook-ä¸æ‰§è¡Œ" class="headerlink" title="1. Hook ä¸æ‰§è¡Œ"></a>1. Hook ä¸æ‰§è¡Œ</h3><p>ç¡®ä¿æ–‡ä»¶æœ‰æ‰§è¡Œæƒé™ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x .husky/*</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-Windows-å…¼å®¹æ€§"><a href="#2-Windows-å…¼å®¹æ€§" class="headerlink" title="2. Windows å…¼å®¹æ€§"></a>2. Windows å…¼å®¹æ€§</h3><p>åœ¨ Windows ç³»ç»Ÿä¸­ï¼Œç¡®ä¿ä½¿ç”¨ Git Bash æˆ– WSL æ¥æ‰§è¡Œ hooksã€‚</p><h3 id="3-æ€§èƒ½ä¼˜åŒ–"><a href="#3-æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="3. æ€§èƒ½ä¼˜åŒ–"></a>3. æ€§èƒ½ä¼˜åŒ–</h3><p>å¯¹äºå¤§å‹é¡¹ç›®ï¼Œå¯ä»¥ï¼š</p><ul><li>ä½¿ç”¨ç¼“å­˜ï¼ˆå¦‚ ESLint cacheï¼‰</li><li>åªæ£€æŸ¥ä¿®æ”¹çš„æ–‡ä»¶</li><li>å¹¶è¡Œæ‰§è¡Œä»»åŠ¡</li></ul><p>è¿™æ ·é…ç½®åï¼ŒHusky ä¼šåœ¨æ¯æ¬¡æäº¤æ—¶è‡ªåŠ¨è¿è¡Œä»£ç è´¨é‡æ£€æŸ¥ï¼Œç¡®ä¿å›¢é˜Ÿä»£ç é£æ ¼ä¸€è‡´ä¸”è´¨é‡è¾¾æ ‡ã€‚</p><p>å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©æ‚¨ã€‚å¦‚æœè¿˜æœ‰å…¶ä»–æƒ³äº†è§£çš„ï¼Œéšæ—¶å¯ä»¥ç•™è¨€ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;Husky æ˜¯ä¸€ä¸ª Git hooks å·¥å…·ï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨ Git æ“ä½œçš„ç‰¹å®šé˜¶æ®µï¼ˆå¦‚æäº¤å‰ã€æ¨é€å‰ï¼‰è‡ªåŠ¨æ‰§è¡Œè„šæœ¬ï¼Œå¸¸ç”¨äºä»£ç è´¨é‡æ£€æŸ¥ã€æµ‹è¯•è¿è¡Œç­‰ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="FrontEnd" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/FrontEnd/"/>
    
    <category term="Git" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/FrontEnd/Git/"/>
    
    
    <category term="Hooks" scheme="https://xuehuayu.cn/tags/Hooks/"/>
    
    <category term="Git" scheme="https://xuehuayu.cn/tags/Git/"/>
    
    <category term="Husky" scheme="https://xuehuayu.cn/tags/Husky/"/>
    
  </entry>
  
  <entry>
    <title>TypeScript ä¸­çš„ args è¯¦è§£ï¼Œå’Œ arguments æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</title>
    <link href="https://xuehuayu.cn/article/56271070.html"/>
    <id>https://xuehuayu.cn/article/56271070.html</id>
    <published>2025-10-23T10:29:46.000Z</published>
    <updated>2025-12-13T16:23:58.666Z</updated>
    
    <content type="html"><![CDATA[<p><code>args</code> åœ¨ TypeScript ä¸­é€šå¸¸æŒ‡<strong>å‡½æ•°å‚æ•°</strong>ï¼Œç‰¹åˆ«æ˜¯<strong>å‰©ä½™å‚æ•°ï¼ˆrest parametersï¼‰</strong>ã€‚è®©æˆ‘è¯¦ç»†è§£é‡Šå„ç§ç”¨æ³•å’Œåœºæ™¯ã€‚</p><span id="more"></span><h2 id="1-å‰©ä½™å‚æ•°ï¼ˆRest-Parametersï¼‰"><a href="#1-å‰©ä½™å‚æ•°ï¼ˆRest-Parametersï¼‰" class="headerlink" title="1. å‰©ä½™å‚æ•°ï¼ˆRest Parametersï¼‰"></a>1. å‰©ä½™å‚æ•°ï¼ˆRest Parametersï¼‰</h2><h3 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ ...args æ”¶é›†æ‰€æœ‰å‚æ•°åˆ°ä¸€ä¸ªæ•°ç»„ä¸­</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">...args: <span class="built_in">number</span>[]</span>): <span class="built_in">number</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> args.<span class="title function_">reduce</span>(<span class="function">(<span class="params">total, current</span>) =&gt;</span> total + current, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)); <span class="comment">// 15</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">10</span>, <span class="number">20</span>)); <span class="comment">// 30</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å¸¦å›ºå®šå‚æ•°çš„å‰©ä½™å‚æ•°"><a href="#å¸¦å›ºå®šå‚æ•°çš„å‰©ä½™å‚æ•°" class="headerlink" title="å¸¦å›ºå®šå‚æ•°çš„å‰©ä½™å‚æ•°"></a>å¸¦å›ºå®šå‚æ•°çš„å‰©ä½™å‚æ•°</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">greet</span>(<span class="params">greeting: <span class="built_in">string</span>, ...names: <span class="built_in">string</span>[]</span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;greeting&#125;</span>, <span class="subst">$&#123;names.join(<span class="string">&#x27;, &#x27;</span>)&#125;</span>!`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">greet</span>(<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Charlie&quot;</span>));</span><br><span class="line"><span class="comment">// &quot;Hello, Alice, Bob, Charlie!&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2-å‡½æ•°å‚æ•°å¯¹è±¡ï¼ˆArguments-Objectï¼‰"><a href="#2-å‡½æ•°å‚æ•°å¯¹è±¡ï¼ˆArguments-Objectï¼‰" class="headerlink" title="2. å‡½æ•°å‚æ•°å¯¹è±¡ï¼ˆArguments Objectï¼‰"></a>2. å‡½æ•°å‚æ•°å¯¹è±¡ï¼ˆArguments Objectï¼‰</h2><p>åœ¨ TypeScript&#x2F;JavaScript ä¸­ï¼Œæ¯ä¸ªå‡½æ•°å†…éƒ¨éƒ½å¯ä»¥è®¿é—® <code>arguments</code> å¯¹è±¡ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">traditionalSum</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> total = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">arguments</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    total += <span class="variable language_">arguments</span>[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> total;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">traditionalSum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)); <span class="comment">// 6</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼š<code>arguments</code> ä¸æ˜¯æ•°ç»„ï¼Œè€Œæ˜¯<strong>ç±»æ•°ç»„å¯¹è±¡</strong>ã€‚</p><h2 id="3-å…ƒç»„ç±»å‹çš„å‰©ä½™å‚æ•°"><a href="#3-å…ƒç»„ç±»å‹çš„å‰©ä½™å‚æ•°" class="headerlink" title="3. å…ƒç»„ç±»å‹çš„å‰©ä½™å‚æ•°"></a>3. å…ƒç»„ç±»å‹çš„å‰©ä½™å‚æ•°</h2><p>TypeScript å…è®¸å¯¹å‰©ä½™å‚æ•°ä½¿ç”¨å…ƒç»„ç±»å‹ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å›ºå®šé•¿åº¦å’Œç±»å‹çš„å‰©ä½™å‚æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">processData</span>(<span class="params">name: <span class="built_in">string</span>, ...[first, second]: [<span class="built_in">number</span>, <span class="built_in">number</span>]</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Name: <span class="subst">$&#123;name&#125;</span>, Numbers: <span class="subst">$&#123;first&#125;</span>, <span class="subst">$&#123;second&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">processData</span>(<span class="string">&quot;John&quot;</span>, <span class="number">10</span>, <span class="number">20</span>); <span class="comment">// æ­£å¸¸</span></span><br><span class="line"><span class="comment">// processData(&quot;John&quot;, 10); // é”™è¯¯ï¼šç¼ºå°‘ç¬¬äºŒä¸ªæ•°å­—å‚æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ··åˆç±»å‹çš„å‰©ä½™å‚æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">mixedArgs</span>(<span class="params">...args: [<span class="built_in">string</span>, <span class="built_in">number</span>, ...<span class="built_in">boolean</span>[]]</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(args);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">mixedArgs</span>(<span class="string">&quot;hello&quot;</span>, <span class="number">42</span>, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="4-åœ¨ç®­å¤´å‡½æ•°ä¸­çš„ä½¿ç”¨"><a href="#4-åœ¨ç®­å¤´å‡½æ•°ä¸­çš„ä½¿ç”¨" class="headerlink" title="4. åœ¨ç®­å¤´å‡½æ•°ä¸­çš„ä½¿ç”¨"></a>4. åœ¨ç®­å¤´å‡½æ•°ä¸­çš„ä½¿ç”¨</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç®­å¤´å‡½æ•°ä¸­çš„å‰©ä½™å‚æ•°</span></span><br><span class="line"><span class="keyword">const</span> multiplyAll = (...<span class="attr">numbers</span>: <span class="built_in">number</span>[]): <span class="function"><span class="params">number</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> numbers.<span class="title function_">reduce</span>(<span class="function">(<span class="params">product, num</span>) =&gt;</span> product * num, <span class="number">1</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">multiplyAll</span>(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)); <span class="comment">// 24</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¸¦æ³›å‹çš„å‰©ä½™å‚æ•°</span></span><br><span class="line"><span class="keyword">const</span> mergeArrays = &lt;T&gt;(...<span class="attr">arrays</span>: T[][]): T[] =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> arrays.<span class="title function_">flat</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = <span class="title function_">mergeArrays</span>([<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">6</span>]); <span class="comment">// [1, 2, 3, 4, 5, 6]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="5-å®é™…åº”ç”¨åœºæ™¯"><a href="#5-å®é™…åº”ç”¨åœºæ™¯" class="headerlink" title="5. å®é™…åº”ç”¨åœºæ™¯"></a>5. å®é™…åº”ç”¨åœºæ™¯</h2><h3 id="åœºæ™¯-1ï¼šé«˜é˜¶å‡½æ•°å’Œè£…é¥°å™¨"><a href="#åœºæ™¯-1ï¼šé«˜é˜¶å‡½æ•°å’Œè£…é¥°å™¨" class="headerlink" title="åœºæ™¯ 1ï¼šé«˜é˜¶å‡½æ•°å’Œè£…é¥°å™¨"></a>åœºæ™¯ 1ï¼šé«˜é˜¶å‡½æ•°å’Œè£…é¥°å™¨</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡½æ•°æ—¥å¿—è£…é¥°å™¨</span></span><br><span class="line"><span class="keyword">function</span> logExecution&lt;T <span class="keyword">extends</span> (...<span class="attr">args</span>: <span class="built_in">any</span>[]) =&gt; <span class="built_in">any</span>&gt;(</span><br><span class="line">  <span class="attr">target</span>: T</span><br><span class="line">): <span class="function">(<span class="params">...args: Parameters&lt;T&gt;</span>) =&gt;</span> <span class="title class_">ReturnType</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args: Parameters&lt;T&gt;</span>): <span class="title class_">ReturnType</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å‡½æ•°è¢«è°ƒç”¨ï¼Œå‚æ•°:`</span>, args);</span><br><span class="line">    <span class="keyword">const</span> result = <span class="title function_">target</span>(...args);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å‡½æ•°è¿”å›:`</span>, result);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> loggedSum = <span class="title function_">logExecution</span>(sum);</span><br><span class="line"><span class="title function_">loggedSum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">// ä¼šè¾“å‡ºè°ƒç”¨æ—¥å¿—</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="åœºæ™¯-2ï¼šé…ç½®åˆå¹¶"><a href="#åœºæ™¯-2ï¼šé…ç½®åˆå¹¶" class="headerlink" title="åœºæ™¯ 2ï¼šé…ç½®åˆå¹¶"></a>åœºæ™¯ 2ï¼šé…ç½®åˆå¹¶</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Config</span> &#123;</span><br><span class="line">  timeout?: <span class="built_in">number</span>;</span><br><span class="line">  retries?: <span class="built_in">number</span>;</span><br><span class="line">  baseURL?: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createApiClient</span>(<span class="params">defaultConfig: Config, ...configs: Partial&lt;Config&gt;[]</span>): <span class="title class_">Config</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> configs.<span class="title function_">reduce</span>(<span class="function">(<span class="params">merged, config</span>) =&gt;</span> (&#123; ...merged, ...config &#125;), defaultConfig);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> client = <span class="title function_">createApiClient</span>(</span><br><span class="line">  &#123; <span class="attr">timeout</span>: <span class="number">5000</span>, <span class="attr">baseURL</span>: <span class="string">&quot;/api&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">retries</span>: <span class="number">3</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">timeout</span>: <span class="number">3000</span> &#125;</span><br><span class="line">);</span><br><span class="line"><span class="comment">// ç»“æœ: &#123; timeout: 3000, baseURL: &quot;/api&quot;, retries: 3 &#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="åœºæ™¯-3ï¼šäº‹ä»¶å¤„ç†å™¨"><a href="#åœºæ™¯-3ï¼šäº‹ä»¶å¤„ç†å™¨" class="headerlink" title="åœºæ™¯ 3ï¼šäº‹ä»¶å¤„ç†å™¨"></a>åœºæ™¯ 3ï¼šäº‹ä»¶å¤„ç†å™¨</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">EventEmitter</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">events</span>: <span class="title class_">Map</span>&lt;<span class="built_in">string</span>, <span class="title class_">Function</span>[]&gt; = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"></span><br><span class="line">  <span class="title function_">on</span>(<span class="attr">event</span>: <span class="built_in">string</span>, ...<span class="attr">handlers</span>: (<span class="function">(<span class="params">...args: <span class="built_in">any</span>[]</span>) =&gt;</span> <span class="built_in">void</span>)[]): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">events</span>.<span class="title function_">has</span>(event)) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">events</span>.<span class="title function_">set</span>(event, []);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">events</span>.<span class="title function_">get</span>(event)!.<span class="title function_">push</span>(...handlers);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">emit</span>(<span class="attr">event</span>: <span class="built_in">string</span>, ...<span class="attr">args</span>: <span class="built_in">any</span>[]): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> handlers = <span class="variable language_">this</span>.<span class="property">events</span>.<span class="title function_">get</span>(event) || [];</span><br><span class="line">    handlers.<span class="title function_">forEach</span>(<span class="function"><span class="params">handler</span> =&gt;</span> <span class="title function_">handler</span>(...args));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> emitter = <span class="keyword">new</span> <span class="title class_">EventEmitter</span>();</span><br><span class="line">emitter.<span class="title function_">on</span>(<span class="string">&quot;message&quot;</span>, <span class="function">(<span class="params">msg: <span class="built_in">string</span>, priority: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æ¶ˆæ¯: <span class="subst">$&#123;msg&#125;</span>, ä¼˜å…ˆçº§: <span class="subst">$&#123;priority&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">emitter.<span class="title function_">emit</span>(<span class="string">&quot;message&quot;</span>, <span class="string">&quot;Hello World&quot;</span>, <span class="number">1</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="6-æ³›å‹ä¸å‰©ä½™å‚æ•°"><a href="#6-æ³›å‹ä¸å‰©ä½™å‚æ•°" class="headerlink" title="6. æ³›å‹ä¸å‰©ä½™å‚æ•°"></a>6. æ³›å‹ä¸å‰©ä½™å‚æ•°</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³›å‹å‰©ä½™å‚æ•° - ä¿æŒç±»å‹å®‰å…¨</span></span><br><span class="line"><span class="keyword">function</span> callAll&lt;T <span class="keyword">extends</span> <span class="built_in">any</span>[]&gt;(</span><br><span class="line">  ...<span class="attr">functions</span>: (<span class="function">(<span class="params">...args: T</span>) =&gt;</span> <span class="built_in">void</span>)[]</span><br><span class="line">): <span class="function">(<span class="params">...args: T</span>) =&gt;</span> <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">...args: T</span>) =&gt;</span> &#123;</span><br><span class="line">    functions.<span class="title function_">forEach</span>(<span class="function"><span class="params">fn</span> =&gt;</span> <span class="title function_">fn</span>(...args));</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">logger</span> = (<span class="params">msg: <span class="built_in">string</span>, count: <span class="built_in">number</span></span>) =&gt; <span class="variable language_">console</span>.<span class="title function_">log</span>(msg, count);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">storage</span> = (<span class="params">msg: <span class="built_in">string</span>, count: <span class="built_in">number</span></span>) =&gt; <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;last&#x27;</span>, msg);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> combined = <span class="title function_">callAll</span>(logger, storage);</span><br><span class="line"><span class="title function_">combined</span>(<span class="string">&quot;test&quot;</span>, <span class="number">5</span>); <span class="comment">// ä¸¤ä¸ªå‡½æ•°éƒ½ä¼šæ¥æ”¶åˆ° &quot;test&quot; å’Œ 5</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="7-ç±»å‹å·¥å…·ä¸-args"><a href="#7-ç±»å‹å·¥å…·ä¸-args" class="headerlink" title="7. ç±»å‹å·¥å…·ä¸ args"></a>7. ç±»å‹å·¥å…·ä¸ <code>args</code></h2><h3 id="Parameters-å·¥å…·ç±»å‹"><a href="#Parameters-å·¥å…·ç±»å‹" class="headerlink" title="Parameters å·¥å…·ç±»å‹"></a>Parameters å·¥å…·ç±»å‹</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–å‡½æ•°çš„å‚æ•°ç±»å‹</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">SumParams</span> = <span class="title class_">Parameters</span>&lt;<span class="keyword">typeof</span> sum&gt;; <span class="comment">// [number[]]</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">GreetParams</span> = <span class="title class_">Parameters</span>&lt;<span class="keyword">typeof</span> greet&gt;; <span class="comment">// [string, ...string[]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°ä¸€ä¸ªåŒ…è£…å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> withRetry&lt;T <span class="keyword">extends</span> <span class="built_in">any</span>[], R&gt;(</span><br><span class="line">  <span class="attr">fn</span>: <span class="function">(<span class="params">...args: T</span>) =&gt;</span> R,</span><br><span class="line">  <span class="attr">retries</span>: <span class="built_in">number</span></span><br><span class="line">): <span class="function">(<span class="params">...args: T</span>) =&gt;</span> R &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args: T</span>): R &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">lastError</span>: <span class="title class_">Error</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; retries; i++) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">fn</span>(...args);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        lastError = error <span class="keyword">as</span> <span class="title class_">Error</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">throw</span> lastError!;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="8-å¸¸è§æ¨¡å¼å’Œæœ€ä½³å®è·µ"><a href="#8-å¸¸è§æ¨¡å¼å’Œæœ€ä½³å®è·µ" class="headerlink" title="8. å¸¸è§æ¨¡å¼å’Œæœ€ä½³å®è·µ"></a>8. å¸¸è§æ¨¡å¼å’Œæœ€ä½³å®è·µ</h2><h3 id="æ¨¡å¼-1ï¼šå‚æ•°éªŒè¯"><a href="#æ¨¡å¼-1ï¼šå‚æ•°éªŒè¯" class="headerlink" title="æ¨¡å¼ 1ï¼šå‚æ•°éªŒè¯"></a>æ¨¡å¼ 1ï¼šå‚æ•°éªŒè¯</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">validateAndProcess</span>(<span class="params">...inputs: (<span class="built_in">string</span> | <span class="built_in">number</span>)[]</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (inputs.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;è‡³å°‘éœ€è¦ä¸€ä¸ªå‚æ•°&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  inputs.<span class="title function_">forEach</span>(<span class="function">(<span class="params">input, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (input === <span class="literal">null</span> || input === <span class="literal">undefined</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`å‚æ•° <span class="subst">$&#123;index&#125;</span> ä¸èƒ½ä¸º null æˆ– undefined`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¤„ç†é€»è¾‘...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ¨¡å¼-2ï¼šå‡½æ•°ç»„åˆ"><a href="#æ¨¡å¼-2ï¼šå‡½æ•°ç»„åˆ" class="headerlink" title="æ¨¡å¼ 2ï¼šå‡½æ•°ç»„åˆ"></a>æ¨¡å¼ 2ï¼šå‡½æ•°ç»„åˆ</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> compose&lt;T <span class="keyword">extends</span> <span class="built_in">any</span>[]&gt;(</span><br><span class="line">  ...<span class="attr">functions</span>: (<span class="function">(<span class="params">...args: T</span>) =&gt;</span> <span class="built_in">void</span>)[]</span><br><span class="line">): <span class="function">(<span class="params">...args: T</span>) =&gt;</span> <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">...args: T</span>) =&gt;</span> &#123;</span><br><span class="line">    functions.<span class="title function_">forEach</span>(<span class="function"><span class="params">fn</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="title function_">fn</span>(...args);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;å‡½æ•°æ‰§è¡Œé”™è¯¯:&#x27;</span>, error);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ¨¡å¼-3ï¼šæ¡ä»¶å‚æ•°å¤„ç†"><a href="#æ¨¡å¼-3ï¼šæ¡ä»¶å‚æ•°å¤„ç†" class="headerlink" title="æ¨¡å¼ 3ï¼šæ¡ä»¶å‚æ•°å¤„ç†"></a>æ¨¡å¼ 3ï¼šæ¡ä»¶å‚æ•°å¤„ç†</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">flexibleProcessor</span>(<span class="params"></span></span><br><span class="line"><span class="params">  required: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">  ...optional: (<span class="built_in">number</span> | <span class="built_in">string</span>)[]</span></span><br><span class="line"><span class="params"></span>): &#123; <span class="attr">required</span>: <span class="built_in">string</span>; <span class="attr">optional</span>: (<span class="built_in">number</span> | <span class="built_in">string</span>)[] &#125; &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> processedOptional = optional.<span class="title function_">map</span>(<span class="function"><span class="params">arg</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> arg === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> arg.<span class="title function_">toUpperCase</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arg * <span class="number">2</span>;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123; required, <span class="attr">optional</span>: processedOptional &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="9-æ³¨æ„äº‹é¡¹"><a href="#9-æ³¨æ„äº‹é¡¹" class="headerlink" title="9. æ³¨æ„äº‹é¡¹"></a>9. æ³¨æ„äº‹é¡¹</h2><h3 id="æ³¨æ„-1ï¼šarguments-vs-å‰©ä½™å‚æ•°"><a href="#æ³¨æ„-1ï¼šarguments-vs-å‰©ä½™å‚æ•°" class="headerlink" title="æ³¨æ„ 1ï¼šarguments vs å‰©ä½™å‚æ•°"></a>æ³¨æ„ 1ï¼š<code>arguments</code> vs å‰©ä½™å‚æ•°</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ ä¼ ç»Ÿæ–¹å¼ - æ²¡æœ‰ç±»å‹å®‰å…¨</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">oldWay</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">arguments</span>[<span class="number">0</span>], <span class="variable language_">arguments</span>[<span class="number">1</span>]); <span class="comment">// æ²¡æœ‰ç±»å‹æç¤º</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… ç°ä»£æ–¹å¼ - ç±»å‹å®‰å…¨</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">newWay</span>(<span class="params">...args: [<span class="built_in">string</span>, <span class="built_in">number</span>]</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(args[<span class="number">0</span>], args[<span class="number">1</span>]); <span class="comment">// æœ‰å®Œæ•´çš„ç±»å‹æç¤º</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ³¨æ„-2ï¼šæ€§èƒ½è€ƒè™‘"><a href="#æ³¨æ„-2ï¼šæ€§èƒ½è€ƒè™‘" class="headerlink" title="æ³¨æ„ 2ï¼šæ€§èƒ½è€ƒè™‘"></a>æ³¨æ„ 2ï¼šæ€§èƒ½è€ƒè™‘</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹äºæ€§èƒ½æ•æ„Ÿçš„åœºæ™¯ï¼Œé¿å…åœ¨çƒ­è·¯å¾„ä¸­ä½¿ç”¨å‰©ä½™å‚æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">optimizedSum</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span>, c?: <span class="built_in">number</span>, d?: <span class="built_in">number</span></span>): <span class="built_in">number</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> total = a + b;</span><br><span class="line">  <span class="keyword">if</span> (c !== <span class="literal">undefined</span>) total += c;</span><br><span class="line">  <span class="keyword">if</span> (d !== <span class="literal">undefined</span>) total += d;</span><br><span class="line">  <span class="keyword">return</span> total;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¯”ä½¿ç”¨ ...args: number[] æ›´é«˜æ•ˆ</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ğŸ’-æ€»ç»“"><a href="#ğŸ’-æ€»ç»“" class="headerlink" title="ğŸ’ æ€»ç»“"></a>ğŸ’ æ€»ç»“</h2><p>åœ¨ TypeScript ä¸­ï¼Œ<code>args</code> ä¸»è¦æ¶‰åŠï¼š</p><ol><li><strong>å‰©ä½™å‚æ•°</strong> (<code>...args</code>)ï¼šæ”¶é›†å¤šä¸ªå‚æ•°åˆ°æ•°ç»„</li><li><strong><code>arguments</code> å¯¹è±¡</strong>ï¼šå‡½æ•°å†…å¯è®¿é—®çš„ç±»æ•°ç»„å¯¹è±¡</li><li><strong>å…ƒç»„ç±»å‹çš„å‰©ä½™å‚æ•°</strong>ï¼šæä¾›æ›´ç²¾ç¡®çš„ç±»å‹æ§åˆ¶</li><li><strong>æ³›å‹å‰©ä½™å‚æ•°</strong>ï¼šä¿æŒç±»å‹å®‰å…¨çš„å¯å˜å‚æ•°</li></ol><p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p><ul><li>ä¼˜å…ˆä½¿ç”¨å‰©ä½™å‚æ•°è€Œé <code>arguments</code> å¯¹è±¡</li><li>ä¸ºå‰©ä½™å‚æ•°æä¾›æ˜ç¡®çš„ç±»å‹æ³¨è§£</li><li>åœ¨éœ€è¦ç²¾ç¡®ç±»å‹æ§åˆ¶æ—¶ä½¿ç”¨å…ƒç»„ç±»å‹</li><li>è€ƒè™‘æ€§èƒ½å½±å“ï¼Œåœ¨çƒ­è·¯å¾„ä¸­é¿å…ä¸å¿…è¦çš„æ•°ç»„åˆ›å»º</li></ul><p><code>args</code> æ˜¯ TypeScript å‡½æ•°ç¼–ç¨‹ä¸­çš„é‡è¦æ¦‚å¿µï¼Œåˆç†ä½¿ç”¨å¯ä»¥å¤§å¤§å¢å¼ºä»£ç çš„çµæ´»æ€§å’Œç±»å‹å®‰å…¨æ€§ã€‚</p><p>å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©æ‚¨ã€‚å¦‚æœè¿˜æœ‰å…¶ä»–æƒ³äº†è§£çš„ï¼Œéšæ—¶å¯ä»¥ç•™è¨€ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;code&gt;args&lt;/code&gt; åœ¨ TypeScript ä¸­é€šå¸¸æŒ‡&lt;strong&gt;å‡½æ•°å‚æ•°&lt;/strong&gt;ï¼Œç‰¹åˆ«æ˜¯&lt;strong&gt;å‰©ä½™å‚æ•°ï¼ˆrest parametersï¼‰&lt;/strong&gt;ã€‚è®©æˆ‘è¯¦ç»†è§£é‡Šå„ç§ç”¨æ³•å’Œåœºæ™¯ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="FrontEnd" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/FrontEnd/"/>
    
    <category term="TypeScript" scheme="https://xuehuayu.cn/categories/%E5%89%8D%E7%AB%AF/FrontEnd/TypeScript/"/>
    
    
    <category term="TypeScript" scheme="https://xuehuayu.cn/tags/TypeScript/"/>
    
    <category term="arguments" scheme="https://xuehuayu.cn/tags/arguments/"/>
    
    <category term="args" scheme="https://xuehuayu.cn/tags/args/"/>
    
    <category term="å‚æ•°" scheme="https://xuehuayu.cn/tags/%E5%8F%82%E6%95%B0/"/>
    
  </entry>
  
</feed>
